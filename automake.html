<html lang="en"><head><title>automake</title>

<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="automake">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage"><!--
This manual is for GNU Automake (version 1.9.4,
18 December 2004), a program which creates GNU standards-compliant
Makefiles from template files.

Copyright (C) 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
2003, 2004 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development.''
   -->

<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; }
--></style></head>
<body>
<h1 class="settitle">automake</h1>
<div class="node">
<p></p><hr>
<a name="Top"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="unnumbered">GNU Automake</h2>

<p>This manual is for <acronym>GNU</acronym> Automake (version 1.9.4,
18 December 2004), a program which creates GNU standards-compliant
Makefiles from template files.

   </p><p>Copyright © 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
2003, 2004 Free Software Foundation, Inc.

   </p><blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the <acronym>GNU</acronym> Free Documentation License,
Version 1.2 or any later version published by the Free Software
Foundation; with no Invariant Sections, with the Front-Cover texts
being &#8220;A <acronym>GNU</acronym> Manual,&#8221; and with the Back-Cover Texts as in
(a) below.  A copy of the license is included in the section entitled
&#8220;<acronym>GNU</acronym> Free Documentation License.&#8221;

        <p>(a) The FSF's Back-Cover Text is: &#8220;You have freedom to copy and
modify this <acronym>GNU</acronym> Manual, like <acronym>GNU</acronym> software.  Copies
published by the Free Software Foundation raise funds for
<acronym>GNU</acronym> development.&#8221;
</p></blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Introduction">Introduction</a>:                 Automake's purpose
</li><li><a accesskey="2" href="#Generalities">Generalities</a>:                 General ideas
</li><li><a accesskey="3" href="#Examples">Examples</a>:                     Some example packages
</li><li><a accesskey="4" href="#Invoking-Automake">Invoking Automake</a>:            Creating a Makefile.in
</li><li><a accesskey="5" href="#configure">configure</a>:                    Scanning configure.ac or configure.in
</li><li><a accesskey="6" href="#Directories">Directories</a>:                  Declaring subdirectories
</li><li><a accesskey="7" href="#Programs">Programs</a>:                     Building programs and libraries
</li><li><a accesskey="8" href="#Other-objects">Other objects</a>:                Other derived objects
</li><li><a accesskey="9" href="#Other-GNU-Tools">Other GNU Tools</a>:              Other GNU Tools
</li><li><a href="#Documentation">Documentation</a>:                Building documentation
</li><li><a href="#Install">Install</a>:                      What gets installed
</li><li><a href="#Clean">Clean</a>:                        What gets cleaned
</li><li><a href="#Dist">Dist</a>:                         What goes in a distribution
</li><li><a href="#Tests">Tests</a>:                        Support for test suites
</li><li><a href="#Rebuilding">Rebuilding</a>:                   Automatic rebuilding of Makefile
</li><li><a href="#Options">Options</a>:                      Changing Automake's behavior
</li><li><a href="#Miscellaneous">Miscellaneous</a>:                Miscellaneous rules
</li><li><a href="#Include">Include</a>:                      Including extra files in an Automake template.
</li><li><a href="#Conditionals">Conditionals</a>:                 Conditionals
</li><li><a href="#Gnits">Gnits</a>:                        The effect of <code>--gnu</code> and <code>--gnits</code>
</li><li><a href="#Cygnus">Cygnus</a>:                       The effect of <code>--cygnus</code>
</li><li><a href="#Not-Enough">Not Enough</a>:                   When Automake is not Enough
</li><li><a href="#Distributing">Distributing</a>:                 Distributing the Makefile.in
</li><li><a href="#API-versioning">API versioning</a>:               About compatibility between Automake versions
</li><li><a href="#Upgrading">Upgrading</a>:                    Upgrading to a Newer Automake Version
</li><li><a href="#FAQ">FAQ</a>:                          Frequently Asked Questions
</li><li><a href="#History">History</a>:                      Notes about the history of Automake
</li><li><a href="#Copying-This-Manual">Copying This Manual</a>:          How to make copies of this manual
</li><li><a href="#Indices">Indices</a>:                      Indices of variables, macros, and concepts

</li></ul>
<p>--- The Detailed Node Listing ---

</p><p>General ideas

</p>
<ul class="menu">
<li><a href="#General-Operation">General Operation</a>:            General operation of Automake
</li><li><a href="#Strictness">Strictness</a>:                   Standards conformance checking
</li><li><a href="#Uniform">Uniform</a>:                      The Uniform Naming Scheme
</li><li><a href="#Canonicalization">Canonicalization</a>:             How derived variables are named
</li><li><a href="#User-Variables">User Variables</a>:               Variables reserved for the user
</li><li><a href="#Auxiliary-Programs">Auxiliary Programs</a>:           Programs automake might require

</li></ul>
<p>Some example packages

</p>
<ul class="menu">
<li><a href="#Complete">Complete</a>:                     A simple example, start to finish
</li><li><a href="#Hello">Hello</a>:                        A classic program
</li><li><a href="#true">true</a>:                         Building true and false

</li></ul>
<p>Scanning <span class="file">configure.ac</span>

</p>
<ul class="menu">
<li><a href="#Requirements">Requirements</a>:                 Configuration requirements
</li><li><a href="#Optional">Optional</a>:                     Other things Automake recognizes
</li><li><a href="#Invoking-aclocal">Invoking aclocal</a>:             Auto-generating aclocal.m4
</li><li><a href="#aclocal-options">aclocal options</a>:              aclocal command line arguments
</li><li><a href="#Macro-search-path">Macro search path</a>:            Modifying aclocal's search path
</li><li><a href="#Macros">Macros</a>:                       Autoconf macros supplied with Automake
</li><li><a href="#Extending-aclocal">Extending aclocal</a>:            Writing your own aclocal macros
</li><li><a href="#Local-Macros">Local Macros</a>:                 Organizing local macros
</li><li><a href="#Future-of-aclocal">Future of aclocal</a>:            aclocal's scheduled death

</li></ul>
<p>Auto-generating aclocal.m4

</p>
<ul class="menu">
<li><a href="#aclocal-options">aclocal options</a>:              Options supported by aclocal
</li><li><a href="#Macro-search-path">Macro search path</a>:            How aclocal finds .m4 files

</li></ul>
<p>Autoconf macros supplied with Automake

</p>
<ul class="menu">
<li><a href="#Public-macros">Public macros</a>:                Macros that you can use.
</li><li><a href="#Private-macros">Private macros</a>:               Macros that you should not use.

</li></ul>
<p>Directories

</p>
<ul class="menu">
<li><a href="#Subdirectories">Subdirectories</a>:               Building subdirectories recursively
</li><li><a href="#Conditional-Subdirectories">Conditional Subdirectories</a>:   Conditionally not building directories
</li><li><a href="#Alternative">Alternative</a>:                  Subdirectories without recursion
</li><li><a href="#Subpackages">Subpackages</a>:                  Nesting packages

</li></ul>
<p>Building Programs and Libraries

</p>
<ul class="menu">
<li><a href="#A-Program">A Program</a>:                    Building a program
</li><li><a href="#A-Library">A Library</a>:                    Building a library
</li><li><a href="#A-Shared-Library">A Shared Library</a>:             Building a Libtool library
</li><li><a href="#Program-and-Library-Variables">Program and Library Variables</a>:   Variables controlling program and
                                library builds
</li><li><a href="#Default-_005fSOURCES">Default _SOURCES</a>:             Default source files
</li><li><a href="#LIBOBJS">LIBOBJS</a>:                      Special handling for LIBOBJS and ALLOCA
</li><li><a href="#Program-variables">Program variables</a>:            Variables used when building a program
</li><li><a href="#Yacc-and-Lex">Yacc and Lex</a>:                 Yacc and Lex support
</li><li><a href="#C_002b_002b-Support">C++ Support</a>:                  Compiling C++ sources
</li><li><a href="#Assembly-Support">Assembly Support</a>:             Compiling assembly sources
</li><li><a href="#Fortran-77-Support">Fortran 77 Support</a>:           Compiling Fortran 77 sources
</li><li><a href="#Fortran-9x-Support">Fortran 9x Support</a>:           Compiling Fortran 9x sources
</li><li><a href="#Java-Support">Java Support</a>:                 Compiling Java sources
</li><li><a href="#Support-for-Other-Languages">Support for Other Languages</a>:   Compiling other languages
</li><li><a href="#ANSI">ANSI</a>:                         Automatic de-ANSI-fication
</li><li><a href="#Dependencies">Dependencies</a>:                 Automatic dependency tracking
</li><li><a href="#EXEEXT">EXEEXT</a>:                       Support for executable extensions

</li></ul>
<p>Building a program

</p>
<ul class="menu">
<li><a href="#Program-Sources">Program Sources</a>:              Defining program sources
</li><li><a href="#Linking">Linking</a>:                      Linking with libraries or extra objects
</li><li><a href="#Conditional-Sources">Conditional Sources</a>:          Handling conditional sources
</li><li><a href="#Conditional-Programs">Conditional Programs</a>:         Building program conditionally

</li></ul>
<p>Building a Shared Library

</p>
<ul class="menu">
<li><a href="#Libtool-Concept">Libtool Concept</a>:              Introducing Libtool
</li><li><a href="#Libtool-Libraries">Libtool Libraries</a>:            Declaring Libtool Libraries
</li><li><a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>:   Building Libtool Libraries Conditionally
</li><li><a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>:   Choosing Library Sources Conditionally
</li><li><a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>:   Building Convenience Libtool Libraries
</li><li><a href="#Libtool-Modules">Libtool Modules</a>:              Building Libtool Modules
</li><li><a href="#Libtool-Flags">Libtool Flags</a>:                Using _LIBADD and _LDFLAGS
</li><li><a href="#LTLIBOBJS">LTLIBOBJS</a>:                    Using $(LTLIBOBJS) and $(LTALLOCA)
</li><li><a href="#Libtool-Issues">Libtool Issues</a>:               Common Issues Related to Libtool's Use

</li></ul>
<p>Fortran 77 Support

</p>
<ul class="menu">
<li><a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>:     Preprocessing Fortran 77 sources
</li><li><a href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>:   Compiling Fortran 77 sources
</li><li><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>:   Mixing Fortran 77 With C and C++

</li></ul>
<p>Mixing Fortran 77 With C and C++

</p>
<ul class="menu">
<li><a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>:     Automatic linker selection

</li></ul>
<p>Fortran 9x Support

</p>
<ul class="menu">
<li><a href="#Compiling-Fortran-9x-Files">Compiling Fortran 9x Files</a>:   Compiling Fortran 9x sources

</li></ul>
<p>Other Derived Objects

</p>
<ul class="menu">
<li><a href="#Scripts">Scripts</a>:                      Executable scripts
</li><li><a href="#Headers">Headers</a>:                      Header files
</li><li><a href="#Data">Data</a>:                         Architecture-independent data files
</li><li><a href="#Sources">Sources</a>:                      Derived sources

</li></ul>
<p>Built sources

</p>
<ul class="menu">
<li><a href="#Built-sources-example">Built sources example</a>:        Several ways to handle built sources.

</li></ul>
<p>Other GNU Tools

</p>
<ul class="menu">
<li><a href="#Emacs-Lisp">Emacs Lisp</a>:                   Emacs Lisp
</li><li><a href="#gettext">gettext</a>:                      Gettext
</li><li><a href="#Libtool">Libtool</a>:                      Libtool
</li><li><a href="#Java">Java</a>:                         Java
</li><li><a href="#Python">Python</a>:                       Python

</li></ul>
<p>Building documentation

</p>
<ul class="menu">
<li><a href="#Texinfo">Texinfo</a>:                      Texinfo
</li><li><a href="#Man-pages">Man pages</a>:                    Man pages

</li></ul>
<p>Miscellaneous Rules

</p>
<ul class="menu">
<li><a href="#Tags">Tags</a>:                         Interfacing to etags and mkid
</li><li><a href="#Suffixes">Suffixes</a>:                     Handling new file extensions
</li><li><a href="#Multilibs">Multilibs</a>:                    Support for multilibs.

</li></ul>
<p>When Automake Isn't Enough

</p>
<ul class="menu">
<li><a href="#Extending">Extending</a>:                    Adding new rules or overriding existing ones.
</li><li><a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>:        Integrating Non-Automake <span class="file">Makefile</span>s.

</li></ul>
<p>Frequently Asked Questions about Automake

</p>
<ul class="menu">
<li><a href="#CVS">CVS</a>:                          CVS and generated files
</li><li><a href="#maintainer_002dmode">maintainer-mode</a>:              missing and AM_MAINTAINER_MODE
</li><li><a href="#wildcards">wildcards</a>:                    Why doesn't Automake support wildcards?
</li><li><a href="#distcleancheck">distcleancheck</a>:               Files left in build directory after distclean
</li><li><a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>:      CFLAGS vs. AM_CFLAGS vs. mumble_CFLAGS
</li><li><a href="#renamed-objects">renamed objects</a>:              Why are object files sometimes renamed?
</li><li><a href="#Per_002dObject-Flags">Per-Object Flags</a>:             How to simulate per-object flags?
</li><li><a href="#Multiple-Outputs">Multiple Outputs</a>:             Writing rules for tools with many output files

</li></ul>
<p>History of Automake

</p>
<ul class="menu">
<li><a href="#Timeline">Timeline</a>:                     The Automake story.
</li><li><a href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>:   Evolution of Automatic Dependency Tracking
</li><li><a href="#Releases">Releases</a>:                     Statistics about Automake Releases

</li></ul>
<p>Copying This Manual

</p>
<ul class="menu">
<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual

</li></ul>
<p>Indices

</p>
<ul class="menu">
<li><a href="#Macro-Index">Macro Index</a>:                  Index of Autoconf macros
</li><li><a href="#Variable-Index">Variable Index</a>:               Index of Makefile variables
</li><li><a href="#General-Index">General Index</a>:                General index

   </li></ul>

<div class="node">
<p></p><hr>
<a name="Introduction"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Generalities">Generalities</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">1 Introduction</h2>

<p>Automake is a tool for automatically generating <span class="file">Makefile.in</span>s from
files called <span class="file">Makefile.am</span>.  Each <span class="file">Makefile.am</span> is basically a
series of <code>make</code> variable definitions<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>, with
rules being thrown in occasionally.  The generated <span class="file">Makefile.in</span>s
are compliant with the GNU Makefile standards.

   </p><p><a name="index-GNU-Makefile-standards-1"></a>
The GNU Makefile Standards Document
(see <a href="http://sources.redhat.com/automake/standards.html#Makefile-Conventions">Makefile Conventions (The GNU Coding Standards)</a>)
is long, complicated, and subject to change.  The goal of Automake is to
remove the burden of Makefile maintenance from the back of the
individual GNU maintainer (and put it on the back of the Automake
maintainer).

   </p><p>The typical Automake input file is simply a series of variable definitions.
Each such file is processed to create a <span class="file">Makefile.in</span>.  There
should generally be one <span class="file">Makefile.am</span> per directory of a project.

   </p><p><a name="index-Constraints-of-Automake-2"></a><a name="index-Automake-constraints-3"></a>
Automake does constrain a project in certain ways; for instance it
assumes that the project uses Autoconf (see <a href="http://sources.redhat.com/automake/autoconf.html#Top">Introduction (The Autoconf Manual)</a>), and enforces certain restrictions on
the <span class="file">configure.ac</span> contents<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>.

   </p><p><a name="index-Automake-requirements-4"></a><a name="index-Requirements_002c-Automake-5"></a>
Automake requires <code>perl</code> in order to generate the
<span class="file">Makefile.in</span>s.  However, the distributions created by Automake are
fully GNU standards-compliant, and do not require <code>perl</code> in order
to be built.

   </p><p><a name="index-Bugs_002c-reporting-6"></a><a name="index-Reporting-bugs-7"></a><a name="index-E_002dmail_002c-bug-reports-8"></a>
Mail suggestions and bug reports for Automake to
<a href="mailto:bug-automake@gnu.org">bug-automake@gnu.org</a>.

</p><div class="node">
<p></p><hr>
<a name="Generalities"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Examples">Examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">2 General ideas</h2>

<p>The following sections cover a few basic ideas that will help you
understand how Automake works.

</p><ul class="menu">
<li><a accesskey="1" href="#General-Operation">General Operation</a>:            General operation of Automake
</li><li><a accesskey="2" href="#Strictness">Strictness</a>:                   Standards conformance checking
</li><li><a accesskey="3" href="#Uniform">Uniform</a>:                      The Uniform Naming Scheme
</li><li><a accesskey="4" href="#Canonicalization">Canonicalization</a>:             How derived variables are named
</li><li><a accesskey="5" href="#User-Variables">User Variables</a>:               Variables reserved for the user
</li><li><a accesskey="6" href="#Auxiliary-Programs">Auxiliary Programs</a>:           Programs automake might require
</li></ul>

<div class="node">
<p></p><hr>
<a name="General-Operation"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Strictness">Strictness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.1 General Operation</h3>

<p>Automake works by reading a <span class="file">Makefile.am</span> and generating a
<span class="file">Makefile.in</span>.  Certain variables and rules defined in the
<span class="file">Makefile.am</span> instruct Automake to generate more specialized code;
for instance, a <span class="samp">bin_PROGRAMS</span> variable definition will cause rules
for compiling and linking programs to be generated.

   </p><p><a name="index-Non_002dstandard-targets-9"></a><a name="index-_0040code_007bcvs_002ddist_007d_002c-non_002dstandard-example-10"></a><a name="index-cvs_002ddist-11"></a>
The variable definitions and rules in the <span class="file">Makefile.am</span> are
copied verbatim into the generated file.  This allows you to add
arbitrary code into the generated <span class="file">Makefile.in</span>.  For instance
the Automake distribution includes a non-standard rule for the
<code>cvs-dist</code> target, which the Automake maintainer uses to make
distributions from his source control system.

   </p><p><a name="index-GNU-make-extensions-12"></a>
Note that most GNU make extensions are not recognized by Automake.  Using
such extensions in a <span class="file">Makefile.am</span> will lead to errors or confusing
behavior.

   </p><p><a name="index-Append-operator-13"></a><a name="index-_002b_003d-14"></a>A special exception is that the GNU make append operator, <span class="samp">+=</span>, is
supported.  This operator appends its right hand argument to the variable
specified on the left.  Automake will translate the operator into
an ordinary <span class="samp">=</span> operator; <span class="samp">+=</span> will thus work with any make program.

   </p><p>Automake tries to keep comments grouped with any adjoining rules or
variable definitions.

   </p><p><a name="index-Make-targets_002c-overriding-15"></a><a name="index-Make-rules_002c-overriding-16"></a><a name="index-Overriding-make-rules-17"></a><a name="index-Overriding-make-targets-18"></a>
A rule defined in <span class="file">Makefile.am</span> generally overrides any such
rule of a similar name that would be automatically generated by
<code>automake</code>.  Although this is a supported feature, it is generally
best to avoid making use of it, as sometimes the generated rules are
very particular.

   </p><p><a name="index-Variables_002c-overriding-19"></a><a name="index-Overriding-make-variables-20"></a>
Similarly, a variable defined in <span class="file">Makefile.am</span> or
<code>AC_SUBST</code>'ed from <span class="file">configure.ac</span> will override any
definition of the variable that <code>automake</code> would ordinarily
create.  This feature is more often useful than the ability to
override a rule.  Be warned that many of the variables generated by
<code>automake</code> are considered to be for internal use only, and their
names might change in future releases.

   </p><p><a name="index-Recursive-operation-of-Automake-21"></a><a name="index-Automake_002c-recursive-operation-22"></a><a name="index-Example-of-recursive-operation-23"></a>
When examining a variable definition, Automake will recursively examine
variables referenced in the definition.  For example, if Automake is
looking at the content of <code>foo_SOURCES</code> in this snippet

</p><pre class="example">     xs = a.c b.c
     foo_SOURCES = c.c $(xs)
</pre>
   <p>it would use the files <span class="file">a.c</span>, <span class="file">b.c</span>, and <span class="file">c.c</span> as the
contents of <code>foo_SOURCES</code>.

   </p><p><a name="index-_0040code_007b_0023_0023_007d-_0028special-Automake-comment_0029-24"></a><a name="index-Special-Automake-comment-25"></a><a name="index-Comment_002c-special-to-Automake-26"></a>
Automake also allows a form of comment which is <em>not</em> copied into
the output; all lines beginning with <span class="samp">##</span> (leading spaces allowed)
are completely ignored by Automake.

   </p><p>It is customary to make the first line of <span class="file">Makefile.am</span> read:

   </p><p><a name="index-Makefile_002eam_002c-first-line-27"></a><a name="index-First-line-of-Makefile_002eam-28"></a>
</p><pre class="example">     ## Process this file with automake to produce Makefile.in
</pre>
   <!-- FIXME discuss putting a copyright into Makefile.am here?  I would but -->
<!-- I don't know quite what to say. -->
<!-- FIXME document customary ordering of Makefile.am here! -->
<div class="node">
<p></p><hr>
<a name="Strictness"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Uniform">Uniform</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-Operation">General Operation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.2 Strictness</h3>

<p><a name="index-Non_002dGNU-packages-29"></a>
While Automake is intended to be used by maintainers of GNU packages, it
does make some effort to accommodate those who wish to use it, but do
not want to use all the GNU conventions.

   </p><p><a name="index-Strictness_002c-defined-30"></a><a name="index-Strictness_002c-_0040code_007bforeign_007d-31"></a><a name="index-_0040code_007bforeign_007d-strictness-32"></a><a name="index-Strictness_002c-_0040code_007bgnu_007d-33"></a><a name="index-_0040code_007bgnu_007d-strictness-34"></a><a name="index-Strictness_002c-_0040code_007bgnits_007d-35"></a><a name="index-_0040code_007bgnits_007d-strictness-36"></a>
To this end, Automake supports three levels of <dfn>strictness</dfn>&#8212;the
strictness indicating how stringently Automake should check standards
conformance.

   </p><p>The valid strictness levels are:

     </p><dl>
<dt><span class="samp">foreign</span></dt><dd>Automake will check for only those things which are absolutely
required for proper operations.  For instance, whereas GNU standards
dictate the existence of a <span class="file">NEWS</span> file, it will not be required in
this mode.  The name comes from the fact that Automake is intended to be
used for GNU programs; these relaxed rules are not the standard mode of
operation.

     <br></dd><dt><span class="samp">gnu</span></dt><dd>Automake will check&#8212;as much as possible&#8212;for compliance to the GNU
standards for packages.  This is the default.

     <br></dd><dt><span class="samp">gnits</span></dt><dd>Automake will check for compliance to the as-yet-unwritten <dfn>Gnits
standards</dfn>.  These are based on the GNU standards, but are even more
detailed.  Unless you are a Gnits standards contributor, it is
recommended that you avoid this option until such time as the Gnits
standard is actually published (which may never happen).
</dd></dl>

   <p>For more information on the precise implications of the strictness
level, see <a href="#Gnits">Gnits</a>.

   </p><p>Automake also has a special &#8220;cygnus&#8221; mode which is similar to
strictness but handled differently.  This mode is useful for packages
which are put into a &#8220;Cygnus&#8221; style tree (e.g., the GCC tree).  For
more information on this mode, see <a href="#Cygnus">Cygnus</a>.

</p><div class="node">
<p></p><hr>
<a name="Uniform"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Canonicalization">Canonicalization</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Strictness">Strictness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.3 The Uniform Naming Scheme</h3>

<p><a name="index-Uniform-naming-scheme-37"></a>
Automake variables generally follow a <dfn>uniform naming scheme</dfn> that
makes it easy to decide how programs (and other derived objects) are
built, and how they are installed.  This scheme also supports
<code>configure</code> time determination of what should be built.

   </p><p><a name="index-_0040code_007b_005fPROGRAMS_007d-primary-variable-38"></a><a name="index-_0040code_007bPROGRAMS_007d-primary-variable-39"></a><a name="index-Primary-variable_002c-_0040code_007bPROGRAMS_007d-40"></a><a name="index-Primary-variable_002c-defined-41"></a><a name="index-_005fPROGRAMS-42"></a>
At <code>make</code> time, certain variables are used to determine which
objects are to be built.  The variable names are made of several pieces
which are concatenated together.

   </p><p>The piece which tells automake what is being built is commonly called
the <dfn>primary</dfn>.  For instance, the primary <code>PROGRAMS</code> holds a
list of programs which are to be compiled and linked.
<a name="index-PROGRAMS-43"></a>
<a name="index-_0040code_007bpkglibdir_007d_002c-defined-44"></a><a name="index-_0040code_007bpkgincludedir_007d_002c-defined-45"></a><a name="index-_0040code_007bpkgdatadir_007d_002c-defined-46"></a>
<a name="index-pkglibdir-47"></a><a name="index-pkgincludedir-48"></a><a name="index-pkgdatadir-49"></a>
<a name="index-_0040code_007bPACKAGE_007d_002c-directory-50"></a>A different set of names is used to decide where the built objects
should be installed.  These names are prefixes to the primary which
indicate which standard directory should be used as the installation
directory.  The standard directory names are given in the GNU standards
(see <a href="http://sources.redhat.com/automake/standards.html#Directory-Variables">Directory Variables (The GNU Coding Standards)</a>).
Automake extends this list with <code>pkglibdir</code>, <code>pkgincludedir</code>,
and <code>pkgdatadir</code>; these are the same as the non-<span class="samp">pkg</span>
versions, but with <span class="samp">$(PACKAGE)</span> appended.  For instance,
<code>pkglibdir</code> is defined as <code>$(libdir)/$(PACKAGE)</code>.

   </p><p><a name="index-_0040code_007bEXTRA_005f_007d_002c-prepending-51"></a>For each primary, there is one additional variable named by prepending
<span class="samp">EXTRA_</span> to the primary name.  This variable is used to list
objects which may or may not be built, depending on what
<code>configure</code> decides.  This variable is required because Automake
must statically know the entire list of objects that may be built in
order to generate a <span class="file">Makefile.in</span> that will work in all cases.

   </p><p><a name="index-_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-52"></a><a name="index-Example_002c-_0040code_007bEXTRA_005fPROGRAMS_007d-53"></a><a name="index-_0040command_007bcpio_007d-example-54"></a>
For instance, <code>cpio</code> decides at configure time which programs are
built.  Some of the programs are installed in <code>bindir</code>, and some
are installed in <code>sbindir</code>:

</p><pre class="example">     EXTRA_PROGRAMS = mt rmt
     bin_PROGRAMS = cpio pax
     sbin_PROGRAMS = $(MORE_PROGRAMS)
</pre>
   <p>Defining a primary without a prefix as a variable, e.g.,
<code>PROGRAMS</code>, is an error.

   </p><p>Note that the common <span class="samp">dir</span> suffix is left off when constructing the
variable names; thus one writes <span class="samp">bin_PROGRAMS</span> and not
<span class="samp">bindir_PROGRAMS</span>.

   </p><p>Not every sort of object can be installed in every directory.  Automake
will flag those attempts it finds in error.
Automake will also diagnose obvious misspellings in directory names.

   </p><p><a name="index-Extending-list-of-installation-directories-55"></a><a name="index-Installation-directories_002c-extending-list-56"></a>
Sometimes the standard directories&#8212;even as augmented by Automake&#8212;
are not enough.  In particular it is sometimes useful, for clarity, to
install objects in a subdirectory of some predefined directory.  To this
end, Automake allows you to extend the list of possible installation
directories.  A given prefix (e.g. <span class="samp">zar</span>) is valid if a variable of
the same name with <span class="samp">dir</span> appended is defined (e.g. <code>zardir</code>).

   </p><p><a name="index-HTML-installation_002c-example-57"></a>
For instance, installation of HTML files is part of Automake, you could
use this to install raw HTML documentation:

</p><pre class="example">     htmldir = $(prefix)/html
     html_DATA = automake.html
</pre>
   <p><a name="index-_0040code_007bnoinst_005f_007d-primary-prefix_002c-definition-58"></a><a name="index-noinst_005f-59"></a>
The special prefix <span class="samp">noinst</span> indicates that the objects in question
should be built but not installed at all.  This is usually used for
objects required to build the rest of your package, for instance static
libraries (see <a href="#A-Library">A Library</a>), or helper scripts.

   </p><p><a name="index-_0040code_007bcheck_005f_007d-primary-prefix_002c-definition-60"></a><a name="index-check_005f-61"></a>
The special prefix <span class="samp">check</span> indicates that the objects in question
should not be built until the <code>make check</code> command is run.  Those
objects are not installed either.

   </p><p>The current primary names are <span class="samp">PROGRAMS</span>, <span class="samp">LIBRARIES</span>,
<span class="samp">LISP</span>, <span class="samp">PYTHON</span>, <span class="samp">JAVA</span>, <span class="samp">SCRIPTS</span>, <span class="samp">DATA</span>,
<span class="samp">HEADERS</span>, <span class="samp">MANS</span>, and <span class="samp">TEXINFOS</span>.
<a name="index-PROGRAMS-62"></a><a name="index-LIBRARIES-63"></a><a name="index-LISP-64"></a><a name="index-PYTHON-65"></a><a name="index-JAVA-66"></a><a name="index-SCRIPTS-67"></a><a name="index-DATA-68"></a><a name="index-HEADERS-69"></a><a name="index-MANS-70"></a><a name="index-TEXINFOS-71"></a>
Some primaries also allow additional prefixes which control other
aspects of <code>automake</code>'s behavior.  The currently defined prefixes
are <span class="samp">dist_</span>, <span class="samp">nodist_</span>, and <span class="samp">nobase_</span>.  These prefixes
are explained later (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

</p><div class="node">
<p></p><hr>
<a name="Canonicalization"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#User-Variables">User Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Uniform">Uniform</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.4 How derived variables are named</h3>

<p><a name="index-canonicalizing-Automake-variables-72"></a>
Sometimes a Makefile variable name is derived from some text the
maintainer supplies.  For instance, a program name listed in
<span class="samp">_PROGRAMS</span> is rewritten into the name of a <span class="samp">_SOURCES</span>
variable.  In cases like this, Automake canonicalizes the text, so that
program names and the like do not have to follow Makefile variable naming
rules.  All characters in the name except for letters, numbers, the
strudel (@), and the underscore are turned into underscores when making
variable references.

   </p><p>For example, if your program is named <code>sniff-glue</code>, the derived
variable name would be <code>sniff_glue_SOURCES</code>, not
<code>sniff-glue_SOURCES</code>.  Similarly the sources for a library named
<code>libmumble++.a</code> should be listed in the
<code>libmumble___a_SOURCES</code> variable.

   </p><p>The strudel is an addition, to make the use of Autoconf substitutions in
variable names less obfuscating.

</p><div class="node">
<p></p><hr>
<a name="User-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Auxiliary-Programs">Auxiliary Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Canonicalization">Canonicalization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.5 Variables reserved for the user</h3>

<p><a name="index-variables_002c-reserved-for-the-user-73"></a><a name="index-user-variables-74"></a>
Some <code>Makefile</code> variables are reserved by the GNU Coding Standards
for the use of the &#8220;user&#8221; &#8211; the person building the package.  For
instance, <code>CFLAGS</code> is one such variable.

   </p><p>Sometimes package developers are tempted to set user variables such as
<code>CFLAGS</code> because it appears to make their job easier.  However,
the package itself should never set a user variable, particularly not
to include switches which are required for proper compilation of the
package.  Since these variables are documented as being for the
package builder, that person rightfully expects to be able to override
any of these variables at build time.

   </p><p>To get around this problem, automake introduces an automake-specific
shadow variable for each user flag variable.  (Shadow variables are not
introduced for variables like <code>CC</code>, where they would make no
sense.)  The shadow variable is named by prepending <span class="samp">AM_</span> to the
user variable's name.  For instance, the shadow variable for
<code>YFLAGS</code> is <code>AM_YFLAGS</code>.

   </p><p>See <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>, for more discussion about these
variables and how they interact with per-target variables.

</p><div class="node">
<p></p><hr>
<a name="Auxiliary-Programs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#User-Variables">User Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>
<br>
</div>

<h3 class="section">2.6 Programs automake might require</h3>

<p><a name="index-Programs_002c-auxiliary-75"></a><a name="index-Auxiliary-programs-76"></a>
Automake sometimes requires helper programs so that the generated
<span class="file">Makefile</span> can do its work properly.  There are a fairly large
number of them, and we list them here.

     </p><dl>
<dt><code>ansi2knr.c</code></dt><dt><code>ansi2knr.1</code></dt><dd>These two files are used by the automatic de-ANSI-fication support
(see <a href="#ANSI">ANSI</a>).

     <br></dd><dt><code>compile</code></dt><dd>This is a wrapper for compilers which don't accept both <span class="samp">-c</span> and
<span class="samp">-o</span> at the same time.  It is only used when absolutely required.
Such compilers are rare.

     <br></dd><dt><code>config.guess</code></dt><dt><code>config.sub</code></dt><dd>These programs compute the canonical triplets for the given build, host,
or target architecture.  These programs are updated regularly to support
new architectures and fix probes broken by changes in new kernel
versions.  You are encouraged to fetch the latest versions of these
files from <a href="ftp://ftp.gnu.org/gnu/config/">ftp://ftp.gnu.org/gnu/config/</a> before making a release.

     <br></dd><dt><code>depcomp</code></dt><dd>This program understands how to run a compiler so that it will generate
not only the desired output but also dependency information which is
then used by the automatic dependency tracking feature.

     <br></dd><dt><code>elisp-comp</code></dt><dd>This program is used to byte-compile Emacs Lisp code.

     <br></dd><dt><code>install-sh</code></dt><dd>This is a replacement for the <code>install</code> program which works on
platforms where <code>install</code> is unavailable or unusable.

     <br></dd><dt><code>mdate-sh</code></dt><dd>This script is used to generate a <span class="file">version.texi</span> file.  It examines
a file and prints some date information about it.

     <br></dd><dt><code>missing</code></dt><dd>This wraps a number of programs which are typically only required by
maintainers.  If the program in question doesn't exist, <code>missing</code>
prints an informative warning and attempts to fix things so that the
build can continue.

     <br></dd><dt><code>mkinstalldirs</code></dt><dd>This script used to be a wrapper around <code>mkdir -p</code>, which is not
portable.  Now we use prefer to use <code>install-sh -d</code> when configure
finds that <code>mkdir -p</code> does not work, this makes one less script to
distribute.

     <p>For backward compatibility <code>mkinstalldirs</code> is still used and
distributed when <code>automake</code> finds it in a package.  But it is no
longer installed automatically, and it should be safe to remove it.

     <br></p></dd><dt><code>py-compile</code></dt><dd>This is used to byte-compile Python scripts.

     <br></dd><dt><code>texinfo.tex</code></dt><dd>Not a program, this file is required for <code>make dvi</code>, <code>make ps</code>
and <code>make pdf</code> to work when Texinfo sources are in the package.

     <br></dd><dt><code>ylwrap</code></dt><dd>This program wraps <code>lex</code> and <code>yacc</code> and ensures that, for
instance, multiple <code>yacc</code> instances can be invoked in a single
directory in parallel.

   </dd></dl>

<div class="node">
<p></p><hr>
<a name="Examples"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-Automake">Invoking Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Generalities">Generalities</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">3 Some example packages</h2>

<ul class="menu">
<li><a accesskey="1" href="#Complete">Complete</a>:                     A simple example, start to finish
</li><li><a accesskey="2" href="#Hello">Hello</a>:                        A classic program
</li><li><a accesskey="3" href="#true">true</a>:                         Building true and false
</li></ul>

<div class="node">
<p></p><hr>
<a name="Complete"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Hello">Hello</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Examples">Examples</a>
<br>
</div>

<h3 class="section">3.1 A simple example, start to finish</h3>

<p><a name="index-Complete-example-77"></a>
Let's suppose you just finished writing <code>zardoz</code>, a program to make
your head float from vortex to vortex.  You've been using Autoconf to
provide a portability framework, but your <span class="file">Makefile.in</span>s have been
ad-hoc.  You want to make them bulletproof, so you turn to Automake.

   </p><p><a name="index-_0040code_007bAM_005fINIT_005fAUTOMAKE_007d_002c-example-use-78"></a>
The first step is to update your <span class="file">configure.ac</span> to include the
commands that <code>automake</code> needs.  The way to do this is to add an
<code>AM_INIT_AUTOMAKE</code> call just after <code>AC_INIT</code>:

</p><pre class="example">     AC_INIT(zardoz, 1.0)
     AM_INIT_AUTOMAKE
     ...
</pre>
   <p>Since your program doesn't have any complicating factors (e.g., it
doesn't use <code>gettext</code>, it doesn't want to build a shared library),
you're done with this part.  That was easy!

   </p><p><a name="index-_0040command_007baclocal_007d-program_002c-introduction-79"></a><a name="index-_0040file_007baclocal_002em4_007d_002c-preexisting-80"></a><a name="index-_0040file_007bacinclude_002em4_007d_002c-defined-81"></a>
Now you must regenerate <span class="file">configure</span>.  But to do that, you'll need
to tell <code>autoconf</code> how to find the new macro you've used.  The
easiest way to do this is to use the <code>aclocal</code> program to generate
your <span class="file">aclocal.m4</span> for you.  But wait<small class="dots">...</small> maybe you already have an
<span class="file">aclocal.m4</span>, because you had to write some hairy macros for your
program.  The <code>aclocal</code> program lets you put your own macros into
<span class="file">acinclude.m4</span>, so simply rename and then run:

</p><pre class="example">     mv aclocal.m4 acinclude.m4
     aclocal
     autoconf
</pre>
   <p><a name="index-_0040command_007bzardoz_007d-example-82"></a>
Now it is time to write your <span class="file">Makefile.am</span> for <code>zardoz</code>.
Since <code>zardoz</code> is a user program, you want to install it where the
rest of the user programs go: <code>bindir</code>.  Additionally,
<code>zardoz</code> has some Texinfo documentation.  Your <span class="file">configure.ac</span>
script uses <code>AC_REPLACE_FUNCS</code>, so you need to link against
<span class="samp">$(LIBOBJS)</span>.  So here's what you'd write:

</p><pre class="example">     bin_PROGRAMS = zardoz
     zardoz_SOURCES = main.c head.c float.c vortex9.c gun.c
     zardoz_LDADD = $(LIBOBJS)

     info_TEXINFOS = zardoz.texi
</pre>
   <p>Now you can run <code>automake --add-missing</code> to generate your
<span class="file">Makefile.in</span> and grab any auxiliary files you might need, and
you're done!

</p><div class="node">
<p></p><hr>
<a name="Hello"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#true">true</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Complete">Complete</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Examples">Examples</a>
<br>
</div>

<h3 class="section">3.2 A classic program</h3>

<p><a name="index-Example_002c-GNU-Hello-83"></a><a name="index-Hello-example-84"></a><a name="index-GNU-Hello_002c-example-85"></a>
<a href="ftp://prep.ai.mit.edu/pub/gnu/hello-1.3.tar.gz">GNU hello</a> is
renowned for its classic simplicity and versatility.  This section shows
how Automake could be used with the GNU Hello package.  The examples
below are from the latest beta version of GNU Hello, but with all of the
maintainer-only code stripped out, as well as all copyright comments.

   </p><p>Of course, GNU Hello is somewhat more featureful than your traditional
two-liner.  GNU Hello is internationalized, does option processing, and
has a manual and a test suite.

   </p><p><a name="index-_0040file_007bconfigure_002eac_007d_002c-from-GNU-Hello-86"></a><a name="index-GNU-Hello_002c-_0040file_007bconfigure_002eac_007d-87"></a><a name="index-Hello_002c-_0040file_007bconfigure_002eac_007d-88"></a>
Here is the <span class="file">configure.ac</span> from GNU Hello.
<strong>Please note:</strong> The calls to <code>AC_INIT</code> and <code>AM_INIT_AUTOMAKE</code>
in this example use a deprecated syntax.  For the current approach,
see the description of <code>AM_INIT_AUTOMAKE</code> in <a href="#Public-macros">Public macros</a>.

<!-- FIXME: This definitely requires an update, e.g. to GNU Hello 2.1.1. -->
</p><pre class="example">     dnl Process this file with autoconf to produce a configure script.
     AC_INIT(src/hello.c)
     AM_INIT_AUTOMAKE(hello, 1.3.11)
     AM_CONFIG_HEADER(config.h)

     dnl Set of available languages.
     ALL_LINGUAS="de fr es ko nl no pl pt sl sv"

     dnl Checks for programs.
     AC_PROG_CC
     AC_ISC_POSIX

     dnl Checks for libraries.

     dnl Checks for header files.
     AC_STDC_HEADERS
     AC_HAVE_HEADERS(string.h fcntl.h sys/file.h sys/param.h)

     dnl Checks for library functions.
     AC_FUNC_ALLOCA

     dnl Check for st_blksize in struct stat
     AC_ST_BLKSIZE

     dnl internationalization macros
     AM_GNU_GETTEXT
     AC_OUTPUT([Makefile doc/Makefile intl/Makefile po/Makefile.in \
                src/Makefile tests/Makefile tests/hello],
        [chmod +x tests/hello])
</pre>
   <p>The <span class="samp">AM_</span> macros are provided by Automake (or the Gettext library);
the rest are standard Autoconf macros.

   </p><p>The top-level <span class="file">Makefile.am</span>:

</p><pre class="example">     EXTRA_DIST = BUGS ChangeLog.O
     SUBDIRS = doc intl po src tests
</pre>
   <p>As you can see, all the work here is really done in subdirectories.

   </p><p>The <span class="file">po</span> and <span class="file">intl</span> directories are automatically generated
using <code>gettextize</code>; they will not be discussed here.

   </p><p><a name="index-Texinfo-file-handling-example-89"></a><a name="index-Example_002c-handling-Texinfo-files-90"></a>
In <span class="file">doc/Makefile.am</span> we see:

</p><pre class="example">     info_TEXINFOS = hello.texi
     hello_TEXINFOS = gpl.texi
</pre>
   <p>This is sufficient to build, install, and distribute the GNU Hello
manual.

   </p><p><a name="index-Regression-test-example-91"></a><a name="index-Example_002c-regression-test-92"></a>
Here is <span class="file">tests/Makefile.am</span>:

</p><pre class="example">     TESTS = hello
     EXTRA_DIST = hello.in testdata
</pre>
   <p>The script <span class="file">hello</span> is generated by <code>configure</code>, and is the
only test case.  <code>make check</code> will run this test.

   </p><p><a name="index-_0040code_007bINCLUDES_007d_002c-example-usage-93"></a><a name="index-INCLUDES-94"></a>
Last we have <span class="file">src/Makefile.am</span>, where all the real work is done:
<!-- FIXME: As all the Hello World excerpts in this manual, this -->
<!-- shows deprecated features (here: $(INCLUDES)). -->

</p><pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h
     hello_LDADD = $(INTLLIBS) $(ALLOCA)
     localedir = $(datadir)/locale
     INCLUDES = -I../intl -DLOCALEDIR=\"$(localedir)\"
</pre>
   <div class="node">
<p></p><hr>
<a name="true"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hello">Hello</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Examples">Examples</a>
<br>
</div>

<h3 class="section">3.3 Building true and false</h3>

<p><a name="index-Example_002c-_0040command_007bfalse_007d-and-_0040command_007btrue_007d-95"></a><a name="index-_0040command_007bfalse_007d-Example-96"></a><a name="index-_0040command_007btrue_007d-Example-97"></a>
Here is another, trickier example.  It shows how to generate two
programs (<code>true</code> and <code>false</code>) from the same source file
(<span class="file">true.c</span>).  The difficult part is that each compilation of
<span class="file">true.c</span> requires different <code>cpp</code> flags.

</p><pre class="example">     bin_PROGRAMS = true false
     false_SOURCES =
     false_LDADD = false.o

     true.o: true.c
             $(COMPILE) -DEXIT_CODE=0 -c true.c

     false.o: true.c
             $(COMPILE) -DEXIT_CODE=1 -o false.o -c true.c
</pre>
   <p>Note that there is no <code>true_SOURCES</code> definition.  Automake will
implicitly assume that there is a source file named <span class="file">true.c</span>, and
define rules to compile <span class="file">true.o</span> and link <span class="file">true</span>.  The
<code>true.o: true.c</code> rule supplied by the above <span class="file">Makefile.am</span>,
will override the Automake generated rule to build <span class="file">true.o</span>.

   </p><p><code>false_SOURCES</code> is defined to be empty&#8212;that way no implicit value
is substituted.  Because we have not listed the source of
<span class="file">false</span>, we have to tell Automake how to link the program.  This is
the purpose of the <code>false_LDADD</code> line.  A <code>false_DEPENDENCIES</code>
variable, holding the dependencies of the <span class="file">false</span> target will be
automatically generated by Automake from the content of
<code>false_LDADD</code>.

   </p><p>The above rules won't work if your compiler doesn't accept both
<span class="samp">-c</span> and <span class="samp">-o</span>.  The simplest fix for this is to introduce a
bogus dependency (to avoid problems with a parallel <code>make</code>):

</p><pre class="example">     true.o: true.c false.o
             $(COMPILE) -DEXIT_CODE=0 -c true.c

     false.o: true.c
             $(COMPILE) -DEXIT_CODE=1 -c true.c &amp;&amp; mv true.o false.o
</pre>
   <p>Also, these explicit rules do not work if the de-ANSI-fication feature
is used (see <a href="#ANSI">ANSI</a>).  Supporting de-ANSI-fication requires a little
more work:

</p><pre class="example">     true_.o: true_.c false_.o
             $(COMPILE) -DEXIT_CODE=0 -c true_.c

     false_.o: true_.c
             $(COMPILE) -DEXIT_CODE=1 -c true_.c &amp;&amp; mv true_.o false_.o
</pre>
   <p>As it turns out, there is also a much easier way to do this same task.
Some of the above techniques are useful enough that we've kept the
example in the manual.  However if you were to build <code>true</code> and
<code>false</code> in real life, you would probably use per-program
compilation flags, like so:

</p><pre class="example">     bin_PROGRAMS = false true

     false_SOURCES = true.c
     false_CPPFLAGS = -DEXIT_CODE=1

     true_SOURCES = true.c
     true_CPPFLAGS = -DEXIT_CODE=0
</pre>
   <p>In this case Automake will cause <span class="file">true.c</span> to be compiled twice,
with different flags.  De-ANSI-fication will work automatically.  In
this instance, the names of the object files would be chosen by
automake; they would be <span class="file">false-true.o</span> and <span class="file">true-true.o</span>.
(The name of the object files rarely matters.)

</p><div class="node">
<p></p><hr>
<a name="Invoking-Automake"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#configure">configure</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Examples">Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">4 Creating a <span class="file">Makefile.in</span></h2>

<p><a name="index-Multiple-_0040file_007bconfigure_002eac_007d-files-98"></a><a name="index-Invoking-_0040command_007bautomake_007d-99"></a><a name="index-_0040command_007bautomake_007d_002c-invoking-100"></a>
To create all the <span class="file">Makefile.in</span>s for a package, run the
<code>automake</code> program in the top level directory, with no arguments.
<code>automake</code> will automatically find each appropriate
<span class="file">Makefile.am</span> (by scanning <span class="file">configure.ac</span>; see <a href="#configure">configure</a>)
and generate the corresponding <span class="file">Makefile.in</span>.  Note that
<code>automake</code> has a rather simplistic view of what constitutes a
package; it assumes that a package has only one <span class="file">configure.ac</span>, at
the top.  If your package has multiple <span class="file">configure.ac</span>s, then you
must run <code>automake</code> in each directory holding a
<span class="file">configure.ac</span>.  (Alternatively, you may rely on Autoconf's
<code>autoreconf</code>, which is able to recurse your package tree and run
<code>automake</code> where appropriate.)

   </p><p>You can optionally give <code>automake</code> an argument; <span class="file">.am</span> is
appended to the argument and the result is used as the name of the input
file.  This feature is generally only used to automatically rebuild an
out-of-date <span class="file">Makefile.in</span>.  Note that <code>automake</code> must always
be run from the topmost directory of a project, even if being used to
regenerate the <span class="file">Makefile.in</span> in some subdirectory.  This is
necessary because <code>automake</code> must scan <span class="file">configure.ac</span>, and
because <code>automake</code> uses the knowledge that a <span class="file">Makefile.in</span> is
in a subdirectory to change its behavior in some cases.

   </p><p><a name="index-AUTOCONF-101"></a>Automake will run <code>autoconf</code> to scan <span class="file">configure.ac</span> and its
dependencies (<span class="file">aclocal.m4</span>), therefore <code>autoconf</code> must be in
your <code>PATH</code>.  If there is an <code>AUTOCONF</code> variable in your
environment it will be used instead of <code>autoconf</code>, this allows you
to select a particular version of Autoconf.  By the way, don't
misunderstand this paragraph: Automake runs <code>autoconf</code> to
<strong>scan</strong> your <span class="file">configure.ac</span>, this won't build
<span class="file">configure</span> and you still have to run <code>autoconf</code> yourself for
this purpose.

   </p><p><a name="index-_0040command_007bautomake_007d-options-102"></a><a name="index-Options_002c-_0040command_007bautomake_007d-103"></a><a name="index-Strictness_002c-command-line-104"></a>
<span class="command">automake</span> accepts the following options:

   </p><p><a name="index-Extra-files-distributed-with-Automake-105"></a><a name="index-Files-distributed-with-Automake-106"></a><a name="index-_0040file_007bconfig_002eguess_007d-107"></a>
     </p><dl>
<dt><span class="samp">-a</span></dt><dt><span class="samp">--add-missing</span></dt><dd><a name="index-_002da-108"></a><a name="index-_002d_002dadd_002dmissing-109"></a>Automake requires certain common files to exist in certain situations;
for instance <span class="file">config.guess</span> is required if <span class="file">configure.ac</span> runs
<code>AC_CANONICAL_HOST</code>.  Automake is distributed with several of these
files (see <a href="#Auxiliary-Programs">Auxiliary Programs</a>); this option will cause the missing
ones to be automatically added to the package, whenever possible.  In
general if Automake tells you a file is missing, try using this option.
By default Automake tries to make a symbolic link pointing to its own
copy of the missing file; this can be changed with <code>--copy</code>.

     <p>Many of the potentially-missing files are common scripts whose
location may be specified via the <code>AC_CONFIG_AUX_DIR</code> macro.
Therefore, <code>AC_CONFIG_AUX_DIR</code>'s setting affects whether a
file is considered missing, and where the missing file is added
(see <a href="#Optional">Optional</a>).

     <br></p></dd><dt><span class="samp">--libdir=</span><var>dir</var></dt><dd><a name="index-_002d_002dlibdir-110"></a>Look for Automake data files in directory <var>dir</var> instead of in the
installation directory.  This is typically used for debugging.

     <br></dd><dt><span class="samp">-c</span></dt><dd><a name="index-_002dc-111"></a></dd><dt><span class="samp">--copy</span></dt><dd><a name="index-_002d_002dcopy-112"></a>When used with <code>--add-missing</code>, causes installed files to be
copied.  The default is to make a symbolic link.

     <br></dd><dt><span class="samp">--cygnus</span></dt><dd><a name="index-_002d_002dcygnus-113"></a>Causes the generated <span class="file">Makefile.in</span>s to follow Cygnus rules, instead
of GNU or Gnits rules.  For more information, see <a href="#Cygnus">Cygnus</a>.

     <br></dd><dt><span class="samp">-f</span></dt><dd><a name="index-_002df-114"></a></dd><dt><span class="samp">--force-missing</span></dt><dd><a name="index-_002d_002dforce_002dmissing-115"></a>When used with <code>--add-missing</code>, causes standard files to be reinstalled
even if they already exist in the source tree.  This involves removing
the file from the source tree before creating the new symlink (or, with
<code>--copy</code>, copying the new file).

     <br></dd><dt><span class="samp">--foreign</span></dt><dd><a name="index-_002d_002dforeign-116"></a>Set the global strictness to <span class="samp">foreign</span>.  For more information, see
<a href="#Strictness">Strictness</a>.

     <br></dd><dt><span class="samp">--gnits</span></dt><dd><a name="index-_002d_002dgnits-117"></a>Set the global strictness to <span class="samp">gnits</span>.  For more information, see
<a href="#Gnits">Gnits</a>.

     <br></dd><dt><span class="samp">--gnu</span></dt><dd><a name="index-_002d_002dgnu-118"></a>Set the global strictness to <span class="samp">gnu</span>.  For more information, see
<a href="#Gnits">Gnits</a>.  This is the default strictness.

     <br></dd><dt><span class="samp">--help</span></dt><dd><a name="index-_002d_002dhelp-119"></a>Print a summary of the command line options and exit.

     <br></dd><dt><span class="samp">-i</span></dt><dt><span class="samp">--ignore-deps</span></dt><dd><a name="index-_002di-120"></a>This disables the dependency tracking feature in generated
<span class="file">Makefile</span>s; see <a href="#Dependencies">Dependencies</a>.

     <br></dd><dt><span class="samp">--include-deps</span></dt><dd><a name="index-_002d_002dinclude_002ddeps-121"></a>This enables the dependency tracking feature.  This feature is enabled
by default.  This option is provided for historical reasons only and
probably should not be used.

     <br></dd><dt><span class="samp">--no-force</span></dt><dd><a name="index-_002d_002dno_002dforce-122"></a>Ordinarily <code>automake</code> creates all <span class="file">Makefile.in</span>s mentioned in
<span class="file">configure.ac</span>.  This option causes it to only update those
<span class="file">Makefile.in</span>s which are out of date with respect to one of their
dependents.

     <br></dd><dt><span class="samp">-o </span><var>dir</var></dt><dt><span class="samp">--output-dir=</span><var>dir</var></dt><dd><a name="index-_002do-123"></a><a name="index-_002d_002doutput_002ddir-124"></a>Put the generated <span class="file">Makefile.in</span> in the directory <var>dir</var>.
Ordinarily each <span class="file">Makefile.in</span> is created in the directory of the
corresponding <span class="file">Makefile.am</span>.  This option is deprecated and will be
removed in a future release.

     <br></dd><dt><span class="samp">-v</span></dt><dt><span class="samp">--verbose</span></dt><dd><a name="index-_002dv-125"></a><a name="index-_002d_002dverbose-126"></a>Cause Automake to print information about which files are being read or
created.

     <br></dd><dt><span class="samp">--version</span></dt><dd><a name="index-_002d_002dversion-127"></a>Print the version number of Automake and exit.

     <br></dd><dt><span class="samp">-W CATEGORY</span><br></dt><dt><span class="samp">--warnings=</span><var>category</var></dt><dd><a name="index-_002dW-128"></a><a name="index-_002d_002dwarnings-129"></a>Output warnings falling in <var>category</var>.  <var>category</var> can be
one of:
          <dl>
<dt><span class="samp">gnu</span></dt><dd>warnings related to the GNU Coding Standards
(see <a href="http://sources.redhat.com/automake/standards.html#Top">Top (The GNU Coding Standards)</a>).
<br></dd><dt><span class="samp">obsolete</span></dt><dd>obsolete features or constructions
<br></dd><dt><span class="samp">override</span></dt><dd>user redefinitions of Automake rules or variables
<br></dd><dt><span class="samp">portability</span></dt><dd>portability issues (e.g., use of Make features which are known not portable)
<br></dd><dt><span class="samp">syntax</span></dt><dd>weird syntax, unused variables, typos
<br></dd><dt><span class="samp">unsupported</span></dt><dd>unsupported or incomplete features
<br></dd><dt><span class="samp">all</span></dt><dd>all the warnings
<br></dd><dt><span class="samp">none</span></dt><dd>turn off all the warnings
<br></dd><dt><span class="samp">error</span></dt><dd>treat warnings as errors
</dd></dl>

     <p>A category can be turned off by prefixing its name with <span class="samp">no-</span>.  For
instance <span class="samp">-Wno-syntax</span> will hide the warnings about unused
variables.

     </p><p>The categories output by default are <span class="samp">syntax</span> and
<span class="samp">unsupported</span>.  Additionally, <span class="samp">gnu</span> is enabled in <span class="samp">--gnu</span> and
<span class="samp">--gnits</span> strictness.

     </p><p><span class="samp">portability</span> warnings are currently disabled by default, but they
will be enabled in <span class="samp">--gnu</span> and <span class="samp">--gnits</span> strictness in a
future release.

     </p><p><a name="index-WARNINGS-130"></a>The environment variable <span class="samp">WARNINGS</span> can contain a comma separated
list of categories to enable.  It will be taken into account before the
command-line switches, this way <span class="samp">-Wnone</span> will also ignore any
warning category enabled by <span class="samp">WARNINGS</span>.  This variable is also used
by other tools like <span class="command">autoconf</span>; unknown categories are ignored
for this reason.

   </p></dd></dl>

<div class="node">
<p></p><hr>
<a name="configure"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Directories">Directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-Automake">Invoking Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">5 Scanning <span class="file">configure.ac</span></h2>

<p><a name="index-_0040file_007bconfigure_002eac_007d_002c-scanning-131"></a><a name="index-Scanning-_0040file_007bconfigure_002eac_007d-132"></a>
Automake scans the package's <span class="file">configure.ac</span> to determine certain
information about the package.  Some <code>autoconf</code> macros are required
and some variables must be defined in <span class="file">configure.ac</span>.  Automake
will also use information from <span class="file">configure.ac</span> to further tailor its
output.

   </p><p>Automake also supplies some Autoconf macros to make the maintenance
easier.  These macros can automatically be put into your
<span class="file">aclocal.m4</span> using the <code>aclocal</code> program.

</p><ul class="menu">
<li><a accesskey="1" href="#Requirements">Requirements</a>:                 Configuration requirements
</li><li><a accesskey="2" href="#Optional">Optional</a>:                     Other things Automake recognizes
</li><li><a accesskey="3" href="#Invoking-aclocal">Invoking aclocal</a>:             Auto-generating aclocal.m4
</li><li><a accesskey="4" href="#aclocal-options">aclocal options</a>:              aclocal command line arguments
</li><li><a accesskey="5" href="#Macro-search-path">Macro search path</a>:            Modifying aclocal's search path
</li><li><a accesskey="6" href="#Macros">Macros</a>:                       Autoconf macros supplied with Automake
</li><li><a accesskey="7" href="#Extending-aclocal">Extending aclocal</a>:            Writing your own aclocal macros
</li><li><a accesskey="8" href="#Local-Macros">Local Macros</a>:                 Organizing local macros
</li><li><a accesskey="9" href="#Future-of-aclocal">Future of aclocal</a>:            aclocal's scheduled death
</li></ul>

<div class="node">
<p></p><hr>
<a name="Requirements"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Optional">Optional</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.1 Configuration requirements</h3>

<p><a name="index-Automake-requirements-133"></a><a name="index-Requirements-of-Automake-134"></a>
<a name="index-AM_005fINIT_005fAUTOMAKE-135"></a>The one real requirement of Automake is that your <span class="file">configure.ac</span>
call <code>AM_INIT_AUTOMAKE</code>.  This macro does several things which are
required for proper Automake operation (see <a href="#Macros">Macros</a>).

   </p><p>Here are the other macros which Automake requires but which are not run
by <code>AM_INIT_AUTOMAKE</code>:

     </p><dl>
<dt><code>AC_CONFIG_FILES</code></dt><dt><code>AC_OUTPUT</code></dt><dd><a name="index-AC_005fCONFIG_005fFILES-136"></a><a name="index-AC_005fOUTPUT-137"></a>Automake uses these to determine which files to create (see <a href="http://sources.redhat.com/automake/autoconf.html#Output">Creating Output Files (The Autoconf Manual)</a>).  A listed file
is considered to be an Automake generated <span class="file">Makefile</span> if there
exists a file with the same name and the <span class="file">.am</span> extension appended.
Typically, <code>AC_CONFIG_FILES([foo/Makefile])</code> will cause Automake to
generate <span class="file">foo/Makefile.in</span> if <span class="file">foo/Makefile.am</span> exists.

     <p>When using <code>AC_CONFIG_FILES</code> with multiple input files, as in
<code>AC_CONFIG_FILES([Makefile:top.in:Makefile.in:bot.in])</code>, Automake
will generate the first <span class="file">.in</span> input file for which a <span class="file">.am</span>
file exists.  If no such file exists the output file is not considered
to be Automake generated.

     </p><p>Files created by <code>AC_CONFIG_FILES</code> are removed by <code>make distclean</code>.
</p></dd></dl>

<div class="node">
<p></p><hr>
<a name="Optional"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-aclocal">Invoking aclocal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Requirements">Requirements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.2 Other things Automake recognizes</h3>

<p><a name="index-Macros-Automake-recognizes-138"></a><a name="index-Recognized-macros-by-Automake-139"></a>
Every time Automake is run it calls Autoconf to trace
<span class="file">configure.ac</span>.  This way it can recognize the use of certain
macros and tailor the generated <span class="file">Makefile.in</span> appropriately.
Currently recognized macros and their effects are:

     </p><dl>
<dt><code>AC_CONFIG_HEADERS</code><a name="index-AC_005fCONFIG_005fHEADERS-140"></a></dt><dd>Automake will generate rules to rebuild these headers.  Older versions
of Automake required the use of <code>AM_CONFIG_HEADER</code>
(see <a href="#Macros">Macros</a>); this is no longer the case today.

     <br></dd><dt><code>AC_CONFIG_LINKS</code><a name="index-AC_005fCONFIG_005fLINKS-141"></a></dt><dd>Automake will generate rules to remove <span class="file">configure</span> generated links on
<code>make distclean</code> and to distribute named source files as part of
<code>make dist</code>.

     <br></dd><dt><code>AC_CONFIG_AUX_DIR</code><a name="index-AC_005fCONFIG_005fAUX_005fDIR-142"></a></dt><dd>Automake will look for various helper scripts, such as
<span class="file">install-sh</span>, in the directory named in this macro invocation.
<!-- This list is accurate relative to version 1.8 -->
(The full list of scripts is: <span class="file">config.guess</span>, <span class="file">config.sub</span>,
<span class="file">depcomp</span>, <span class="file">elisp-comp</span>, <span class="file">compile</span>, <span class="file">install-sh</span>,
<span class="file">ltmain.sh</span>, <span class="file">mdate-sh</span>, <span class="file">missing</span>, <span class="file">mkinstalldirs</span>,
<span class="file">py-compile</span>, <span class="file">texinfo.tex</span>, and <span class="file">ylwrap</span>.)  Not all
scripts are always searched for; some scripts will only be sought if the
generated <span class="file">Makefile.in</span> requires them.

     <p>If <code>AC_CONFIG_AUX_DIR</code> is not given, the scripts are looked for in
their standard locations.  For <span class="file">mdate-sh</span>,
<span class="file">texinfo.tex</span>, and <span class="file">ylwrap</span>, the standard location is the
source directory corresponding to the current <span class="file">Makefile.am</span>.  For
the rest, the standard location is the first one of <span class="file">.</span>, <span class="file">..</span>,
or <span class="file">../..</span> (relative to the top source directory) that provides any
one of the helper scripts.  See <a href="http://sources.redhat.com/automake/autoconf.html#Input">Finding `configure' Input (The Autoconf Manual)</a>.

     </p><p>Required files from <code>AC_CONFIG_AUX_DIR</code> are automatically
distributed, even if there is no <span class="file">Makefile.am</span> in this directory.

     <br></p></dd><dt><code>AC_CANONICAL_BUILD</code><a name="index-AC_005fCANONICAL_005fBUILD-143"></a></dt><dt><code>AC_CANONICAL_HOST</code><a name="index-AC_005fCANONICAL_005fHOST-144"></a></dt><dt><code>AC_CANONICAL_TARGET</code><a name="index-AC_005fCANONICAL_005fTARGET-145"></a></dt><dd><a name="index-build_005ftriplet-146"></a><a name="index-host_005ftriplet-147"></a><a name="index-target_005ftriplet-148"></a>Automake will ensure that <span class="file">config.guess</span> and <span class="file">config.sub</span>
exist.  Also, the <span class="file">Makefile</span> variables <span class="samp">build_triplet</span>,
<span class="samp">host_triplet</span> and <span class="samp">target_triplet</span> are introduced.  See
<a href="http://sources.redhat.com/automake/autoconf.html#Canonicalizing">Getting the Canonical System Type (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_LIBSOURCE</code><a name="index-AC_005fLIBSOURCE-149"></a></dt><dt><code>AC_LIBSOURCES</code><a name="index-AC_005fLIBSOURCES-150"></a></dt><dt><code>AC_LIBOBJ</code><a name="index-AC_005fLIBOBJ-151"></a></dt><dd><a name="index-LIBOBJS-152"></a>Automake will automatically distribute any file listed in
<code>AC_LIBSOURCE</code> or <code>AC_LIBSOURCES</code>.

     <p>Note that the <code>AC_LIBOBJ</code> macro calls <code>AC_LIBSOURCE</code>.  So if
an Autoconf macro is documented to call <code>AC_LIBOBJ([file])</code>, then
<span class="file">file.c</span> will be distributed automatically by Automake.  This
encompasses many macros like <code>AC_FUNC_ALLOCA</code>,
<code>AC_FUNC_MEMCMP</code>, <code>AC_REPLACE_FUNCS</code>, and others.

     </p><p>By the way, direct assignments to <code>LIBOBJS</code> are no longer
supported.  You should always use <code>AC_LIBOBJ</code> for this purpose.
See <a href="http://sources.redhat.com/automake/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code> (The Autoconf Manual)</a>.

     <br></p></dd><dt><code>AC_PROG_RANLIB</code><a name="index-AC_005fPROG_005fRANLIB-153"></a></dt><dd>This is required if any libraries are built in the package.
See <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_PROG_CXX</code><a name="index-AC_005fPROG_005fCXX-154"></a></dt><dd>This is required if any C++ source is included.  See <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_PROG_F77</code><a name="index-AC_005fPROG_005fF77-155"></a></dt><dd>This is required if any Fortran 77 source is included.  This macro is
distributed with Autoconf version 2.13 and later.  See <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_F77_LIBRARY_LDFLAGS</code><a name="index-AC_005fF77_005fLIBRARY_005fLDFLAGS-156"></a></dt><dd>This is required for programs and shared libraries that are a mixture of
languages that include Fortran 77 (see <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>).  See <a href="#Macros">Autoconf macros supplied with Automake</a>.

     <br></dd><dt><code>AC_PROG_FC</code><a name="index-AC_005fPROG_005fFC-157"></a></dt><dd>This is required if any Fortran 90/95 source is included.  This macro is
distributed with Autoconf version 2.58 and later.  See <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_PROG_LIBTOOL</code><a name="index-AC_005fPROG_005fLIBTOOL-158"></a></dt><dd>Automake will turn on processing for <code>libtool</code> (see <a href="http://sources.redhat.com/automake/libtool.html#Top">Introduction (The Libtool Manual)</a>).

     <br></dd><dt><code>AC_PROG_YACC</code><a name="index-AC_005fPROG_005fYACC-159"></a></dt><dd><a name="index-YACC-160"></a>If a Yacc source file is seen, then you must either use this macro or
define the variable <span class="samp">YACC</span> in <span class="file">configure.ac</span>.  The former is
preferred (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>).

     <br></dd><dt><code>AC_PROG_LEX</code><a name="index-AC_005fPROG_005fLEX-161"></a></dt><dd>If a Lex source file is seen, then this macro must be used.
See <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>.

     <br></dd><dt><code>AC_SUBST</code><a name="index-AC_005fSUBST-162"></a></dt><dd>The first argument is automatically defined as a variable in each
generated <span class="file">Makefile.in</span>.  See <a href="http://sources.redhat.com/automake/autoconf.html#Setting-Output-Variables">Setting Output Variables (The Autoconf Manual)</a>.

     <p>If the Autoconf manual says that a macro calls <code>AC_SUBST</code> for
<var>var</var>, or defines the output variable <var>var</var> then <var>var</var> will
be defined in each <span class="file">Makefile.in</span> generated by Automake.
E.g. <code>AC_PATH_XTRA</code> defines <code>X_CFLAGS</code> and <code>X_LIBS</code>, so
you can use these variables in any <span class="file">Makefile.am</span> if
<code>AC_PATH_XTRA</code> is called.

     <br></p></dd><dt><code>AM_C_PROTOTYPES</code><a name="index-AM_005fC_005fPROTOTYPES-163"></a></dt><dd>This is required when using automatic de-ANSI-fication; see <a href="#ANSI">ANSI</a>.

     <br></dd><dt><code>AM_GNU_GETTEXT</code><a name="index-AM_005fGNU_005fGETTEXT-164"></a></dt><dd>This macro is required for packages which use GNU gettext
(see <a href="#gettext">gettext</a>).  It is distributed with gettext.  If Automake sees
this macro it ensures that the package meets some of gettext's
requirements.

     <br></dd><dt><code>AM_MAINTAINER_MODE</code><a name="index-AM_005fMAINTAINER_005fMODE-165"></a></dt><dd><a name="index-_002d_002denable_002dmaintainer_002dmode-166"></a>This macro adds a <span class="samp">--enable-maintainer-mode</span> option to
<code>configure</code>.  If this is used, <code>automake</code> will cause
<span class="samp">maintainer-only</span> rules to be turned off by default in the
generated <span class="file">Makefile.in</span>s.  This macro defines the
<span class="samp">MAINTAINER_MODE</span> conditional, which you can use in your own
<span class="file">Makefile.am</span>.  See <a href="#maintainer_002dmode">maintainer-mode</a>.

     <br></dd><dt><code>m4_include</code><a name="index-m4_005finclude-167"></a></dt><dd>Files included by <span class="file">configure.ac</span> using this macro will be
detected by Automake and automatically distributed.  They will also
appear as dependencies in <span class="file">Makefile</span> rules.

     <p><code>m4_include</code> is seldom used by <span class="file">configure.ac</span> authors, but
can appear in <span class="file">aclocal.m4</span> when <span class="command">aclocal</span> detects that
some required macros come from files local to your package (as opposed
to macros installed in a system-wide directory, see <a href="#Invoking-aclocal">Invoking aclocal</a>).

   </p></dd></dl>

<div class="node">
<p></p><hr>
<a name="Invoking-aclocal"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#aclocal-options">aclocal options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Optional">Optional</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.3 Auto-generating aclocal.m4</h3>

<p><a name="index-Invoking-_0040command_007baclocal_007d-168"></a><a name="index-_0040command_007baclocal_007d_002c-Invoking-169"></a>
Automake includes a number of Autoconf macros which can be used in
your package (see <a href="#Macros">Macros</a>); some of them are actually required by
Automake in certain situations.  These macros must be defined in your
<span class="file">aclocal.m4</span>; otherwise they will not be seen by
<span class="command">autoconf</span>.

   </p><p>The <span class="command">aclocal</span> program will automatically generate
<span class="file">aclocal.m4</span> files based on the contents of <span class="file">configure.ac</span>.
This provides a convenient way to get Automake-provided macros,
without having to search around.  The <span class="command">aclocal</span> mechanism
allows other packages to supply their own macros (see <a href="#Extending-aclocal">Extending aclocal</a>).  You can also use it to maintain your own set of custom
macros (see <a href="#Local-Macros">Local Macros</a>).

   </p><p>At startup, <span class="command">aclocal</span> scans all the <span class="file">.m4</span> files it can
find, looking for macro definitions (see <a href="#Macro-search-path">Macro search path</a>).  Then
it scans <span class="file">configure.ac</span>.  Any mention of one of the macros found
in the first step causes that macro, and any macros it in turn
requires, to be put into <span class="file">aclocal.m4</span>.

   </p><p><em>Putting</em> the file that contains the macro definition into
<span class="file">aclocal.m4</span> is usually done by copying the entire text of this
file, including unused macro definitions as well as both <span class="samp">#</span> and
<span class="samp">dnl</span> comments.  If you want to make a comment which will be
completely ignored by <span class="command">aclocal</span>, use <span class="samp">##</span> as the comment
leader.

   </p><p>When a file selected by <span class="command">aclocal</span> is located in a subdirectory
specified as a relative search path with <span class="command">aclocal</span>'s <code>-I</code>
argument, <span class="command">aclocal</span> assumes the file belongs to the package
and uses <code>m4_include</code> instead of copying it into
<span class="file">aclocal.m4</span>.  This makes the package smaller, eases dependency
tracking, and cause the file to be distributed automatically.
(See <a href="#Local-Macros">Local Macros</a>, for an example.)  Any macro which is found in a
system-wide directory, or via an absolute search path will be copied.
So use <code>-I `pwd`/reldir</code> instead of <code>-I reldir</code> whenever
some relative directory need to be considered outside the package.

   </p><p>The contents of <span class="file">acinclude.m4</span>, if this file exists, are also
automatically included in <span class="file">aclocal.m4</span>.  We recommend against
using <span class="file">acinclude.m4</span> in new packages (see <a href="#Local-Macros">Local Macros</a>).

   </p><p><a name="index-AUTOM4TE-170"></a>While computing <span class="file">aclocal.m4</span>, <code>aclocal</code> runs <code>autom4te</code>
(see <a href="http://sources.redhat.com/automake/autoconf.html#Using-autom4te">Using <code>Autom4te</code> (The Autoconf Manual)</a>) in order to trace the macros which are really used,
and omit from <span class="file">aclocal.m4</span> all macros which are mentioned but
otherwise unexpanded (this can happen when a macro is called
conditionally).  <code>autom4te</code> is expected to be in the <code>PATH</code>,
just as <code>autoconf</code>.  Its location can be overridden using the
<code>AUTOM4TE</code> environment variable.

</p><ul class="menu">
<li><a accesskey="1" href="#aclocal-options">aclocal options</a>:              Options supported by aclocal
</li><li><a accesskey="2" href="#Macro-search-path">Macro search path</a>:            How aclocal finds .m4 files
</li></ul>

<div class="node">
<p></p><hr>
<a name="aclocal-options"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Macro-search-path">Macro search path</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-aclocal">Invoking aclocal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.4 aclocal options</h3>

<p><a name="index-_0040command_007baclocal_007d_002c-Options-171"></a><a name="index-Options_002c-_0040command_007baclocal_007d-172"></a>
<code>aclocal</code> accepts the following options:

     </p><dl>
<dt><code>--acdir=</code><var>dir</var></dt><dd><a name="index-_002d_002dacdir-173"></a>Look for the macro files in <var>dir</var> instead of the installation
directory.  This is typically used for debugging.

     <br></dd><dt><code>--help</code></dt><dd><a name="index-_002d_002dhelp-174"></a>Print a summary of the command line options and exit.

     <br></dd><dt><code>-I </code><var>dir</var></dt><dd><a name="index-_002dI-175"></a>Add the directory <var>dir</var> to the list of directories searched for
<span class="file">.m4</span> files.

     <br></dd><dt><code>--force</code></dt><dd><a name="index-_002d_002dforce-176"></a>Always overwrite the output file.  The default is to overwrite the output
file only when really needed, i.e., when its contents changes or if one
of its dependencies is younger.

     <br></dd><dt><code>--output=</code><var>file</var></dt><dd><a name="index-_002d_002doutput-177"></a>Cause the output to be put into <var>file</var> instead of <span class="file">aclocal.m4</span>.

     <br></dd><dt><code>--print-ac-dir</code></dt><dd><a name="index-_002d_002dprint_002dac_002ddir-178"></a>Prints the name of the directory which <code>aclocal</code> will search to
find third-party <span class="file">.m4</span> files.  When this option is given, normal
processing is suppressed.  This option can be used by a package to
determine where to install a macro file.

     <br></dd><dt><code>--verbose</code></dt><dd><a name="index-_002d_002dverbose-179"></a>Print the names of the files it examines.

     <br></dd><dt><code>--version</code></dt><dd><a name="index-_002d_002dversion-180"></a>Print the version number of Automake and exit.
</dd></dl>

<div class="node">
<p></p><hr>
<a name="Macro-search-path"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Macros">Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#aclocal-options">aclocal options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.5 Macro search path</h3>

<p><a name="index-Macro-search-path-181"></a><a name="index-_0040command_007baclocal_007d-search-path-182"></a>
By default, <span class="command">aclocal</span> searches for <span class="file">.m4</span> files in the following
directories, in this order:

     </p><dl>
<dt><var>acdir-APIVERSION</var></dt><dd>This is where the <span class="file">.m4</span> macros distributed with automake itself
are stored.  <var>APIVERSION</var> depends on the automake release used;
for automake 1.6.x, <var>APIVERSION</var> = <code>1.6</code>.

     <br></dd><dt><var>acdir</var></dt><dd>This directory is intended for third party <span class="file">.m4</span> files, and is
configured when <span class="command">automake</span> itself is built.  This is
<span class="file">@datadir@/aclocal/</span>, which typically
expands to <span class="file">${prefix}/share/aclocal/</span>.  To find the compiled-in
value of <var>acdir</var>, use the <code>--print-ac-dir</code> option
(see <a href="#aclocal-options">aclocal options</a>).
</dd></dl>

   <p>As an example, suppose that automake-1.6.2 was configured with
<code>--prefix=/usr/local</code>.  Then, the search path would be:

     </p><ol start="1" type="1">
<li><span class="file">/usr/local/share/aclocal-1.6/</span>
</li><li><span class="file">/usr/local/share/aclocal/</span>
        </li></ol>

   <p>As explained in (see <a href="#aclocal-options">aclocal options</a>), there are several options that
can be used to change or extend this search path.

</p><h4 class="subsection">5.5.1 Modifying the macro search path: <code>--acdir</code></h4>

<p>The most obvious option to modify the search path is
<code>--acdir=</code><var>dir</var>, which changes default directory and
drops the <var>APIVERSION</var> directory.  For example, if one specifies
<code>--acdir=/opt/private/</code>, then the search path becomes:

     </p><ol start="1" type="1">
<li><span class="file">/opt/private/</span>
        </li></ol>

   <p>Note that this option, <code>--acdir</code>, is intended for use
by the internal automake test suite only; it is not ordinarily
needed by end-users.

</p><h4 class="subsection">5.5.2 Modifying the macro search path: <code>-I </code><var>dir</var></h4>

<p>Any extra directories specified using <code>-I</code> options
(see <a href="#aclocal-options">aclocal options</a>) are <em>prepended</em> to this search list.  Thus,
<code>aclocal -I /foo -I /bar</code> results in the following search path:

     </p><ol start="1" type="1">
<li><span class="file">/foo</span>
</li><li><span class="file">/bar</span>
</li><li><var>acdir</var>-<var>APIVERSION</var>
</li><li><var>acdir</var>
        </li></ol>

<h4 class="subsection">5.5.3 Modifying the macro search path: <span class="file">dirlist</span></h4>

<p><a name="index-_0040file_007bdirlist_007d-183"></a>
There is a third mechanism for customizing the search path.  If a
<span class="file">dirlist</span> file exists in <var>acdir</var>, then that file is assumed to
contain a list of directories, one per line, to be added to the search
list.  These directories are searched <em>after</em> all other
directories.

   </p><p>For example, suppose
<var>acdir</var><span class="file">/dirlist</span> contains the following:

</p><pre class="example">     /test1
     /test2
</pre>
   <p class="noindent">and that <code>aclocal</code> was called with the <code>-I /foo -I /bar</code> options.
Then, the search path would be

     </p><ol start="1" type="1">
<li><span class="file">/foo</span>
</li><li><span class="file">/bar</span>
</li><li><var>acdir</var>-<var>APIVERSION</var>
</li><li><var>acdir</var>
</li><li><span class="file">/test1</span>
</li><li><span class="file">/test2</span>
        </li></ol>

   <p>If the <code>--acdir=</code><var>dir</var> option is used, then <span class="command">aclocal</span>
will search for the <span class="file">dirlist</span> file in <var>dir</var>.  In the
<code>--acdir=/opt/private/</code> example above, <span class="command">aclocal</span> would look
for <span class="file">/opt/private/dirlist</span>.  Again, however, the <code>--acdir</code>
option is intended for use by the internal automake test suite only;
<code>--acdir</code> is not ordinarily needed by end-users.

   </p><p><span class="file">dirlist</span> is useful in the following situation: suppose that
<code>automake</code> version <code>1.6.2</code> is installed with
$prefix=/usr by the system vendor. Thus, the default search
directories are

     </p><ol start="1" type="1">
<li><span class="file">/usr/share/aclocal-1.6/</span>
</li><li><span class="file">/usr/share/aclocal/</span>
        </li></ol>

   <p>However, suppose further that many packages have been manually
installed on the system, with $prefix=/usr/local, as is typical.
In that case, many of these &#8220;extra&#8221; <span class="file">.m4</span> files are in
<span class="file">/usr/local/share/aclocal</span>.  The only way to force
<span class="file">/usr/bin/aclocal</span> to find these &#8220;extra&#8221; <span class="file">.m4</span> files
is to always call <code>aclocal -I /usr/local/share/aclocal</code>.
This is inconvenient.  With <span class="file">dirlist</span>, one may create the file

   </p><p><span class="file">/usr/share/aclocal/dirlist</span>

</p><p class="noindent">which contains only the single line

   </p><p><span class="file">/usr/local/share/aclocal</span>

   </p><p>Now, the &#8220;default&#8221; search path on the affected system is

     </p><ol start="1" type="1">
<li><span class="file">/usr/share/aclocal-1.6/</span>
</li><li><span class="file">/usr/share/aclocal/</span>
</li><li><span class="file">/usr/local/share/aclocal/</span>
        </li></ol>

   <p>without the need for <code>-I</code> options; <code>-I</code> options can be reserved
for project-specific needs (<span class="file">my-source-dir/m4/</span>), rather than
using it to work around local system-dependent tool installation
directories.

   </p><p>Similarly, <span class="file">dirlist</span> can be handy if you have installed a local
copy Automake on your account and want <span class="command">aclocal</span> to look for
macros installed at other places on the system.

</p><div class="node">
<p></p><hr>
<a name="Macros"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Extending-aclocal">Extending aclocal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macro-search-path">Macro search path</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.6 Autoconf macros supplied with Automake</h3>

<p>Automake ships with several Autoconf macros that you can use from your
<span class="file">configure.ac</span>.  When you use one of them it will be included by
<code>aclocal</code> in <span class="file">aclocal.m4</span>.

</p><ul class="menu">
<li><a accesskey="1" href="#Public-macros">Public macros</a>:                Macros that you can use.
</li><li><a accesskey="2" href="#Private-macros">Private macros</a>:               Macros that you should not use.
</li></ul>

<!-- consider generating the following subsections automatically from m4 files. -->
<div class="node">
<p></p><hr>
<a name="Public-macros"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Private-macros">Private macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Macros">Macros</a>
<br>
</div>

<h4 class="subsection">5.6.1 Public macros</h4>

     <dl>
<dt><code>AM_CONFIG_HEADER</code></dt><dd><a name="index-AM_005fCONFIG_005fHEADER-184"></a>Automake will generate rules to automatically regenerate the config
header.  This obsolete macro is a synonym of <code>AC_CONFIG_HEADERS</code>
today (see <a href="#Optional">Optional</a>).

     <br></dd><dt><code>AM_ENABLE_MULTILIB</code></dt><dd><a name="index-AM_005fENABLE_005fMULTILIB-185"></a>This is used when a &#8220;multilib&#8221; library is being built.  The first
optional argument is the name of the <span class="file">Makefile</span> being generated; it
defaults to <span class="samp">Makefile</span>.  The second option argument is used to find
the top source directory; it defaults to the empty string (generally
this should not be used unless you are familiar with the internals).
See <a href="#Multilibs">Multilibs</a>.

     <br></dd><dt><code>AM_C_PROTOTYPES</code></dt><dd><a name="index-AM_005fC_005fPROTOTYPES-186"></a><a name="index-ANSI2KNR-187"></a><a name="index-U-188"></a>Check to see if function prototypes are understood by the compiler.  If
so, define <span class="samp">PROTOTYPES</span> and set the output variables <span class="samp">U</span> and
<span class="samp">ANSI2KNR</span> to the empty string.  Otherwise, set <span class="samp">U</span> to
<span class="samp">_</span> and <span class="samp">ANSI2KNR</span> to <span class="samp">./ansi2knr</span>.  Automake uses these
values to implement automatic de-ANSI-fication.

     <br></dd><dt><code>AM_HEADER_TIOCGWINSZ_NEEDS_SYS_IOCTL</code></dt><dd><a name="index-AM_005fHEADER_005fTIOCGWINSZ_005fNEEDS_005fSYS_005fIOCTL-189"></a>If the use of <code>TIOCGWINSZ</code> requires <span class="file">&lt;sys/ioctl.h&gt;</span>, then
define <code>GWINSZ_IN_SYS_IOCTL</code>.  Otherwise <code>TIOCGWINSZ</code> can be
found in <span class="file">&lt;termios.h&gt;</span>.  This macro is obsolete, you should
use Autoconf's <code>AC_HEADER_TIOCGWINSZ</code> instead.

     <br></dd><dt><code>AM_INIT_AUTOMAKE([OPTIONS])</code></dt><dt><code>AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])</code></dt><dd><a name="index-AM_005fINIT_005fAUTOMAKE-190"></a>Runs many macros required for proper operation of the generated Makefiles.

     <p><a name="index-AUTOMAKE_005fOPTIONS-191"></a>This macro has two forms, the first of which is preferred.
In this form, <code>AM_INIT_AUTOMAKE</code> is called with a
single argument &#8212; a space-separated list of Automake options which should
be applied to every <span class="file">Makefile.am</span> in the tree.  The effect is as if
each option were listed in <code>AUTOMAKE_OPTIONS</code> (see <a href="#Options">Options</a>).

     </p><p><a name="index-AC_005fINIT-192"></a>The second, deprecated, form of <code>AM_INIT_AUTOMAKE</code> has two required
arguments: the package and the version number.  This form is
obsolete because the <var>package</var> and <var>version</var> can be obtained
from Autoconf's <code>AC_INIT</code> macro (which itself has an old and a new
form).

     </p><p>If your <span class="file">configure.ac</span> has:

     </p><pre class="example">          AC_INIT(src/foo.c)
          AM_INIT_AUTOMAKE(mumble, 1.5)
     </pre>
     <p class="noindent">you can modernize it as follows:

     </p><pre class="example">          AC_INIT(mumble, 1.5)
          AC_CONFIG_SRCDIR(src/foo.c)
          AM_INIT_AUTOMAKE
     </pre>
     <p>Note that if you're upgrading your <span class="file">configure.ac</span> from an earlier
version of Automake, it is not always correct to simply move the package
and version arguments from <code>AM_INIT_AUTOMAKE</code> directly to
<code>AC_INIT</code>, as in the example above.  The first argument to
<code>AC_INIT</code> should be the name of your package (e.g. <span class="samp">GNU Automake</span>),
not the tarball name (e.g. <span class="samp">automake</span>) that you used to pass to
<code>AM_INIT_AUTOMAKE</code>.  Autoconf tries to derive a tarball name from
the package name, which should work for most but not all package names.
(If it doesn't work for yours, you can use the
four-argument form of <code>AC_INIT</code> &#8212; supported in Autoconf versions
greater than 2.52g &#8212; to provide the tarball name explicitly).

     </p><p><a name="index-_0040code_007bPACKAGE_007d_002c-prevent-definition-193"></a><a name="index-_0040code_007bVERSION_007d_002c-prevent-definition-194"></a><a name="index-no_002ddefine-195"></a>By default this macro <code>AC_DEFINE</code>'s <span class="samp">PACKAGE</span> and
<span class="samp">VERSION</span>.  This can be avoided by passing the <span class="samp">no-define</span>
option, as in:
     </p><pre class="example">          AM_INIT_AUTOMAKE([gnits 1.5 no-define dist-bzip2])
     </pre>
     <p>or by passing a third non-empty argument to the obsolete form.

     <br></p></dd><dt><code>AM_PATH_LISPDIR</code></dt><dd><a name="index-AM_005fPATH_005fLISPDIR-196"></a><a name="index-EMACS-197"></a><a name="index-lispdir-198"></a>Searches for the program <code>emacs</code>, and, if found, sets the output
variable <code>lispdir</code> to the full path to Emacs' site-lisp directory.

     <p>Note that this test assumes the <code>emacs</code> found to be a version that
supports Emacs Lisp (such as <span class="sc">gnu</span> Emacs or XEmacs).  Other emacsen
can cause this test to hang (some, like old versions of MicroEmacs,
start up in interactive mode, requiring <span class="samp">C-x C-c</span> to exit, which
is hardly obvious for a non-emacs user).  In most cases, however, you
should be able to use <span class="samp">C-c</span> to kill the test.  In order to avoid
problems, you can set <code>EMACS</code> to &#8220;no&#8221; in the environment, or
use the <span class="samp">--with-lispdir</span> option to <span class="command">configure</span> to
explicitly set the correct path (if you're sure you have an <code>emacs</code>
that supports Emacs Lisp.

     <br></p></dd><dt><code>AM_PROG_AS</code></dt><dd><a name="index-AM_005fPROG_005fAS-199"></a><a name="index-CCASFLAGS-200"></a><a name="index-CCAS-201"></a>Use this macro when you have assembly code in your project.  This will
choose the assembler for you (by default the C compiler) and set
<code>CCAS</code>, and will also set <code>CCASFLAGS</code> if required.

     <br></dd><dt><code>AM_PROG_CC_C_O</code></dt><dd><a name="index-AM_005fPROG_005fCC_005fC_005fO-202"></a><a name="index-AC_005fPROG_005fCC_005fC_005fO-203"></a>This is like <code>AC_PROG_CC_C_O</code>, but it generates its results in the
manner required by automake.  You must use this instead of
<code>AC_PROG_CC_C_O</code> when you need this functionality.

     <br></dd><dt><code>AM_PROG_LEX</code></dt><dd><a name="index-AM_005fPROG_005fLEX-204"></a><a name="index-AC_005fPROG_005fLEX-205"></a><a name="index-HP_002dUX-10_002c-_0040command_007blex_007d-problems-206"></a><a name="index-_0040command_007blex_007d-problems-with-HP_002dUX-10-207"></a>Like <code>AC_PROG_LEX</code> (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>), but uses the
<code>missing</code> script on systems that do not have <code>lex</code>.
<span class="samp">HP-UX 10</span> is one such system.

     <br></dd><dt><code>AM_PROG_GCJ</code></dt><dd><a name="index-AM_005fPROG_005fGCJ-208"></a><a name="index-GCJ-209"></a><a name="index-GCJFLAGS-210"></a>This macro finds the <code>gcj</code> program or causes an error.  It sets
<span class="samp">GCJ</span> and <span class="samp">GCJFLAGS</span>.  <code>gcj</code> is the Java front-end to the
GNU Compiler Collection.

     <br></dd><dt><code>AM_SYS_POSIX_TERMIOS</code></dt><dd><a name="index-AM_005fSYS_005fPOSIX_005fTERMIOS-211"></a><a name="index-POSIX-termios-headers-212"></a><a name="index-termios-POSIX-headers-213"></a>Check to see if POSIX termios headers and functions are available on the
system.  If so, set the shell variable <code>am_cv_sys_posix_termios</code> to
<span class="samp">yes</span>.  If not, set the variable to <span class="samp">no</span>.  This macro is obsolete,
you should use Autoconf's <code>AC_SYS_POSIX_TERMIOS</code> instead.

     <br></dd><dt><code>AM_WITH_DMALLOC</code></dt><dd><a name="index-AM_005fWITH_005fDMALLOC-214"></a><a name="index-_0040command_007bdmalloc_007d_002c-support-for-215"></a><a name="index-WITH_005fDMALLOC-216"></a><a name="index-_002d_002dwith_002ddmalloc-217"></a>Add support for the
<a href="ftp://ftp.letters.com/src/dmalloc/dmalloc.tar.gz">dmalloc</a>
package.  If the user configures with <span class="samp">--with-dmalloc</span>, then define
<code>WITH_DMALLOC</code> and add <span class="samp">-ldmalloc</span> to <code>LIBS</code>.

     <br></dd><dt><code>AM_WITH_REGEX</code></dt><dd><a name="index-AM_005fWITH_005fREGEX-218"></a><a name="index-WITH_005fREGEX-219"></a><a name="index-_002d_002dwith_002dregex-220"></a><a name="index-regex-package-221"></a><a name="index-rx-package-222"></a>Adds <span class="samp">--with-regex</span> to the <code>configure</code> command line.  If
specified (the default), then the <span class="samp">regex</span> regular expression
library is used, <span class="file">regex.o</span> is put into <span class="samp">LIBOBJS</span>, and
<span class="samp">WITH_REGEX</span> is defined.  If <span class="samp">--without-regex</span> is given, then
the <span class="samp">rx</span> regular expression library is used, and <span class="file">rx.o</span> is put
into <span class="samp">LIBOBJS</span>.

</dd></dl>

<div class="node">
<p></p><hr>
<a name="Private-macros"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Public-macros">Public macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Macros">Macros</a>
<br>
</div>

<h4 class="subsection">5.6.2 Private macros</h4>

<p>The following macros are private macros you should not call directly.
They are called by the other public macros when appropriate.  Do not
rely on them, as they might be changed in a future version.  Consider
them as implementation details; or better, do not consider them at all:
skip this section!

     </p><dl>
<dt><code>_AM_DEPENDENCIES</code><a name="index-_005fAM_005fDEPENDENCIES-223"></a></dt><dt><code>AM_SET_DEPDIR</code><a name="index-AM_005fSET_005fDEPDIR-224"></a></dt><dt><code>AM_DEP_TRACK</code><a name="index-AM_005fDEP_005fTRACK-225"></a></dt><dt><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code><a name="index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS-226"></a></dt><dd>These macros are used to implement Automake's automatic dependency
tracking scheme.  They are called automatically by automake when
required, and there should be no need to invoke them manually.

     <br></dd><dt><code>AM_MAKE_INCLUDE</code><a name="index-AM_005fMAKE_005fINCLUDE-227"></a></dt><dd>This macro is used to discover how the user's <code>make</code> handles
<code>include</code> statements.  This macro is automatically invoked when
needed; there should be no need to invoke it manually.

     <br></dd><dt><code>AM_PROG_INSTALL_STRIP</code><a name="index-AM_005fPROG_005fINSTALL_005fSTRIP-228"></a></dt><dd>This is used to find a version of <code>install</code> which can be used to
<code>strip</code> a program at installation time.  This macro is
automatically included when required.

     <br></dd><dt><code>AM_SANITY_CHECK</code><a name="index-AM_005fSANITY_005fCHECK-229"></a></dt><dd>This checks to make sure that a file created in the build directory is
newer than a file in the source directory.  This can fail on systems
where the clock is set incorrectly.  This macro is automatically run
from <code>AM_INIT_AUTOMAKE</code>.

   </dd></dl>

<div class="node">
<p></p><hr>
<a name="Extending-aclocal"></a><a name="Extending aclocal"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Local-Macros">Local Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macros">Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.7 Writing your own aclocal macros</h3>

<p><a name="index-_0040command_007baclocal_007d_002c-extending-230"></a><a name="index-Extending-_0040command_007baclocal_007d-231"></a>
The <span class="command">aclocal</span> program doesn't have any built-in knowledge of any
macros, so it is easy to extend it with your own macros.

   </p><p>This can be used by libraries which want to supply their own Autoconf
macros for use by other programs.  For instance the <span class="command">gettext</span>
library supplies a macro <code>AM_GNU_GETTEXT</code> which should be used by
any package using <span class="command">gettext</span>.  When the library is installed, it
installs this macro so that <span class="command">aclocal</span> will find it.

   </p><p>A macro file's name should end in <span class="file">.m4</span>.  Such files should be
installed in <span class="file">$(datadir)/aclocal</span>.  This is as simple as writing:

</p><pre class="example">     aclocaldir = $(datadir)/aclocal
     aclocal_DATA = mymacro.m4 myothermacro.m4
</pre>
   <p>A file of macros should be a series of properly quoted
<code>AC_DEFUN</code>'s (see <a href="http://sources.redhat.com/automake/autoconf.html#Macro-Definitions">Macro Definitions (The Autoconf Manual)</a>).  The <span class="command">aclocal</span> programs also understands
<code>AC_REQUIRE</code> (see <a href="http://sources.redhat.com/automake/autoconf.html#Prerequisite-Macros">Prerequisite Macros (The Autoconf Manual)</a>), so it is safe to put each macro in a separate file.
Each file should have no side effects but macro definitions.
Especially, any call to <code>AC_PREREQ</code> should be done inside the
defined macro, not at the beginning of the file.

   </p><p><a name="index-underquoted-_0040code_007bAC_005fDEFUN_007d-232"></a><a name="index-AC_005fDEFUN-233"></a><a name="index-AC_005fPREREQ-234"></a>
Starting with Automake 1.8, <span class="command">aclocal</span> will warn about all
underquoted calls to <code>AC_DEFUN</code>.  We realize this will annoy a
lot of people, because <span class="command">aclocal</span> was not so strict in the past
and many third party macros are underquoted; and we have to apologize
for this temporary inconvenience.  The reason we have to be stricter
is that a future implementation of <span class="command">aclocal</span> (see <a href="#Future-of-aclocal">Future of aclocal</a>) will have to temporary include all these third party
<span class="file">.m4</span> files, maybe several times, even those which are not
actually needed.  Doing so should alleviate many problem of the
current implementation, however it requires a stricter style from the
macro authors.  Hopefully it is easy to revise the existing macros.
For instance
</p><pre class="example">     # bad style
     AC_PREREQ(2.57)
     AC_DEFUN(AX_FOOBAR,
     [AC_REQUIRE([AX_SOMETHING])dnl
     AX_FOO
     AX_BAR
     ])
</pre>
   <p class="noindent">should be rewritten as
</p><pre class="example">     AC_DEFUN([AX_FOOBAR],
     [AC_PREREQ(2.57)dnl
     AC_REQUIRE([AX_SOMETHING])dnl
     AX_FOO
     AX_BAR
     ])
</pre>
   <p>Wrapping the <code>AC_PREREQ</code> call inside the macro ensures that
Autoconf 2.57 will not be required if <code>AX_FOOBAR</code> is not actually
used.  Most importantly, quoting the first argument of <code>AC_DEFUN</code>
allows the macro to be redefined or included twice (otherwise this
first argument would be expansed during the second definition).

   </p><p>If you have been directed here by the <span class="command">aclocal</span> diagnostic but
are not the maintainer of the implicated macro, you will want to
contact the maintainer of that macro.  Please make sure you have the
last version of the macro and that the problem already hasn't been
reported before doing so: people tend to work faster when they aren't
flooded by mails.

   </p><p>Another situation where <span class="command">aclocal</span> is commonly used is to
manage macros which are used locally by the package, <a href="#Local-Macros">Local Macros</a>.

</p><div class="node">
<p></p><hr>
<a name="Local-Macros"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Future-of-aclocal">Future of aclocal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extending-aclocal">Extending aclocal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.8 Handling Local Macros</h3>

<p>Feature tests offered by Autoconf do not cover all needs.  People
often have to supplement existing tests with their own macros, or
with third-party macros.

   </p><p>There are two ways to organize custom macros in a package.

   </p><p>The first possibility (the historical practice) is to list all your
macros in <span class="file">acinclude.m4</span>.  This file will be included in
<span class="file">aclocal.m4</span> when you run <span class="command">aclocal</span>, and its macro(s) will
henceforth be visible to <span class="command">autoconf</span>.  However if it contains
numerous macros, it will rapidly become difficult to maintain, and it
will be almost impossible to share macros between packages.

   </p><p><a name="index-ACLOCAL_005fAMFLAGS-235"></a>The second possibility, which we do recommend, is to write each macro
in its own file and gather all these files in a directory.  This
directory is usually called <span class="file">m4/</span>.  To build <span class="file">aclocal.m4</span>,
one should therefore instruct <span class="command">aclocal</span> to scan <span class="file">m4/</span>.
From the command line, this is done with <code>aclocal -I m4</code>.  The
top-level <span class="file">Makefile.am</span> should also be updated to define

</p><pre class="example">      ACLOCAL_AMFLAGS = -I m4
</pre>
   <p><code>ACLOCAL_AMFLAGS</code> contains options to pass to <span class="command">aclocal</span>
when <span class="file">aclocal.m4</span> is to be rebuilt by <code>make</code>.  This line is
also used by <span class="command">autoreconf</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#autoreconf-Invocation">Using <span class="command">autoreconf</span> to Update <span class="file">configure</span> Scripts (The Autoconf Manual)</a>) to run <span class="command">aclocal</span> with suitable
options, or by <span class="command">autopoint</span> (see <a href="http://sources.redhat.com/automake/gettext.html#autopoint-Invocation">Invoking the <span class="command">autopoint</span> Program (GNU gettext tools)</a>)
and <span class="command">gettextize</span> (see <a href="http://sources.redhat.com/automake/gettext.html#gettextize-Invocation">Invoking the <span class="command">gettextize</span> Program (GNU gettext tools)</a>) to locate
the place where Gettext's macros should be installed.  So even if you
do not really care about the rebuild rules, you should define
<code>ACLOCAL_AMFLAGS</code>.

   </p><p>When <code>aclocal -I m4</code> is run, it will build a <code>aclocal.m4</code>
that <code>m4_include</code>s any file from <span class="file">m4/</span> that defines a
required macro.  Macros not found locally will still be searched in
system-wide directories, as explained in <a href="#Macro-search-path">Macro search path</a>.

   </p><p>Custom macros should be distributed for the same reason that
<span class="file">configure.ac</span> is: so that other people have all the sources of
your package if they want to work on it.  Actually, this distribution
happens automatically because all <code>m4_include</code>d files are
distributed.

   </p><p>However there is no consensus on the distribution of third-party
macros that your package may use.  Many libraries install their own
macro in the system-wide <span class="command">aclocal</span> directory (see <a href="#Extending-aclocal">Extending aclocal</a>).  For instance Guile ships with a file called
<span class="file">guile.m4</span> that contains the macro <code>GUILE_FLAGS</code> which can
be used to define setup compiler and linker flags appropriate for
using Guile.  Using <code>GUILE_FLAGS</code> in <span class="file">configure.ac</span> will
cause <span class="command">aclocal</span> to copy <span class="file">guile.m4</span> into
<span class="file">aclocal.m4</span>, but as <span class="file">guile.m4</span> is not part of the project,
it will not be distributed.  Technically, that means a user which
needs to rebuild <span class="file">aclocal.m4</span> will have to install Guile first.
This is probably OK, if Guile already is a requirement to build the
package.  However, if Guile is only an optional feature, or if your
package might run on architectures where Guile cannot be installed,
this requirement will hinder development.  An easy solution is to copy
such third-party macros in your local <span class="file">m4/</span> directory so they get
distributed.

</p><div class="node">
<p></p><hr>
<a name="Future-of-aclocal"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Local-Macros">Local Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>
<br>
</div>

<h3 class="section">5.9 The Future of <span class="command">aclocal</span></h3>

<p><a name="index-_0040command_007baclocal_007d_0027s-scheduled-death-236"></a>
<span class="command">aclocal</span> is expected to disappear.  This feature really
should not be offered by Automake.  Automake should focus on generating
<span class="file">Makefile</span>s; dealing with M4 macros really is Autoconf's job.
That some people install Automake just to use <span class="command">aclocal</span>, but
do not use <span class="command">automake</span> otherwise is an indication of how that
feature is misplaced.

   </p><p>The new implementation will probably be done slightly differently.
For instance it could enforce the <span class="file">m4/</span>-style layout discussed in
<a href="#Local-Macros">Local Macros</a>, and take care of copying (and even updating)
third-party macros from <span class="file">/usr/share/aclocal/</span> into the local
<span class="file">m4/</span> directory.

   </p><p>We have no idea when and how this will happen.  This has been
discussed several times in the past, but someone still has to commit
itself to that non-trivial task.

   </p><p>From the user point of view, <span class="command">aclocal</span>'s removal might turn
out to be painful.  There is a simple precaution that you may take to
make that switch more seamless: never call <span class="command">aclocal</span> yourself.
Keep this guy under the exclusive control of <span class="command">autoreconf</span> and
Automake's rebuild rules.  Hopefully you won't need to worry about
things breaking, when <span class="command">aclocal</span> disappears, because everything
will have been taken care of.  If otherwise you used to call
<span class="command">aclocal</span> directly yourself or from some script, you will
quickly notice the change.

   </p><p>Many packages come with a script called <span class="file">bootstrap.sh</span> or
<span class="file">autogen.sh</span>, that will just call <span class="command">aclocal</span>,
<span class="command">libtoolize</span>, <span class="command">gettextize</span> or <span class="command">autopoint</span>,
<span class="command">autoconf</span>, <span class="command">autoheader</span>, and <span class="command">automake</span> in
the right order.  Actually this is precisely what <span class="command">autoreconf</span>
can do for you.  If your package has such a <span class="file">bootstrap.sh</span> or
<span class="file">autogen.sh</span> script, consider using <span class="command">autoreconf</span>.  That
should simplify its logic a lot (less things to maintain, yum!), it's
even likely you will not need the script anymore, and more to the point
you will not call <span class="command">aclocal</span> directly anymore.

   </p><p>For the time being, third-party packages should continue to install
public macros into <code>/usr/share/aclocal/</code>.  If <span class="command">aclocal</span>
is replaced by another tool it might make sense to rename the
directory, but supporting <code>/usr/share/aclocal/</code> for backward
compatibility should be really easy provided all macros are properly
written (see <a href="#Extending-aclocal">Extending aclocal</a>).

</p><div class="node">
<p></p><hr>
<a name="Directories"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Programs">Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#configure">configure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">6 Directories</h2>

<p>For simple projects that distributes all files in the same directory
it is enough to have a single <span class="file">Makefile.am</span> that builds
everything in place.

   </p><p>In larger projects it is common to organize files in different
directories, in a tree.  For instance one directory per program, per
library or per module.  The traditional approach is to build these
subdirectory recursively: each directory contains its <span class="file">Makefile</span>
(generated from <span class="file">Makefile.am</span>), and when <span class="command">make</span> is run
from the top level directory it enters each subdirectory in turn to
build its contents.

</p><ul class="menu">
<li><a accesskey="1" href="#Subdirectories">Subdirectories</a>:               Building subdirectories recursively
</li><li><a accesskey="2" href="#Conditional-Subdirectories">Conditional Subdirectories</a>:   Conditionally not building directories
</li><li><a accesskey="3" href="#Alternative">Alternative</a>:                  Subdirectories without recursion
</li><li><a accesskey="4" href="#Subpackages">Subpackages</a>:                  Nesting packages
</li></ul>

<div class="node">
<p></p><hr>
<a name="Subdirectories"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Subdirectories">Conditional Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>
<br>
</div>

<h3 class="section">6.1 Recursing subdirectories</h3>

<p><a name="index-_0040code_007bSUBDIRS_007d_002c-explained-237"></a>
In packages with subdirectories, the top level <span class="file">Makefile.am</span> must
tell Automake which subdirectories are to be built.  This is done via
the <code>SUBDIRS</code> variable.
<a name="index-SUBDIRS-238"></a>
The <code>SUBDIRS</code> variable holds a list of subdirectories in which
building of various sorts can occur.  The rules for many targets
(e.g. <code>all</code>) in the generated <span class="file">Makefile</span> will run commands
both locally and in all specified subdirectories.  Note that the
directories listed in <code>SUBDIRS</code> are not required to contain
<span class="file">Makefile.am</span>s; only <span class="file">Makefile</span>s (after configuration).
This allows inclusion of libraries from packages which do not use
Automake (such as <code>gettext</code>; see also <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>).

   </p><p>In packages that use subdirectories, the top-level <span class="file">Makefile.am</span> is
often very short.  For instance, here is the <span class="file">Makefile.am</span> from the
GNU Hello distribution:

</p><pre class="example">     EXTRA_DIST = BUGS ChangeLog.O README-alpha
     SUBDIRS = doc intl po src tests
</pre>
   <p>When Automake invokes <code>make</code> in a subdirectory, it uses the value
of the <code>MAKE</code> variable.  It passes the value of the variable
<code>AM_MAKEFLAGS</code> to the <code>make</code> invocation; this can be set in
<span class="file">Makefile.am</span> if there are flags you must always pass to
<code>make</code>.
<a name="index-MAKE-239"></a><a name="index-AM_005fMAKEFLAGS-240"></a>
The directories mentioned in <code>SUBDIRS</code> are usually direct
children of the current directory, each subdirectory containing its
own <span class="file">Makefile.am</span> with a <code>SUBDIRS</code> pointing to deeper
subdirectories.  Automake can be used to construct packages of
arbitrary depth this way.

   </p><p>By default, Automake generates <span class="file">Makefiles</span> which work depth-first
in postfix order: the subdirectories are built before the current
directory.  However, it is possible to change this ordering.  You can
do this by putting <span class="samp">.</span> into <code>SUBDIRS</code>.  For instance,
putting <span class="samp">.</span>  first will cause a <span class="samp">prefix</span> ordering of
directories.

   </p><p>Using

</p><pre class="example">     SUBDIRS = lib src . test
</pre>
   <p class="noindent">will cause <span class="file">lib/</span> to be built before <span class="file">src/</span>, then the
current directory will be built, finally the <span class="file">test/</span> directory
will be built.  It is customary to arrange test directories to be
built after everything else since they are meant to test what has
been constructed.

   </p><p>All <span class="samp">clean</span> rules are run in reverse order of build rules.

</p><div class="node">
<p></p><hr>
<a name="Conditional-Subdirectories"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Alternative">Alternative</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Subdirectories">Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>
<br>
</div>

<h3 class="section">6.2 Conditional Subdirectories</h3>

<p><a name="index-Subdirectories_002c-building-conditionally-241"></a><a name="index-Conditional-subdirectories-242"></a><a name="index-_0040code_007bSUBDIRS_007d_002c-conditional-243"></a><a name="index-Conditional-_0040code_007bSUBDIRS_007d-244"></a>
It is possible to define the <code>SUBDIRS</code> variable conditionally if,
like in the case of GNU <code>Inetutils</code>, you want to only build a
subset of the entire package.

   </p><p>To illustrate how this works, let's assume we have two directories
<span class="file">src/</span> and <span class="file">opt/</span>.  <span class="file">src/</span> should always be built, but we
want to decide in <code>./configure</code> whether <span class="file">opt/</span> will be built
or not.  (For this example we will assume that <span class="file">opt/</span> should be
built when the variable <code>$want_opt</code> was set to <code>yes</code>.)

   </p><p>Running <code>make</code> should thus recurse into <span class="file">src/</span> always, and
then maybe in <span class="file">opt/</span>.

   </p><p>However <code>make dist</code> should always recurse into both <span class="file">src/</span>
and <span class="file">opt/</span>.  Because <span class="file">opt/</span> should be distributed even if it
is not needed in the current configuration. This means
<span class="file">opt/Makefile</span> should be created <em>unconditionally</em>.

   </p><p>There are two ways to setup a project like this.  You can use Automake
conditionals (see <a href="#Conditionals">Conditionals</a>) or use Autoconf <code>AC_SUBST</code>
variables (see <a href="http://sources.redhat.com/automake/autoconf.html#Setting-Output-Variables">Setting Output Variables (The Autoconf Manual)</a>).  Using Automake
conditionals is the preferred solution.  Before we illustrate these
two possibility, let's introduce <code>DIST_SUBDIRS</code>.

</p><h4 class="subsection">6.2.1 <code>SUBDIRS</code> vs. <code>DIST_SUBDIRS</code></h4>

<p><a name="index-_0040code_007bDIST_005fSUBDIRS_007d_002c-explained-245"></a>
Automake considers two sets of directories, defined by the variables
<code>SUBDIRS</code> and <code>DIST_SUBDIRS</code>.

   </p><p><code>SUBDIRS</code> contains the subdirectories of the current directory
that must be built (see <a href="#Subdirectories">Subdirectories</a>).  It must be defined
manually; Automake will never guess a directory is to be built.  As we
will see in the next two sections, it is possible to define it
conditionally so that some directory will be omitted from the build.

   </p><p><code>DIST_SUBDIRS</code> is used in rules that need to recurse in all
directories, even those which have been conditionally left out of the
build.  Recall our example where we may not want to build subdirectory
<span class="file">opt/</span>, but yet we want to distribute it?  This is where
<code>DIST_SUBDIRS</code> come into play: <code>opt</code> may not appear in
<code>SUBDIRS</code>, but it must appear in <code>DIST_SUBDIRS</code>.

   </p><p>Precisely, <code>DIST_SUBDIRS</code> is used by <code>make dist</code>, <code>make
distclean</code>, and <code>make maintainer-clean</code>.  All other recursive
rules use <code>SUBDIRS</code>.

   </p><p>If <code>SUBDIRS</code> is defined conditionally using Automake
conditionals, Automake will define <code>DIST_SUBDIRS</code> automatically
from the possibles values of <code>SUBDIRS</code> in all conditions.

   </p><p>If <code>SUBDIRS</code> contains <code>AC_SUBST</code> variables,
<code>DIST_SUBDIRS</code> will not be defined correctly because Automake
does not know the possible values of these variables.  In this case
<code>DIST_SUBDIRS</code> needs to be defined manually.

</p><h4 class="subsection">6.2.2 Conditional subdirectories with <code>AM_CONDITIONAL</code></h4>

<p><a name="index-_0040code_007bSUBDIRS_007d-and-_0040code_007bAM_005fCONDITIONAL_007d-246"></a><a name="index-_0040code_007bAM_005fCONDITIONAL_007d-and-_0040code_007bSUBDIRS_007d-247"></a>
<!-- The test case for the setup described here is -->
<!-- test/subdircond2.test -->
<!-- Try to keep it in sync. -->

   </p><p><span class="file">configure</span> should output the <span class="file">Makefile</span> for each directory
and define a condition into which <span class="file">opt/</span> should be built.

</p><pre class="example">     ...
     AM_CONDITIONAL([COND_OPT], [test "$want_opt" = yes])
     AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
     ...
</pre>
   <p>Then <code>SUBDIRS</code> can be defined in the top-level <span class="file">Makefile.am</span>
as follows.

</p><pre class="example">     if COND_OPT
       MAYBE_OPT = opt
     endif
     SUBDIRS = src $(MAYBE_OPT)
</pre>
   <p>As you can see, running <code>make</code> will rightly recurse into
<span class="file">src/</span> and maybe <span class="file">opt/</span>.

   </p><p><a name="index-DIST_005fSUBDIRS-248"></a>As you can't see, running <code>make dist</code> will recurse into both
<span class="file">src/</span> and <span class="file">opt/</span> directories because <code>make dist</code>, unlike
<code>make all</code>, doesn't use the <code>SUBDIRS</code> variable.  It uses the
<code>DIST_SUBDIRS</code> variable.

   </p><p>In this case Automake will define <code>DIST_SUBDIRS = src opt</code>
automatically because it knows that <code>MAYBE_OPT</code> can contain
<code>opt</code> in some condition.

</p><h4 class="subsection">6.2.3 Conditional Subdirectories with <code>AC_SUBST</code></h4>

<p><a name="index-_0040code_007bSUBDIRS_007d-and-_0040code_007bAC_005fSUBST_007d-249"></a><a name="index-_0040code_007bAC_005fSUBST_007d-and-_0040code_007bSUBDIRS_007d-250"></a>
<!-- The test case for the setup described here is -->
<!-- test/subdircond3.test -->
<!-- Try to keep it in sync. -->

   </p><p>Another possibility is to define <code>MAYBE_OPT</code> from
<span class="file">./configure</span> using <code>AC_SUBST</code>:

</p><pre class="example">     ...
     if test "$want_opt" = yes; then
       MAYBE_OPT=opt
     else
       MAYBE_OPT=
     fi
     AC_SUBST([MAYBE_OPT])
     AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
     ...
</pre>
   <p>In this case the top-level <span class="file">Makefile.am</span> should look as follows.

</p><pre class="example">     SUBDIRS = src $(MAYBE_OPT)
     DIST_SUBDIRS = src opt
</pre>
   <p>The drawback is that since Automake cannot guess what the possible
values of <code>MAYBE_OPT</code> are, it is necessary to define
<code>DIST_SUBDIRS</code>.

</p><h4 class="subsection">6.2.4 Non-configured Subdirectories</h4>

<p><a name="index-Subdirectories_002c-configured-conditionally-251"></a>
The semantic of <code>DIST_SUBDIRS</code> is often misunderstood by some
users that try to <em>configure and build</em> subdirectories
conditionally.  Here by configuring we mean creating the
<span class="file">Makefile</span> (it might also involve running a nested
<span class="command">configure</span> script: this is a costly operation that explains
why people want to do it conditionally, but only the <span class="file">Makefile</span>
is relevant to the discussion).

   </p><p>The above examples all assume that every <span class="file">Makefile</span> is created,
even in directories that are not going to be built.  The simple reason
is that we want <code>make dist</code> to distribute even the directories
that are not being built (e.g. platform-dependent code), hence
<span class="file">make dist</span> must recurse into the subdirectory, hence this
directory must be configured and appear in <code>DIST_SUBDIRS</code>.

   </p><p>Building packages that do not configure every subdirectory is a tricky
business, and we do not recommend it to the novice as it is easy to
produce an incomplete tarball by mistake.  We will not discuss this
topic in depth here, yet for the adventurous here are a few rules to
remember.

   </p><p><table class="cartouche" summary="cartouche" border="1"><tbody><tr><td>
     <ul>
<li><code>SUBDIRS</code> should always be a subset of <code>DIST_SUBDIRS</code>.

     <p>It makes little sense to have a directory in <code>SUBDIRS</code> that
is not in <code>DIST_SUBDIRS</code>.  Think of the former as a way to tell
which directories listed in the latter should be built.
</p></li><li>Any directory listed in <code>DIST_SUBDIRS</code> and <code>SUBDIRS</code>
must be configured.

     <p>I.e., the <span class="file">Makefile</span> must exists or the recursive <code>make</code>
rules will not be able to process the directory.
</p></li><li>Any configured directory must be listed in <code>DIST_SUBDIRS</code>.

     <p>So that the cleaning rule remove the generated <span class="file">Makefile</span>s.
It would be correct to see <code>DIST_SUBDIRS</code> as a variable that
lists all the directories that have been configured.
</p></li></ul>
   </td></tr></tbody></table>

   </p><p>In order to prevent recursion in some non-configured directory you
must therefore ensure that this directory does not appear in
<code>DIST_SUBDIRS</code> (and <code>SUBDIRS</code>).  For instance if you define
<code>SUBDIRS</code> conditionally using <code>AC_SUBST</code> and do not define
<code>DIST_SUBDIRS</code> explicitly, it will be default to
<code>$(SUBDIRS)</code>; another possibility is to force <code>DIST_SUBDIRS
= $(SUBDIRS)</code>.

   </p><p>Of course, directories which are omitted from <code>DIST_SUBDIRS</code> will
not be distributed unless you make other arrangements for this to
happen (for instance always running <code>make dist</code> in a
configuration where all directories are known to appear in
<code>DIST_SUBDIRS</code>; or writing a <code>dist-hook</code> target to
distribute these directories).

   </p><p><a name="index-Subdirectories_002c-not-distributed-252"></a>In few packages, non-configured directories are not even expected to
be distributed.  Although these packages do not require the
aforementioned extra arrangements, there is another pitfall.  If the
name of a directory appears in <code>SUBDIRS</code> or <code>DIST_SUBDIRS</code>,
<span class="command">automake</span> will make sure the directory exists.  Consequently
<span class="command">automake</span> cannot be run on such a distribution when one
directory has been omitted.  One way to avoid this check is to use the
<code>AC_SUBST</code> method to declare conditional directories; since
<span class="command">automake</span> does not know the values of <code>AC_SUBST</code>
variables it cannot ensure the corresponding directory exist.

</p><div class="node">
<p></p><hr>
<a name="Alternative"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Subpackages">Subpackages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Subdirectories">Conditional Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>
<br>
</div>

<h3 class="section">6.3 An Alternative Approach to Subdirectories</h3>

<p>If you've ever read Peter Miller's excellent paper,
<a href="http://www.pcug.org.au/%7Emillerp/rmch/recu-make-cons-harm.html">Recursive Make Considered Harmful</a>, the preceding sections on the use of
subdirectories will probably come as unwelcome advice.  For those who
haven't read the paper, Miller's main thesis is that recursive
<code>make</code> invocations are both slow and error-prone.

   </p><p>Automake provides sufficient cross-directory support <a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a> to enable you
to write a single <span class="file">Makefile.am</span> for a complex multi-directory
package.

   </p><p>By default an installable file specified in a subdirectory will have its
directory name stripped before installation.  For instance, in this
example, the header file will be installed as
<span class="file">$(includedir)/stdio.h</span>:

</p><pre class="example">     include_HEADERS = inc/stdio.h
</pre>
   <p><a name="index-nobase_005f-253"></a><a name="index-_0040code_007bnobase_005f_007d-prefix-254"></a><a name="index-Path-stripping_002c-avoiding-255"></a><a name="index-Avoiding-path-stripping-256"></a>
However, the <span class="samp">nobase_</span> prefix can be used to circumvent this path
stripping.  In this example, the header file will be installed as
<span class="file">$(includedir)/sys/types.h</span>:

</p><pre class="example">     nobase_include_HEADERS = sys/types.h
</pre>
   <p><a name="index-_0040code_007bnobase_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-257"></a><a name="index-_0040code_007bdist_005f_007d-and-_0040code_007bnobase_005f_007d-258"></a><a name="index-_0040code_007bnodist_005f_007d-and-_0040code_007bnobase_005f_007d-259"></a><a name="index-dist_005f-260"></a><a name="index-nodist_005f-261"></a>
<span class="samp">nobase_</span> should be specified first when used in conjunction with
either <span class="samp">dist_</span> or <span class="samp">nodist_</span> (see <a href="#Dist">Dist</a>).  For instance:

</p><pre class="example">     nobase_dist_pkgdata_DATA = images/vortex.pgm
</pre>
   <div class="node">
<p></p><hr>
<a name="Subpackages"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Alternative">Alternative</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>
<br>
</div>

<h3 class="section">6.4 Nesting Packages</h3>

<p><a name="index-Nesting-packages-262"></a><a name="index-Subpackages-263"></a><a name="index-AC_005fCONFIG_005fSUBDIRS-264"></a><a name="index-AC_005fCONFIG_005fAUX_005fDIR-265"></a>

   </p><p>In the GNU Build System, packages can be nested to arbitrary depth.
This means that a package can embedded other packages with their own
<span class="file">configure</span>, <span class="file">Makefile</span>s, etc.

   </p><p>These other packages should just appear as subdirectories of their
parent package.  They must be listed in <code>SUBDIRS</code> like other
ordinary directories.  However the subpackage's <span class="file">Makefile</span>s
should be output by its own <span class="file">configure</span> script, not by the
parent's <span class="file">configure</span>.  This is achieved using the
<code>AC_CONFIG_SUBDIRS</code> Autoconf macro (see <a href="http://sources.redhat.com/automake/autoconf.html#Subdirectories">AC_CONFIG_SUBDIRS (The Autoconf Manual)</a>).

   </p><p>Here is an example package for an <code>arm</code> program that links with
an <code>hand</code> library that is a nested package in subdirectory
<span class="file">hand/</span>.

   </p><p><code>arm</code>'s <span class="file">configure.ac</span>:

</p><pre class="example">     AC_INIT([arm], [1.0])
     AC_CONFIG_AUX_DIR([.])
     AM_INIT_AUTOMAKE
     AC_PROG_CC
     AC_CONFIG_FILES([Makefile])
     # Call hand's ./configure script recursively.
     AC_CONFIG_SUBDIRS([hand])
     AC_OUTPUT
</pre>
   <p><code>arm</code>'s <span class="file">Makefile.am</span>:

</p><pre class="example">     # Build the library in the hand subdirectory first.
     SUBDIRS = hand

     # Include hand's header when compiling this directory.
     AM_CPPFLAGS = -I$(srcdir)/hand

     bin_PROGRAMS = arm
     arm_SOURCES = arm.c
     # link with the hand library.
     arm_LDADD = hand/libhand.a
</pre>
   <p>Now here is <code>hand</code>'s <span class="file">hand/configure.ac</span>:

</p><pre class="example">     AC_INIT([hand], [1.2])
     AC_CONFIG_AUX_DIR([.])
     AM_INIT_AUTOMAKE
     AC_PROG_CC
     AC_PROG_RANLIB
     AC_CONFIG_FILES([Makefile])
     AC_OUTPUT
</pre>
   <p class="noindent">and its <span class="file">hand/Makefile.am</span>:

</p><pre class="example">     lib_LIBRARIES = libhand.a
     libhand_a_SOURCES = hand.c
</pre>
   <p>When <code>make dist</code> is run from the top-level directory it will
create an archive <span class="file">arm-1.0.tar.gz</span> that contains the <code>arm</code>
code as well as the <span class="file">hand</span> subdirectory.  This package can be
built and installed like any ordinary package, with the usual
<code>./configure &amp;&amp; make &amp;&amp; make install</code> sequence (the <code>hand</code>
subpackage will be built and installed by the process).

   </p><p>When <code>make dist</code> is run from the hand directory, it will create a
self-contained <span class="file">hand-1.2.tar.gz</span> archive.  So although it appears
to be embedded in another package, it can still be used separately.

   </p><p>The purpose of the <code>AC_CONFIG_AUX_DIR([.])</code> instruction is to
force Automake and Autoconf into search auxiliary script in the
current directory.  For instance this means that there will be two
copies of <span class="file">install-sh</span>: one in the top-level of the <code>arm</code>
package, and another one in the <span class="file">hand/</span> subdirectory for the
<code>hand</code> package.

   </p><p>The historical default is to search these auxiliary scripts in the
immediate parent and grand-parent directories.  So if the
<code>AC_CONFIG_AUX_DIR([.])</code> line was removed from
<span class="file">hand/configure.ac</span>, that subpackage would share the auxiliary
script of the <code>arm</code> package.  This may looks like a gain in size
(a few kilobytes), but it is actually a loss of modularity as the
<code>hand</code> subpackage is no longer self-contained (<code>make dist</code>
in the subdirectory will not work anymore).

   </p><p>Packages that do not use Automake need more work to be integrated this
way.  See <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>.

</p><div class="node">
<p></p><hr>
<a name="Programs"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Other-objects">Other objects</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directories">Directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">7 Building Programs and Libraries</h2>

<p>A large part of Automake's functionality is dedicated to making it easy
to build programs and libraries.

</p><ul class="menu">
<li><a accesskey="1" href="#A-Program">A Program</a>:                    Building a program
</li><li><a accesskey="2" href="#A-Library">A Library</a>:                    Building a library
</li><li><a accesskey="3" href="#A-Shared-Library">A Shared Library</a>:             Building a Libtool library
</li><li><a accesskey="4" href="#Program-and-Library-Variables">Program and Library Variables</a>:   Variables controlling program and
                                library builds
</li><li><a accesskey="5" href="#Default-_005fSOURCES">Default _SOURCES</a>:             Default source files
</li><li><a accesskey="6" href="#LIBOBJS">LIBOBJS</a>:                      Special handling for LIBOBJS and ALLOCA
</li><li><a accesskey="7" href="#Program-variables">Program variables</a>:            Variables used when building a program
</li><li><a accesskey="8" href="#Yacc-and-Lex">Yacc and Lex</a>:                 Yacc and Lex support
</li><li><a accesskey="9" href="#C_002b_002b-Support">C++ Support</a>:                  Compiling C++ sources
</li><li><a href="#Assembly-Support">Assembly Support</a>:             Compiling assembly sources
</li><li><a href="#Fortran-77-Support">Fortran 77 Support</a>:           Compiling Fortran 77 sources
</li><li><a href="#Fortran-9x-Support">Fortran 9x Support</a>:           Compiling Fortran 9x sources
</li><li><a href="#Java-Support">Java Support</a>:                 Compiling Java sources
</li><li><a href="#Support-for-Other-Languages">Support for Other Languages</a>:   Compiling other languages
</li><li><a href="#ANSI">ANSI</a>:                         Automatic de-ANSI-fication
</li><li><a href="#Dependencies">Dependencies</a>:                 Automatic dependency tracking
</li><li><a href="#EXEEXT">EXEEXT</a>:                       Support for executable extensions
</li></ul>

<div class="node">
<p></p><hr>
<a name="A-Program"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#A-Library">A Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.1 Building a program</h3>

<p>In order to build a program, you need to tell Automake which sources
are part of it, and which libraries it should be linked with.

   </p><p>This section also covers conditional compilation of sources or
programs.  Most of the comments about these also apply to libraries
(see <a href="#A-Library">A Library</a>) and libtool libraries (see <a href="#A-Shared-Library">A Shared Library</a>).

</p><ul class="menu">
<li><a accesskey="1" href="#Program-Sources">Program Sources</a>:              Defining program sources
</li><li><a accesskey="2" href="#Linking">Linking</a>:                      Linking with libraries or extra objects
</li><li><a accesskey="3" href="#Conditional-Sources">Conditional Sources</a>:          Handling conditional sources
</li><li><a accesskey="4" href="#Conditional-Programs">Conditional Programs</a>:         Building program conditionally
</li></ul>

<div class="node">
<p></p><hr>
<a name="Program-Sources"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Linking">Linking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>
<br>
</div>

<h4 class="subsection">7.1.1 Defining program sources</h4>

<p><a name="index-_0040code_007bPROGRAMS_007d_002c-_0040code_007bbindir_007d-266"></a><a name="index-_005fPROGRAMS-267"></a><a name="index-bin_005fPROGRAMS-268"></a><a name="index-sbin_005fPROGRAMS-269"></a><a name="index-libexec_005fPROGRAMS-270"></a><a name="index-pkglib_005fPROGRAMS-271"></a><a name="index-noinst_005fPROGRAMS-272"></a><a name="index-check_005fPROGRAMS-273"></a>
In a directory containing source that gets built into a program (as
opposed to a library or a script), the <span class="samp">PROGRAMS</span> primary is used.
Programs can be installed in <code>bindir</code>, <code>sbindir</code>,
<code>libexecdir</code>, <code>pkglibdir</code>, or not at all (<span class="samp">noinst</span>).
They can also be built only for <code>make check</code>, in which case the
prefix is <span class="samp">check</span>.

   </p><p>For instance:

</p><pre class="example">     bin_PROGRAMS = hello
</pre>
   <p>In this simple case, the resulting <span class="file">Makefile.in</span> will contain code
to generate a program named <code>hello</code>.

   </p><p>Associated with each program are several assisting variables which are
named after the program.  These variables are all optional, and have
reasonable defaults.  Each variable, its use, and default is spelled out
below; we use the &#8220;hello&#8221; example throughout.

   </p><p>The variable <code>hello_SOURCES</code> is used to specify which source files
get built into an executable:

</p><pre class="example">     hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h
</pre>
   <p>This causes each mentioned <span class="samp">.c</span> file to be compiled into the
corresponding <span class="samp">.o</span>.  Then all are linked to produce <span class="file">hello</span>.

   </p><p><a name="index-_0040code_007b_005fSOURCES_007d-primary_002c-defined-274"></a><a name="index-_0040code_007bSOURCES_007d-primary_002c-defined-275"></a><a name="index-Primary-variable_002c-_0040code_007bSOURCES_007d-276"></a><a name="index-_005fSOURCES-277"></a>
If <span class="samp">hello_SOURCES</span> is not specified, then it defaults to the single
file <span class="file">hello.c</span> (see <a href="#Default-_005fSOURCES">Default _SOURCES</a>).
<a name="index-_005fSOURCES-278"></a><a name="index-SOURCES-279"></a>
Multiple programs can be built in a single directory.  Multiple programs
can share a single source file, which must be listed in each
<span class="samp">_SOURCES</span> definition.

   </p><p><a name="index-Header-files-in-_0040code_007b_005fSOURCES_007d-280"></a><a name="index-_0040code_007b_005fSOURCES_007d-and-header-files-281"></a>
Header files listed in a <span class="samp">_SOURCES</span> definition will be included in
the distribution but otherwise ignored.  In case it isn't obvious, you
should not include the header file generated by <span class="file">configure</span> in a
<span class="samp">_SOURCES</span> variable; this file should not be distributed.  Lex
(<span class="samp">.l</span>) and Yacc (<span class="samp">.y</span>) files can also be listed; see <a href="#Yacc-and-Lex">Yacc and Lex</a>.

</p><div class="node">
<p></p><hr>
<a name="Linking"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Sources">Conditional Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-Sources">Program Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>
<br>
</div>

<h4 class="subsection">7.1.2 Linking the program</h4>

<p>If you need to link against libraries that are not found by
<code>configure</code>, you can use <code>LDADD</code> to do so.  This variable is
used to specify additional objects or libraries to link with; it is
inappropriate for specifying specific linker flags, you should use
<code>AM_LDFLAGS</code> for this purpose.
<a name="index-LDADD-282"></a><a name="index-AM_005fLDFLAGS-283"></a>
<a name="index-_0040code_007bprog_005fLDADD_007d_002c-defined-284"></a>
Sometimes, multiple programs are built in one directory but do not share
the same link-time requirements.  In this case, you can use the
<var>prog</var><span class="samp">_LDADD</span> variable (where <var>prog</var> is the name of the
program as it appears in some <span class="samp">_PROGRAMS</span> variable, and usually
written in lowercase) to override the global <code>LDADD</code>.  If this
variable exists for a given program, then that program is not linked
using <code>LDADD</code>.
<a name="index-maude_005fLDADD-285"></a>
For instance, in GNU cpio, <code>pax</code>, <code>cpio</code> and <code>mt</code> are
linked against the library <span class="file">libcpio.a</span>.  However, <code>rmt</code> is
built in the same directory, and has no such link requirement.  Also,
<code>mt</code> and <code>rmt</code> are only built on certain architectures.  Here
is what cpio's <span class="file">src/Makefile.am</span> looks like (abridged):

</p><pre class="example">     bin_PROGRAMS = cpio pax $(MT)
     libexec_PROGRAMS = $(RMT)
     EXTRA_PROGRAMS = mt rmt

     LDADD = ../lib/libcpio.a $(INTLLIBS)
     rmt_LDADD =

     cpio_SOURCES = ...
     pax_SOURCES = ...
     mt_SOURCES = ...
     rmt_SOURCES = ...
</pre>
   <p><a name="index-_0040code_007b_005fLDFLAGS_007d_002c-defined-286"></a><a name="index-maude_005fLDFLAGS-287"></a><var>prog</var><span class="samp">_LDADD</span> is inappropriate for passing program-specific
linker flags (except for <span class="samp">-l</span>, <span class="samp">-L</span>, <span class="samp">-dlopen</span> and
<span class="samp">-dlpreopen</span>).  So, use the <var>prog</var><span class="samp">_LDFLAGS</span> variable for
this purpose.

   </p><p><a name="index-_0040code_007b_005fDEPENDENCIES_007d_002c-defined-288"></a><a name="index-maude_005fDEPENDENCIES-289"></a>It is also occasionally useful to have a program depend on some other
target which is not actually part of that program.  This can be done
using the <var>prog</var><span class="samp">_DEPENDENCIES</span> variable.  Each program depends
on the contents of such a variable, but no further interpretation is
done.

   </p><p>If <var>prog</var><span class="samp">_DEPENDENCIES</span> is not supplied, it is computed by
Automake.  The automatically-assigned value is the contents of
<var>prog</var><span class="samp">_LDADD</span>, with most configure substitutions, <span class="samp">-l</span>,
<span class="samp">-L</span>, <span class="samp">-dlopen</span> and <span class="samp">-dlpreopen</span> options removed.  The
configure substitutions that are left in are only <span class="samp">$(LIBOBJS)</span> and
<span class="samp">$(ALLOCA)</span>; these are left because it is known that they will not
cause an invalid value for <var>prog</var><span class="samp">_DEPENDENCIES</span> to be
generated.

</p><div class="node">
<p></p><hr>
<a name="Conditional-Sources"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Programs">Conditional Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Linking">Linking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>
<br>
</div>

<h4 class="subsection">7.1.3 Conditional compilation of sources</h4>

<p>You can't put a configure substitution (e.g., <span class="samp">@FOO@</span> or
<span class="samp">$(FOO)</span> where <code>FOO</code> is defined via <code>AC_SUBST</code>) into a
<span class="samp">_SOURCES</span> variable.  The reason for this is a bit hard to
explain, but suffice to say that it simply won't work.  Automake will
give an error if you try to do this.

   </p><p>Fortunately there are two other ways to achieve the same result.  One is
to use configure substitutions in <code>_LDADD</code> variables, the other is
to use an Automake conditional.

</p><h5 class="subsubsection">7.1.3.1 Conditional compilation using <code>_LDADD</code> substitutions</h5>

<p><a name="index-_0040code_007bEXTRA_005fprog_005fSOURCES_007d_002c-defined-290"></a>
Automake must know all the source files that could possibly go into a
program, even if not all the files are built in every circumstance.  Any
files which are only conditionally built should be listed in the
appropriate <span class="samp">EXTRA_</span> variable.  For instance, if
<span class="file">hello-linux.c</span> or <span class="file">hello-generic.c</span> were conditionally included
in <code>hello</code>, the <span class="file">Makefile.am</span> would contain:

</p><pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = hello-common.c
     EXTRA_hello_SOURCES = hello-linux.c hello-generic.c
     hello_LDADD = $(HELLO_SYSTEM)
     hello_DEPENDENCIES = $(HELLO_SYSTEM)
</pre>
   <p class="noindent">You can then setup the <code>$(HELLO_SYSTEM)</code> substitution from
<span class="file">configure.ac</span>:

</p><pre class="example">     ...
     case $host in
       *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;;
       *)       HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;;
     esac
     AC_SUBST([HELLO_SYSTEM])
     ...
</pre>
   <p>In this case, <code>HELLO_SYSTEM</code> should be replaced by
<span class="file">hello-linux.o</span> or <span class="file">hello-generic.o</span>, and added to
<code>hello_DEPENDENCIES</code> and <code>hello_LDADD</code> in order to be built
and linked in.

</p><h5 class="subsubsection">7.1.3.2 Conditional compilation using Automake conditionals</h5>

<p>An often simpler way to compile source files conditionally is to use
Automake conditionals.  For instance, you could use this
<span class="file">Makefile.am</span> construct to build the same <span class="file">hello</span> example:

</p><pre class="example">     bin_PROGRAMS = hello
     if LINUX
     hello_SOURCES = hello-linux.c hello-common.c
     else
     hello_SOURCES = hello-generic.c hello-common.c
     endif
</pre>
   <p>In this case, your <span class="file">configure.ac</span> should setup the <code>LINUX</code>
conditional using <code>AM_CONDITIONAL</code> (see <a href="#Conditionals">Conditionals</a>).

   </p><p>When using conditionals like this you don't need to use the
<span class="samp">EXTRA_</span> variable, because Automake will examine the contents of
each variable to construct the complete list of source files.

   </p><p>If your program uses a lot of files, you will probably prefer a
conditional <code>+=</code>.

</p><pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = hello-common.c
     if LINUX
     hello_SOURCES += hello-linux.c
     else
     hello_SOURCES += hello-generic.c
     endif
</pre>
   <div class="node">
<p></p><hr>
<a name="Conditional-Programs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Sources">Conditional Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>
<br>
</div>

<h4 class="subsection">7.1.4 Conditional compilation of programs</h4>

<p><a name="index-Conditional-programs-291"></a><a name="index-Programs_002c-conditional-292"></a>
Sometimes it is useful to determine the programs that are to be built
at configure time.  For instance, GNU <code>cpio</code> only builds
<code>mt</code> and <code>rmt</code> under special circumstances.  The means to
achieve conditional compilation of programs are the same you can use
to compile source files conditionally: substitutions or conditionals.

</p><h5 class="subsubsection">7.1.4.1 Conditional programs using <code>configure</code> substitutions</h5>

<p><a name="index-EXTRA_005fPROGRAMS-293"></a><a name="index-_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-294"></a>In this case, you must notify Automake of all the programs that can
possibly be built, but at the same time cause the generated
<span class="file">Makefile.in</span> to use the programs specified by <code>configure</code>.
This is done by having <code>configure</code> substitute values into each
<span class="samp">_PROGRAMS</span> definition, while listing all optionally built programs
in <code>EXTRA_PROGRAMS</code>.

</p><pre class="example">     bin_PROGRAMS = cpio pax $(MT)
     libexec_PROGRAMS = $(RMT)
     EXTRA_PROGRAMS = mt rmt
</pre>
   <p>As explained in <a href="#EXEEXT">EXEEXT</a>, Automake will rewrite
<code>bin_PROGRAMS</code>, <code>libexec_PROGRAMS</code>, and
<code>EXTRA_PROGRAMS</code>, appending <code>$(EXEEXT)</code> to each binary.
Obviously it cannot rewrite values obtained at run-time through
<code>configure</code> substitutions, therefore you should take care of
appending <code>$(EXEEXT)</code> yourself, as in <code>AC_SUBST([MT],
['mt${EXEEXT}'])</code>.

</p><h5 class="subsubsection">7.1.4.2 Conditional programs using Automake conditionals</h5>

<p>You can also use Automake conditionals (see <a href="#Conditionals">Conditionals</a>) to
select programs to be built.  In this case you don't have to worry
about <code>$(EXEEXT)</code> or <code>EXTRA_PROGRAMS</code>.

</p><pre class="example">     bin_PROGRAMS = cpio pax
     if WANT_MT
       bin_PROGRAMS += mt
     endif
     if WANT_RMT
       libexec_PROGRAMS = rmt
     endif
</pre>
   <div class="node">
<p></p><hr>
<a name="A-Library"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#A-Shared-Library">A Shared Library</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Program">A Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.2 Building a library</h3>

<p><a name="index-_0040code_007b_005fLIBRARIES_007d-primary_002c-defined-295"></a><a name="index-_0040code_007bLIBRARIES_007d-primary_002c-defined-296"></a><a name="index-Primary-variable_002c-_0040code_007bLIBRARIES_007d-297"></a><a name="index-_005fLIBRARIES-298"></a>
<a name="index-lib_005fLIBRARIES-299"></a><a name="index-pkglib_005fLIBRARIES-300"></a><a name="index-noinst_005fLIBRARIES-301"></a>
Building a library is much like building a program.  In this case, the
name of the primary is <span class="samp">LIBRARIES</span>.  Libraries can be installed in
<code>libdir</code> or <code>pkglibdir</code>.

   </p><p>See <a href="#A-Shared-Library">A Shared Library</a>, for information on how to build shared
libraries using libtool and the <span class="samp">LTLIBRARIES</span> primary.

   </p><p>Each <span class="samp">_LIBRARIES</span> variable is a list of the libraries to be built.
For instance to create a library named <span class="file">libcpio.a</span>, but not install
it, you would write:

</p><pre class="example">     noinst_LIBRARIES = libcpio.a
</pre>
   <p>The sources that go into a library are determined exactly as they are
for programs, via the <span class="samp">_SOURCES</span> variables.  Note that the library
name is canonicalized (see <a href="#Canonicalization">Canonicalization</a>), so the <span class="samp">_SOURCES</span>
variable corresponding to <span class="file">liblob.a</span> is <span class="samp">liblob_a_SOURCES</span>,
not <span class="samp">liblob.a_SOURCES</span>.

   </p><p><a name="index-maude_005fLIBADD-302"></a>Extra objects can be added to a library using the
<var>library</var><span class="samp">_LIBADD</span> variable.  This should be used for objects
determined by <code>configure</code>.  Again from <code>cpio</code>:

</p><pre class="example">     libcpio_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre>
   <p>In addition, sources for extra objects that will not exist until
configure-time must be added to the <code>BUILT_SOURCES</code> variable
(see <a href="#Sources">Sources</a>).

   </p><p>Building a static library is done by compiling all object files, then
by invoking <code>$(AR) $(ARFLAGS)</code> followed by the name of the
library and the list of objects, and finally by calling
<code>$(RANLIB)</code> on that library.  You should call
<code>AC_PROG_RANLIB</code> from your <span class="file">configure.ac</span> to define
<code>RANLIB</code> (Automake will complain otherwise).  <code>AR</code> and
<code>ARFLAGS</code> default to <code>ar</code> and <code>cru</code> respectively; you
can override these two variables my setting them in your
<span class="file">Makefile.am</span>, by <code>AC_SUBST</code>ing them from your
<span class="file">configure.ac</span>, or by defining a per-library <code>maude_AR</code>
variable (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

</p><div class="node">
<p></p><hr>
<a name="A-Shared-Library"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Program-and-Library-Variables">Program and Library Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Library">A Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.3 Building a Shared Library</h3>

<p><a name="index-Shared-libraries_002c-support-for-303"></a>
Building shared libraries portably is a relatively complex matter.
For this reason, GNU Libtool (see <a href="http://sources.redhat.com/automake/libtool.html#Top">Introduction (The Libtool Manual)</a>) was created to help build shared libraries in a
platform-independent way.

</p><ul class="menu">
<li><a accesskey="1" href="#Libtool-Concept">Libtool Concept</a>:              Introducing Libtool
</li><li><a accesskey="2" href="#Libtool-Libraries">Libtool Libraries</a>:            Declaring Libtool Libraries
</li><li><a accesskey="3" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>:   Building Libtool Libraries Conditionally
</li><li><a accesskey="4" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>:   Choosing Library Sources Conditionally
</li><li><a accesskey="5" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>:   Building Convenience Libtool Libraries
</li><li><a accesskey="6" href="#Libtool-Modules">Libtool Modules</a>:              Building Libtool Modules
</li><li><a accesskey="7" href="#Libtool-Flags">Libtool Flags</a>:                Using _LIBADD and _LDFLAGS
</li><li><a accesskey="8" href="#LTLIBOBJS">LTLIBOBJS</a>:                    Using $(LTLIBOBJS) and $(LTALLOCA)
</li><li><a accesskey="9" href="#Libtool-Issues">Libtool Issues</a>:               Common Issues Related to Libtool's Use
</li></ul>

<div class="node">
<p></p><hr>
<a name="Libtool-Concept"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Libraries">Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.1 The Libtool Concept</h4>

<p><a name="index-_0040command_007blibtool_007d_002c-introduction-304"></a><a name="index-libtool-library_002c-definition-305"></a><a name="index-suffix-_0040file_007b_002ela_007d_002c-defined-306"></a><a name="index-_0040file_007b_002ela_007d-suffix_002c-defined-307"></a>
Libtool abstracts shared and static libraries into a unified concept
henceforth called <dfn>libtool libraries</dfn>.  Libtool libraries are
files using the <span class="file">.la</span> suffix, and can designate a static library,
a shared library, or maybe both.  Their exact nature cannot be
determined until <span class="file">./configure</span> is run: not all platforms support
all kinds of libraries, and users can explicitly select which
libraries should be built.  (However the package's maintainers can
tune the default, see <a href="http://sources.redhat.com/automake/libtool.html#AC_005fPROG_005fLIBTOOL">The <code>AC_PROG_LIBTOOL</code> macro (The Libtool Manual)</a>.)

   </p><p><a name="index-suffix-_0040file_007b_002elo_007d_002c-defined-308"></a>Because object files for shared and static libraries must be compiled
differently, libtool is also used during compilation.  Object files
built by libtool are called <dfn>libtool objects</dfn>: these are files
using the <span class="file">.lo</span> suffix.  Libtool libraries are built from these
libtool objects.

   </p><p>You should not assume anything about the structure of <span class="file">.la</span> or
<span class="file">.lo</span> files and how libtool constructs them: this is libtool's
concern, and the last thing one wants is to learn about libtool's
guts.  However the existence of these files matters, because they are
used as targets and dependencies in <span class="file">Makefile</span>s rules when
building libtool libraries.  There are situations where you may have
to refer to these, for instance when expressing dependencies for
building source files conditionally (see <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>).

   </p><p><a name="index-_0040file_007blibltdl_007d_002c-introduction-309"></a>
People considering writing a plug-in system, with dynamically loaded
modules, should look into <span class="file">libltdl</span>: libtool's dlopening library
(see <a href="http://sources.redhat.com/automake/libtool.html#Using-libltdl">Using libltdl (The Libtool Manual)</a>).
This offers a portable dlopening facility to load libtool libraries
dynamically, and can also achieve static linking where unavoidable.

   </p><p>Before we discuss how to use libtool with Automake in details, it
should be noted that the libtool manual also has a section about how
to use Automake with libtool (see <a href="http://sources.redhat.com/automake/libtool.html#Using-Automake">Using Automake with Libtool (The Libtool Manual)</a>).

</p><div class="node">
<p></p><hr>
<a name="Libtool-Libraries"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Concept">Libtool Concept</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.2 Building Libtool Libraries</h4>

<p><a name="index-_0040code_007b_005fLTLIBRARIES_007d-primary_002c-defined-310"></a><a name="index-_0040code_007bLTLIBRARIES_007d-primary_002c-defined-311"></a><a name="index-Primary-variable_002c-_0040code_007bLTLIBRARIES_007d-312"></a><a name="index-Example-of-shared-libraries-313"></a><a name="index-lib_005fLTLIBRARIES-314"></a><a name="index-pkglib_005fLTLIBRARIES-315"></a><a name="index-_005fLTLIBRARIES-316"></a>
Automake uses libtool to build libraries declared with the
<span class="samp">LTLIBRARIES</span> primary.  Each <span class="samp">_LTLIBRARIES</span> variable is a
list of libtool libraries to build.  For instance, to create a libtool
library named <span class="file">libgettext.la</span>, and install it in <span class="samp">libdir</span>,
write:

</p><pre class="example">     lib_LTLIBRARIES = libgettext.la
     libgettext_la_SOURCES = gettext.c gettext.h ...
</pre>
   <p>Automake predefines the variable <span class="samp">pkglibdir</span>, so you can use
<code>pkglib_LTLIBRARIES</code> to install libraries in
<code>$(libdir)/@PACKAGE@/</code>.

</p><div class="node">
<p></p><hr>
<a name="Conditional-Libtool-Libraries"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Libraries">Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.3 Building Libtool Libraries Conditionally</h4>

<p><a name="index-libtool-libraries_002c-conditional-317"></a><a name="index-conditional-libtool-libraries-318"></a>
Like conditional programs (see <a href="#Conditional-Programs">Conditional Programs</a>), there are
two main ways to build conditional libraries: using Automake
conditionals or using Autoconf <code>AC_SUBST</code>itutions.

   </p><p>The important implementation detail you have to be aware of is that
the place where a library will be installed matters to libtool: it
needs to be indicated <em>at link-time</em> using the <code>-rpath</code>
option.

   </p><p>For libraries whose destination directory is known when Automake runs,
Automake will automatically supply the appropriate <span class="samp">-rpath</span>
option to libtool. This is the case for libraries listed explicitly in
some installable <code>_LTLIBRARIES</code> variables such as
<code>lib_LTLIBRARIES</code>.

   </p><p>However, for libraries determined at configure time (and thus
mentioned in <code>EXTRA_LTLIBRARIES</code>), Automake does not know the
final installation directory.  For such libraries you must add the
<span class="samp">-rpath</span> option to the appropriate <span class="samp">_LDFLAGS</span> variable by
hand.

   </p><p>The examples below illustrate the differences between these two methods.

   </p><p>Here is an example where <code>$(WANTEDLIBS)</code> is an <code>AC_SUBST</code>ed
variable set at <span class="file">./configure</span>-time to either <span class="file">libfoo.la</span>,
<span class="file">libbar.la</span>, both, or none.  Although <code>$(WANTEDLIBS)</code>
appears in the <code>lib_LTLIBRARIES</code>, Automake cannot guess it
relates to <span class="file">libfoo.la</span> or <span class="file">libbar.la</span> by the time it creates
the link rule for these two libraries.  Therefore the <code>-rpath</code>
argument must be explicitly supplied.

</p><pre class="example">     EXTRA_LTLIBRARIES = libfoo.la libbar.la
     lib_LTLIBRARIES = $(WANTEDLIBS)
     libfoo_la_SOURCES = foo.c ...
     libfoo_la_LDFLAGS = -rpath '$(libdir)'
     libbar_la_SOURCES = bar.c ...
     libbar_la_LDFLAGS = -rpath '$(libdir)'
</pre>
   <p>Here is how the same <span class="file">Makefile.am</span> would look using Automake
conditionals named <code>WANT_LIBFOO</code> and <code>WANT_LIBBAR</code>.  Now
Automake is able to compute the <code>-rpath</code> setting itself, because
it's clear that both libraries will end up in <code>$(libdir)</code> if they
are installed.

</p><pre class="example">     lib_LTLIBRARIES =
     if WANT_LIBFOO
     lib_LTLIBRARIES += libfoo.la
     endif
     if WANT_LIBBAR
     lib_LTLIBRARIES += libbar.la
     endif
     libfoo_la_SOURCES = foo.c ...
     libbar_la_SOURCES = bar.c ...
</pre>
   <div class="node">
<p></p><hr>
<a name="Conditional-Libtool-Sources"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.4 Libtool Libraries with Conditional Sources</h4>

<p>Conditional compilation of sources in a library can be achieved in the
same way as conditional compilation of sources in a program
(see <a href="#Conditional-Sources">Conditional Sources</a>).  The only difference is that
<code>_LIBADD</code> should be used instead of <code>_LDADD</code> and that it
should mention libtool objects (<span class="file">.lo</span> files).

   </p><p>So, to mimic the <span class="file">hello</span> example from <a href="#Conditional-Sources">Conditional Sources</a>,
we could build a <span class="file">libhello.la</span> library using either
<span class="file">hello-linux.c</span> or <span class="file">hello-generic.c</span> with the following
<span class="file">Makefile.am</span>.

</p><pre class="example">     lib_LTLIBRARIES = libhello.la
     libhello_la_SOURCES = hello-common.c
     EXTRA_libhello_la_SOURCES = hello-linux.c hello-generic.c
     libhello_la_LIBADD = $(HELLO_SYSTEM)
     libhello_la_DEPENDENCIES = $(HELLO_SYSTEM)
</pre>
   <p class="noindent">And make sure <code>$(HELLO_SYSTEM)</code> is set to either
<span class="file">hello-linux.lo</span> or <span class="file">hello-generic.lo</span> in
<span class="file">./configure</span>.

   </p><p>Or we could simply use an Automake conditional as follows.

</p><pre class="example">     lib_LTLIBRARIES = libhello.la
     libhello_la_SOURCES = hello-common.c
     if LINUX
     libhello_la_SOURCES += hello-linux.c
     else
     libhello_la_SOURCES += hello-generic.c
     endif
</pre>
   <div class="node">
<p></p><hr>
<a name="Libtool-Convenience-Libraries"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Modules">Libtool Modules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.5 Libtool Convenience Libraries</h4>

<p><a name="index-convenience-libraries_002c-libtool-319"></a><a name="index-libtool-convenience-libraries-320"></a><a name="index-noinst_005fLTLIBRARIES-321"></a><a name="index-check_005fLTLIBRARIES-322"></a>
Sometimes you want to build libtool libraries which should not be
installed.  These are called <dfn>libtool convenience libraries</dfn> and
are typically used to encapsulate many sublibraries, later gathered
into one big installed library.

   </p><p>Libtool convenience libraries are declared by
<code>noinst_LTLIBRARIES</code>, <code>check_LTLIBRARIES</code>, or even
<code>EXTRA_LTLIBRARIES</code>.  Unlike installed libtool libraries they do
not need an <code>-rpath</code> flag at link time (actually this is the only
difference).

   </p><p>Convenience libraries listed in <code>noinst_LTLIBRARIES</code> are always
built.  Those listed in <code>check_LTLIBRARIES</code> are built only upon
<code>make check</code>.  Finally, libraries listed in
<code>EXTRA_LTLIBRARIES</code> are never built explicitly: Automake outputs
rules to build them, but if the library does not appear as a Makefile
dependency anywhere it won't be built (this is why
<code>EXTRA_LTLIBRARIES</code> is used for conditional compilation).

   </p><p>Here is a sample setup merging libtool convenience libraries from
subdirectories into one main <span class="file">libtop.la</span> library.

</p><pre class="example">     # -- Top-level Makefile.am --
     SUBDIRS = sub1 sub2 ...
     lib_LTLIBRARIES = libtop.la
     libtop_la_SOURCES =
     libtop_la_LIBADD = \
       sub1/libsub1.la \
       sub2/libsub2.la \
       ...

     # -- sub1/Makefile.am --
     noinst_LTLIBRARIES = libsub1.la
     libsub1_la_SOURCES = ...

     # -- sub2/Makefile.am --
     # showing nested convenience libraries
     SUBDIRS = sub2.1 sub2.2 ...
     noinst_LTLIBRARIES = libsub2.la
     libsub2_la_SOURCES =
     libsub2_la_LIBADD = \
       sub21/libsub21.la \
       sub22/libsub22.la \
       ...
</pre>
   <p>When using such setup, beware that <span class="command">automake</span> will assume
<span class="file">libtop.la</span> is to be linked with the C linker.  This is because
<code>libtop_la_SOURCES</code> is empty, so <span class="command">automake</span> picks C as
default language.  If <code>libtop_la_SOURCES</code> was not empty,
<span class="command">automake</span> would select the linker as explained in <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>.

   </p><p>If one of the sublibraries contains non-C source, it is important that
the appropriate linker be chosen.  One way to achieve this is to
pretend that there is such a non-C file among the sources of the
library, thus forcing <span class="command">automake</span> to select the appropriate
linker.  Here is the top-level <span class="file">Makefile</span> of our example updated
to force C++ linking.

</p><pre class="example">     SUBDIRS = sub1 sub2 ...
     lib_LTLIBRARIES = libtop.la
     libtop_la_SOURCES =
     # Dummy C++ source to cause C++ linking.
     nodist_EXTRA_libtop_la_SOURCES = dummy.cxx
     libtop_la_LIBADD = \
       sub1/libsub1.la \
       sub2/libsub2.la \
       ...
</pre>
   <p><code>EXTRA_*_SOURCES</code> variables are used to keep track of source
files that might be compiled (this is mostly useful when doing
conditional compilation using <code>AC_SUBST</code>, see <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>), and the <code>nodist_</code> prefix means the listed
sources are not to be distributed (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).  In effect the file <span class="file">dummy.cxx</span> does not need to
exist in the source tree.  Of course if you have some real source file
to list in <code>libtop_la_SOURCES</code> there is no point in cheating with
<code>nodist_EXTRA_libtop_la_SOURCES</code>.

</p><div class="node">
<p></p><hr>
<a name="Libtool-Modules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Flags">Libtool Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.6 Libtool Modules</h4>

<p><a name="index-modules_002c-libtool-323"></a><a name="index-libtool-modules-324"></a><a name="index-_0040code_007b_002dmodule_007d_002c-libtool-325"></a>
These are libtool libraries meant to be dlopened.  They are
indicated to libtool by passing <code>-module</code> at link-time.

</p><pre class="example">     pkglib_LTLIBRARIES = mymodule.la
     mymodule_la_SOURCES = doit.c
     mymodule_la_LDFLAGS = -module
</pre>
   <p>Ordinarily, Automake requires that a library's name starts with
<span class="samp">lib</span>.  However, when building a dynamically loadable module you
might wish to use a "nonstandard" name.  Automake will not complain
about such nonstandard name if it knows the library being built is a
libtool module, i.e., if <span class="samp">-module</span> explicitly appears in the
library's <code>_LDFLAGS</code> variable (or in the common <code>AM_LDFLAGS</code>
variable when no per-library <code>_LDFLAGS</code> variable is defined).

   </p><p>As always, <code>AC_SUBST</code> variables are black boxes to Automake since
their values are not yet known when <span class="command">automake</span> is run.
Therefore if <code>-module</code> is set via such a variable, Automake
cannot notice it and will proceed as if the library was an ordinary
libtool library, with strict naming.

   </p><p>If <span class="samp">mymodule_la_SOURCES</span> is not specified, then it defaults to
the single file <span class="file">mymodule.c</span> (see <a href="#Default-_005fSOURCES">Default _SOURCES</a>).

</p><div class="node">
<p></p><hr>
<a name="Libtool-Flags"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#LTLIBOBJS">LTLIBOBJS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Modules">Libtool Modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.7 _LIBADD and _LDFLAGS</h4>

<p><a name="index-_0040code_007b_005fLIBADD_007d_002c-libtool-326"></a><a name="index-_0040code_007b_005fLDFLAGS_007d_002c-libtool-327"></a>
As shown in previous sections, the <var>library</var><span class="samp">_LIBADD</span>
variable should be used to list extra libtool objects (<span class="file">.lo</span>
files) or libtool libraries (<span class="file">.la</span>) to add to <var>library</var>.

   </p><p>The <var>library</var><span class="samp">_LDFLAGS</span> variable is the place to list
additional libtool flags, such as <span class="samp">-version-info</span>,
<span class="samp">-static</span>, and a lot more.  See <a href="http://sources.redhat.com/automake/libtool.html#Link-mode">Link mode (The Libtool Manual)</a>.

</p><div class="node">
<p></p><hr>
<a name="LTLIBOBJS"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Issues">Libtool Issues</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Flags">Libtool Flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.8 <code>LTLIBOBJS</code> and <code>LTALLOCA</code></h4>

<p><a name="index-_0040code_007bLTLIBOBJS_007d_002c-special-handling-328"></a><a name="index-_0040code_007bLIBOBJS_007d_002c-and-Libtool-329"></a><a name="index-_0040code_007bLTALLOCA_007d_002c-special-handling-330"></a><a name="index-_0040code_007bALLOCA_007d_002c-and-Libtool-331"></a><a name="index-LTLIBOBJS-332"></a><a name="index-LIBOBJS-333"></a><a name="index-LTALLOCA-334"></a><a name="index-ALLOCA-335"></a><a name="index-AC_005fLIBOBJ-336"></a>
Where an ordinary library might include <code>$(LIBOBJS)</code> or
<code>$(ALLOCA)</code> (see <a href="#LIBOBJS">LIBOBJS</a>), a libtool library must use
<code>$(LTLIBOBJS)</code> or <code>$(LTALLOCA)</code>.  This is required because
the object files that libtool operates on do not necessarily end in
<span class="file">.o</span>.

   </p><p>Nowadays, the computation of <code>LTLIBOBJS</code> from <code>LIBOBJS</code> is
performed automatically by Autoconf (see <a href="http://sources.redhat.com/automake/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code> (The Autoconf Manual)</a>).

</p><div class="node">
<p></p><hr>
<a name="Libtool-Issues"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#LTLIBOBJS">LTLIBOBJS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>
<br>
</div>

<h4 class="subsection">7.3.9 Common Issues Related to Libtool's Use</h4>

<h5 class="subsubsection">7.3.9.1 <code>required file `./ltmain.sh' not found</code></h5>

<p><a name="index-_0040file_007bltmain_002esh_007d-not-found-337"></a><a name="index-_0040command_007blibtoolize_007d_002c-no-longer-run-by-_0040command_007bautomake_007d-338"></a><a name="index-_0040command_007blibtoolize_007d-and-_0040command_007bautoreconf_007d-339"></a><a name="index-_0040command_007bautoreconf_007d-and-_0040command_007blibtoolize_007d-340"></a><a name="index-_0040file_007bbootstrap_002esh_007d-and-_0040command_007bautoreconf_007d-341"></a><a name="index-_0040file_007bautogen_002esh_007d-and-_0040command_007bautoreconf_007d-342"></a>
Libtool comes with a tool called <span class="command">libtoolize</span> that will
install libtool's supporting files into a package.  Running this
command will install <span class="file">ltmain.sh</span>.  You should execute it before
<span class="command">aclocal</span> and <span class="command">automake</span>.

   </p><p>People upgrading old packages to newer autotools are likely to face
this issue because older Automake versions used to call
<span class="command">libtoolize</span>.  Therefore old build scripts do not call
<span class="command">libtoolize</span>.

   </p><p>Since Automake 1.6, it has been decided that running
<span class="command">libtoolize</span> was none of Automake's business.  Instead, that
functionality has been moved into the <span class="command">autoreconf</span> command
(see <a href="http://sources.redhat.com/automake/autoconf.html#autoreconf-Invocation">Using <span class="command">autoreconf</span> (The Autoconf Manual)</a>).  If you do not want to remember what to run and
when, just learn the <span class="command">autoreconf</span> command.  Hopefully,
replacing existing <span class="file">bootstrap.sh</span> or <span class="file">autogen.sh</span> scripts by
a call to <span class="command">autoreconf</span> should also free you from any similar
incompatible change in the future.

</p><h5 class="subsubsection">7.3.9.2 Objects <code>created with both libtool and without</code></h5>

<p>Sometimes, the same source file is used both to build a libtool
library and to build another non-libtool target (be it a program or
another library).

   </p><p>Let's consider the following <span class="file">Makefile.am</span>.

</p><pre class="example">     bin_PROGRAMS = prog
     prog_SOURCES = prog.c foo.c ...

     lib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES = foo.c ...
</pre>
   <p class="noindent">(In this trivial case the issue could be avoided by linking
<span class="file">libfoo.la</span> with <span class="file">prog</span> instead of listing <span class="file">foo.c</span> in
<code>prog_SOURCES</code>.  But let's assume we really want to keep
<span class="file">prog</span> and <span class="file">libfoo.la</span> separate.)

   </p><p>Technically, it means that we should build <span class="file">foo.$(OBJEXT)</span> for
<span class="file">prog</span>, and <span class="file">foo.lo</span> for <span class="file">libfoo.la</span>.  The problem is
that in the course of creating <span class="file">foo.lo</span>, libtool may erase (or
replace) <span class="file">foo.$(OBJEXT)</span> &#8211; and this cannot be avoided.

   </p><p>Therefore, when Automake detects this situation it will complain
with a message such as
</p><pre class="example">     object `foo.$(OBJEXT)' created both with libtool and without
</pre>
   <p>A workaround for this issue is to ensure that these two objects get
different basenames.  As explained in <a href="#renamed-objects">renamed objects</a>, this
happens automatically when per-targets flags are used.

</p><pre class="example">     bin_PROGRAMS = prog
     prog_SOURCES = prog.c foo.c ...
     prog_CFLAGS = $(AM_CFLAGS)

     lib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES = foo.c ...
</pre>
   <p class="noindent">Adding <code>prog_CFLAGS = $(AM_CFLAGS)</code> is almost a no-op, because
when the <code>prog_CFLAGS</code> is defined, it is used instead of
<code>AM_CFLAGS</code>.  However as a side effect it will cause
<span class="file">prog.c</span> and <span class="file">foo.c</span> to be compiled as
<span class="file">prog-prog.$(OBJEXT)</span> and <span class="file">prog-foo.$(OBJEXT)</span> which solves
the issue.

</p><div class="node">
<p></p><hr>
<a name="Program-and-Library-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Default-_005fSOURCES">Default _SOURCES</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Shared-Library">A Shared Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.4 Program and Library Variables</h3>

<p>Associated with each program are a collection of variables which can be
used to modify how that program is built.  There is a similar list of
such variables for each library.  The canonical name of the program (or
library) is used as a base for naming these variables.

   </p><p>In the list below, we use the name &#8220;maude&#8221; to refer to the program or
library.  In your <span class="file">Makefile.am</span> you would replace this with the
canonical name of your program.  This list also refers to &#8220;maude&#8221; as a
program, but in general the same rules apply for both static and dynamic
libraries; the documentation below notes situations where programs and
libraries differ.

     </p><dl>
<dt><span class="samp">maude_SOURCES</span><a name="index-maude_005fSOURCES-343"></a></dt><dd>This variable, if it exists, lists all the source files which are
compiled to build the program.  These files are added to the
distribution by default.  When building the program, Automake will cause
each source file to be compiled to a single <span class="file">.o</span> file (or
<span class="file">.lo</span> when using libtool).  Normally these object files are named
after the source file, but other factors can change this.  If a file in
the <span class="samp">_SOURCES</span> variable has an unrecognized extension, Automake
will do one of two things with it.  If a suffix rule exists for turning
files with the unrecognized extension into <span class="file">.o</span> files, then
automake will treat this file as it will any other source file
(see <a href="#Support-for-Other-Languages">Support for Other Languages</a>).  Otherwise, the file will be
ignored as though it were a header file.

     <p>The prefixes <span class="samp">dist_</span> and <span class="samp">nodist_</span> can be used to control
whether files listed in a <span class="samp">_SOURCES</span> variable are distributed.
<span class="samp">dist_</span> is redundant, as sources are distributed by default, but it
can be specified for clarity if desired.

     </p><p>It is possible to have both <span class="samp">dist_</span> and <span class="samp">nodist_</span> variants of
a given <span class="samp">_SOURCES</span> variable at once; this lets you easily
distribute some files and not others, for instance:

     </p><pre class="example">          nodist_maude_SOURCES = nodist.c
          dist_maude_SOURCES = dist-me.c
     </pre>
     <p>By default the output file (on Unix systems, the <span class="file">.o</span> file) will be
put into the current build directory.  However, if the option
<code>subdir-objects</code> is in effect in the current directory then the
<span class="file">.o</span> file will be put into the subdirectory named after the source
file.  For instance, with <code>subdir-objects</code> enabled,
<span class="file">sub/dir/file.c</span> will be compiled to <span class="file">sub/dir/file.o</span>.  Some
people prefer this mode of operation.  You can specify
<code>subdir-objects</code> in <code>AUTOMAKE_OPTIONS</code> (see <a href="#Options">Options</a>).
<a name="index-Subdirectory_002c-objects-in-344"></a><a name="index-Objects-in-subdirectory-345"></a>

     <br></p></dd><dt><span class="samp">EXTRA_maude_SOURCES</span><a name="index-EXTRA_005fmaude_005fSOURCES-346"></a></dt><dd>Automake needs to know the list of files you intend to compile
<em>statically</em>.  For one thing, this is the only way Automake has of
knowing what sort of language support a given <span class="file">Makefile.in</span>
requires.  <a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a>  This means that, for example, you can't put a
configure substitution like <span class="samp">@my_sources@</span> into a <span class="samp">_SOURCES</span>
variable.  If you intend to conditionally compile source files and use
<span class="file">configure</span> to substitute the appropriate object names into, e.g.,
<span class="samp">_LDADD</span> (see below), then you should list the corresponding source
files in the <span class="samp">EXTRA_</span> variable.

     <p>This variable also supports <span class="samp">dist_</span> and <span class="samp">nodist_</span> prefixes,
e.g., <span class="samp">nodist_EXTRA_maude_SOURCES</span>.

     <br></p></dd><dt><span class="samp">maude_AR</span><a name="index-maude_005fAR-347"></a></dt><dd>A static library is created by default by invoking <code>$(AR)
$(ARFLAGS)</code> followed by the name of the library and then the objects
being put into the library.  You can override this by setting the
<span class="samp">_AR</span> variable.  This is usually used with C++; some C++
compilers require a special invocation in order to instantiate all the
templates which should go into a library.  For instance, the SGI C++
compiler likes this variable set like so:
     <pre class="example">          libmaude_a_AR = $(CXX) -ar -o
     </pre>
     <br></dd><dt><span class="samp">maude_LIBADD</span><a name="index-maude_005fLIBADD-348"></a></dt><dd>Extra objects can be added to a <em>library</em> using the <span class="samp">_LIBADD</span>
variable.  For instance this should be used for objects determined by
<code>configure</code> (see <a href="#A-Library">A Library</a>).

     <br></dd><dt><span class="samp">maude_LDADD</span><a name="index-maude_005fLDADD-349"></a></dt><dd>Extra objects can be added to a <em>program</em> by listing them in the
<span class="samp">_LDADD</span> variable.  For instance this should be used for objects
determined by <code>configure</code> (see <a href="#Linking">Linking</a>).

     <p><span class="samp">_LDADD</span> and <span class="samp">_LIBADD</span> are inappropriate for passing
program-specific linker flags (except for <span class="samp">-l</span>, <span class="samp">-L</span>,
<span class="samp">-dlopen</span> and <span class="samp">-dlpreopen</span>).  Use the <span class="samp">_LDFLAGS</span> variable
for this purpose.

     </p><p>For instance, if your <span class="file">configure.ac</span> uses <code>AC_PATH_XTRA</code>, you
could link your program against the X libraries like so:

     </p><pre class="example">          maude_LDADD = $(X_PRE_LIBS) $(X_LIBS) $(X_EXTRA_LIBS)
     </pre>
     <br></dd><dt><span class="samp">maude_LDFLAGS</span><a name="index-maude_005fLDFLAGS-350"></a></dt><dd>This variable is used to pass extra flags to the link step of a program
or a shared library.

     <br></dd><dt><span class="samp">maude_DEPENDENCIES</span><a name="index-maude_005fDEPENDENCIES-351"></a></dt><dd>It is also occasionally useful to have a program depend on some other
target which is not actually part of that program.  This can be done
using the <span class="samp">_DEPENDENCIES</span> variable.  Each program depends on the
contents of such a variable, but no further interpretation is done.

     <p>If <span class="samp">_DEPENDENCIES</span> is not supplied, it is computed by Automake.
The automatically-assigned value is the contents of <span class="samp">_LDADD</span> or
<span class="samp">_LIBADD</span>, with most configure substitutions, <span class="samp">-l</span>, <span class="samp">-L</span>,
<span class="samp">-dlopen</span> and <span class="samp">-dlpreopen</span> options removed.  The configure
substitutions that are left in are only <span class="samp">$(LIBOBJS)</span> and
<span class="samp">$(ALLOCA)</span>; these are left because it is known that they will not
cause an invalid value for <span class="samp">_DEPENDENCIES</span> to be generated.

     <br></p></dd><dt><span class="samp">maude_LINK</span><a name="index-maude_005fLINK-352"></a></dt><dd>You can override the linker on a per-program basis.  By default the
linker is chosen according to the languages used by the program.  For
instance, a program that includes C++ source code would use the C++
compiler to link.  The <span class="samp">_LINK</span> variable must hold the name of a
command which can be passed all the <span class="file">.o</span> file names as arguments.
Note that the name of the underlying program is <em>not</em> passed to
<span class="samp">_LINK</span>; typically one uses <span class="samp">$@</span>:

     <pre class="example">          maude_LINK = $(CCLD) -magic -o $@
     </pre>
     <br></dd><dt><span class="samp">maude_CCASFLAGS</span><a name="index-maude_005fCCASFLAGS-353"></a></dt><dt><span class="samp">maude_CFLAGS</span><a name="index-maude_005fCFLAGS-354"></a></dt><dt><span class="samp">maude_CPPFLAGS</span><a name="index-maude_005fCPPFLAGS-355"></a></dt><dt><span class="samp">maude_CXXFLAGS</span><a name="index-maude_005fCXXFLAGS-356"></a></dt><dt><span class="samp">maude_FFLAGS</span><a name="index-maude_005fFFLAGS-357"></a></dt><dt><span class="samp">maude_GCJFLAGS</span><a name="index-maude_005fGCJFLAGS-358"></a></dt><dt><span class="samp">maude_LFLAGS</span><a name="index-maude_005fLFLAGS-359"></a></dt><dt><span class="samp">maude_OBJCFLAGS</span><a name="index-maude_005fOBJCFLAGS-360"></a></dt><dt><span class="samp">maude_RFLAGS</span><a name="index-maude_005fRFLAGS-361"></a></dt><dt><span class="samp">maude_YFLAGS</span><a name="index-maude_005fYFLAGS-362"></a></dt><dd><a name="index-per_002dtarget-compilation-flags_002c-defined-363"></a>Automake allows you to set compilation flags on a per-program (or
per-library) basis.  A single source file can be included in several
programs, and it will potentially be compiled with different flags for
each program.  This works for any language directly supported by
Automake.  These <dfn>per-target compilation flags</dfn> are
<span class="samp">_CCASFLAGS</span>,
<span class="samp">_CFLAGS</span>,
<span class="samp">_CPPFLAGS</span>,
<span class="samp">_CXXFLAGS</span>,
<span class="samp">_FFLAGS</span>,
<span class="samp">_GCJFLAGS</span>,
<span class="samp">_LFLAGS</span>,
<span class="samp">_OBJCFLAGS</span>,
<span class="samp">_RFLAGS</span>, and
<span class="samp">_YFLAGS</span>.

     <p>When using a per-target compilation flag, Automake will choose a
different name for the intermediate object files.  Ordinarily a file
like <span class="file">sample.c</span> will be compiled to produce <span class="file">sample.o</span>.
However, if the program's <span class="samp">_CFLAGS</span> variable is set, then the
object file will be named, for instance, <span class="file">maude-sample.o</span>.
(See also <a href="#renamed-objects">renamed objects</a>.)

     </p><p>In compilations with per-target flags, the ordinary <span class="samp">AM_</span> form of
the flags variable is <em>not</em> automatically included in the
compilation (however, the user form of the variable <em>is</em> included).
So for instance, if you want the hypothetical <span class="file">maude</span> compilations
to also use the value of <span class="samp">AM_CFLAGS</span>, you would need to write:

     </p><pre class="example">          maude_CFLAGS = ... your flags ... $(AM_CFLAGS)
     </pre>
     <p>See <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>, for more discussion about the
interaction between user variables, <code>AM_</code> shadow variables, and
per-target variables.

     <br></p></dd><dt><span class="samp">maude_SHORTNAME</span><a name="index-maude_005fSHORTNAME-364"></a></dt><dd>On some platforms the allowable file names are very short.  In order to
support these systems and per-target compilation flags at the same
time, Automake allows you to set a &#8220;short name&#8221; which will influence
how intermediate object files are named.  For instance, in the following
example,

     <pre class="example">          bin_PROGRAMS = maude
          maude_CPPFLAGS = -DSOMEFLAG
          maude_SHORTNAME = m
          maude_SOURCES = sample.c ...
     </pre>
     <p class="noindent">the object file would be named <span class="file">m-sample.o</span> rather than
<span class="file">maude-sample.o</span>.

     </p><p>This facility is rarely needed in practice,
and we recommend avoiding it until you find it is required.
</p></dd></dl>

<div class="node">
<p></p><hr>
<a name="Default-_005fSOURCES"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#LIBOBJS">LIBOBJS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-and-Library-Variables">Program and Library Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.5 Default <code>_SOURCES</code></h3>

<p><a name="index-_005fSOURCES-365"></a><a name="index-SOURCES-366"></a><a name="index-_0040code_007b_005fSOURCES_007d_002c-default-367"></a><a name="index-default-_0040code_007b_005fSOURCES_007d-368"></a>
<code>_SOURCES</code> variables are used to specify source files of programs
(see <a href="#A-Program">A Program</a>), libraries (see <a href="#A-Library">A Library</a>), and Libtool
libraries (see <a href="#A-Shared-Library">A Shared Library</a>).

   </p><p>When no such variable is specified for a target, Automake will define
one itself.  The default is to compile a single C file whose base name
is the name of the target itself, with any extension replaced by
<span class="file">.c</span>.  (Defaulting to C is terrible but we are stuck with it for
historical reasons.)

   </p><p>For example if you have the following somewhere in your
<span class="file">Makefile.am</span> with no corresponding <span class="samp">libfoo_a_SOURCES</span>:

</p><pre class="example">     lib_LIBRARIES = libfoo.a sub/libc++.a
</pre>
   <p class="noindent"><span class="file">libfoo.a</span> will be built using a default source file named
<span class="file">libfoo.c</span>, and <span class="file">sub/libc++.a</span> will be built from
<span class="file">sub/libc++.c</span>.  (In older versions <span class="file">sub/libc++.a</span>
would be built from <span class="file">sub_libc___a.c</span>, i.e., the default source
was the canonized name of the target, with <span class="file">.c</span> appended.
We believe the new behavior is more sensible, but for backward
compatibility automake will use the old name if a file or a rule
with that name exist.)

   </p><p><a name="index-_0040code_007bcheck_005fPROGRAMS_007d-example-369"></a><a name="index-check_005fPROGRAMS-370"></a>Default sources are mainly useful in test suites, when building many
tests programs each from a single source.  For instance in

</p><pre class="example">     check_PROGRAMS = test1 test2 test3
</pre>
   <p class="noindent"><span class="file">test1</span>, <span class="file">test2</span>, and <span class="file">test3</span> will be built
from <span class="file">test1.c</span>, <span class="file">test2.c</span>, and <span class="file">test3.c</span>.

   </p><p><a name="index-Libtool-modules_002c-default-source-example-371"></a><a name="index-default-source_002c-Libtool-modules-example-372"></a>Another case where is this convenient is building many Libtool modules
(<span class="file">moduleN.la</span>), each defined in its own file (<span class="file">moduleN.c</span>).

</p><pre class="example">     AM_LDFLAGS = -module
     lib_LTLIBRARIES = module1.la module2.la module3.la
</pre>
   <p><a name="index-empty-_0040code_007b_005fSOURCES_007d-373"></a><a name="index-_0040code_007b_005fSOURCES_007d_002c-empty-374"></a>Finally, there is one situation where this default source computation
needs to be avoided: when a target should not be built from sources.
We already saw such an example in <a href="#true">true</a>; this happens when all
the constituents of a target have already been compiled and need just
to be combined using a <code>_LDADD</code> variable.  Then it is necessary
to define an empty <code>_SOURCES</code> variable, so that automake does not
compute a default.

</p><pre class="example">     bin_PROGRAMS = target
     target_SOURCES =
     target_LDADD = libmain.a libmisc.a
</pre>
   <div class="node">
<p></p><hr>
<a name="LIBOBJS"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Program-variables">Program variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Default-_005fSOURCES">Default _SOURCES</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.6 Special handling for LIBOBJS and ALLOCA</h3>

<p><a name="index-_0040code_007bLIBOBJS_007d_002c-example-375"></a><a name="index-_0040code_007bALLOCA_007d_002c-example-376"></a><a name="index-_0040code_007bLIBOBJS_007d_002c-special-handling-377"></a><a name="index-_0040code_007bALLOCA_007d_002c-special-handling-378"></a><a name="index-LTLIBOBJS-379"></a><a name="index-LIBOBJS-380"></a><a name="index-LTALLOCA-381"></a><a name="index-ALLOCA-382"></a>
The <code>$(LIBOBJS)</code> and <code>$(ALLOCA)</code> variables list object
files that should be compiled into the project to provide an
implementation for functions that are missing or broken on the host
system.  They are substituted by <span class="file">configure</span>.

   </p><p><a name="index-AC_005fLIBOBJ-383"></a>
These variables are defined by Autoconf macros such as
<code>AC_LIBOBJ</code>, <code>AC_REPLACE_FUNCS</code> (see <a href="http://sources.redhat.com/automake/autoconf.html#Generic-Functions">Generic Function Checks (The Autoconf Manual)</a>), or
<code>AC_FUNC_ALLOCA</code> (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Functions">Particular Function Checks (The Autoconf Manual)</a>).  Many other Autoconf
macros call <code>AC_LIBOBJ</code> or <code>AC_REPLACE_FUNCS</code> to
populate <code>$(LIBOBJS)</code>.

   </p><p><a name="index-AC_005fLIBSOURCE-384"></a>
Using these variables is very similar to doing conditional compilation
using <code>AC_SUBST</code> variables, as described in <a href="#Conditional-Sources">Conditional Sources</a>.  That is, when building a program, <code>$(LIBOBJS)</code> and
<code>$(ALLOCA)</code> should be added to the associated <span class="samp">*_LDADD</span>
variable, or to the <span class="samp">*_LIBADD</span> variable when building a library.
However there is no need to list the corresponding sources in
<code>EXTRA_*_SOURCES</code> nor to define <code>*_DEPENDENCIES</code>.  Automake
automatically adds <code>$(LIBOBJS)</code> and <code>$(ALLOCA)</code> to the
dependencies, and it will discover the list of corresponding source
files automatically (by tracing the invocations of the
<code>AC_LIBSOURCE</code> Autoconf macros).

   </p><p>These variables are usually used to build a portability library that
is linked with all the programs of the project.  We now review a
sample setup.  First, <span class="file">configure.ac</span> contains some checks that
affect either <code>LIBOBJS</code> or <code>ALLOCA</code>.

</p><pre class="example">     # configure.ac
     ...
     AC_CONFIG_LIBOBJ_DIR([lib])
     ...
     AC_FUNC_MALLOC             dnl May add malloc.$(OBJEXT) to LIBOBJS
     AC_FUNC_MEMCMP             dnl May add memcmp.$(OBJEXT) to LIBOBJS
     AC_REPLACE_FUNCS([strdup]) dnl May add strdup.$(OBJEXT) to LIBOBJS
     AC_FUNC_ALLOCA             dnl May add alloca.$(OBJEXT) to ALLOCA
     ...
     AC_CONFIG_FILES([
       lib/Makefile
       src/Makefile
     ])
     AC_OUTPUT
</pre>
   <p><a name="index-AC_005fCONFIG_005fLIBOBJ_005fDIR-385"></a>
The <code>AC_CONFIG_LIBOBJ_DIR</code> tells Autoconf that the source files
of these object files are to be found in the <span class="file">lib/</span> directory.
Automake does not yet use this information; it knows the source files
are expected to be in the directory where the <code>$(LIBOBJS)</code> and
<code>$(ALLOCA)</code> variables are used.

   </p><p>The <span class="file">lib/</span> directory should therefore contain <span class="file">malloc.c</span>,
<span class="file">memcmp.c</span>, <span class="file">strdup.c</span>, <span class="file">alloca.c</span>.  Here is its
<span class="file">Makefile.am</span>:

</p><pre class="example">     # lib/Makefile.am

     noinst_LIBRARIES = libcompat.a
     libcompat_a_SOURCES =
     libcompat_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre>
   <p>Nothing else is required.  The library can have any name, of course,
and anyway it is not going to be installed: it just holds the
replacement versions of the missing or broken functions so we can
later link them in.  In many projects also include extra functions,
specific to the project, in that library: they are simply added on
the <code>_SOURCES</code> line.

   </p><p>Finally here is how this library could be used from the <span class="file">src/</span>
directory.

</p><pre class="example">     # src/Makefile.am

     # Link all programs in this directory with libcompat.a
     LDADD = ../lib/libcompat.a

     bin_PROGRAMS = tool1 tool2 ...
     tool1_SOURCES = ...
     tool2_SOURCES = ...
</pre>
   <p>Please note it would be wrong to use the <code>$(LIBOBJS)</code> or
<code>$(ALLOCA)</code> in <span class="file">src/Makefile.am</span>, because these variables
contains unprefixed object names, and for instance
<span class="file">malloc.$(OBJEXT)</span> is not buildable in the <span class="file">src/</span> directory.
(Actually if you try using <code>$(LIBOBJS)</code> in <span class="file">src/</span>, Automake
will require a copy of <span class="file">malloc.c</span>, <span class="file">memcmp.c</span>,
<span class="file">strdup.c</span>, <span class="file">alloca.c</span> in <span class="file">src/</span> too.)

   </p><p>Because <code>$(LIBOBJS)</code> and <code>$(ALLOCA)</code> contain object
filenames that end with <code>.$(OBJEXT)</code>, they are not suitable for
Libtool libraries (where the expected object extension is <span class="file">.lo</span>):
<code>LTLIBOBJS</code> and <code>LTALLOCA</code> should be used instead.

   </p><p><code>LTLIBOBJS</code> is defined automatically by Autoconf and should not
be defined by hand (as in the past), however at the time of writing
<code>LTALLOCA</code> still needs to be defined from <code>ALLOCA</code> manually.
See <a href="http://sources.redhat.com/automake/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code> (The Autoconf Manual)</a>.

</p><div class="node">
<p></p><hr>
<a name="Program-variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Yacc-and-Lex">Yacc and Lex</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#LIBOBJS">LIBOBJS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.7 Variables used when building a program</h3>

<p>Occasionally it is useful to know which <span class="file">Makefile</span> variables
Automake uses for compilations; for instance you might need to do your
own compilation in some special cases.

   </p><p>Some variables are inherited from Autoconf; these are <code>CC</code>,
<code>CFLAGS</code>, <code>CPPFLAGS</code>, <code>DEFS</code>, <code>LDFLAGS</code>, and
<code>LIBS</code>.
<a name="index-CC-386"></a><a name="index-CFLAGS-387"></a><a name="index-CPPFLAGS-388"></a><a name="index-DEFS-389"></a><a name="index-LDFLAGS-390"></a><a name="index-LIBS-391"></a>
There are some additional variables which Automake itself defines:

     </p><dl>
<dt><code>AM_CPPFLAGS</code><a name="index-AM_005fCPPFLAGS-392"></a></dt><dd>The contents of this variable are passed to every compilation which invokes
the C preprocessor; it is a list of arguments to the preprocessor.  For
instance, <span class="samp">-I</span> and <span class="samp">-D</span> options should be listed here.

     <p>Automake already provides some <span class="samp">-I</span> options automatically.  In
particular it generates <span class="samp">-I$(srcdir)</span>, <span class="samp">-I.</span>, and a <span class="samp">-I</span>
pointing to the directory holding <span class="file">config.h</span> (if you've used
<code>AC_CONFIG_HEADERS</code> or <code>AM_CONFIG_HEADER</code>).  You can disable
the default <span class="samp">-I</span> options using the <span class="samp">nostdinc</span> option.

     </p><p><code>AM_CPPFLAGS</code> is ignored in preference to a per-executable (or
per-library) <code>_CPPFLAGS</code> variable if it is defined.

     <br></p></dd><dt><code>INCLUDES</code><a name="index-INCLUDES-393"></a></dt><dd>This does the same job as <span class="samp">AM_CPPFLAGS</span> (or any per-target
<span class="samp">_CPPFLAGS</span> variable if it is used).  It is an older name for the
same functionality.  This variable is deprecated; we suggest using
<span class="samp">AM_CPPFLAGS</span> and per-target <span class="samp">_CPPFLAGS</span> instead.

     <br></dd><dt><code>AM_CFLAGS</code><a name="index-AM_005fCFLAGS-394"></a></dt><dd>This is the variable which the <span class="file">Makefile.am</span> author can use to pass
in additional C compiler flags.  It is more fully documented elsewhere.
In some situations, this is not used, in preference to the
per-executable (or per-library) <code>_CFLAGS</code>.

     <br></dd><dt><code>COMPILE</code><a name="index-COMPILE-395"></a></dt><dd>This is the command used to actually compile a C source file.  The
filename is appended to form the complete command line.

     <br></dd><dt><code>AM_LDFLAGS</code><a name="index-AM_005fLDFLAGS-396"></a></dt><dd>This is the variable which the <span class="file">Makefile.am</span> author can use to pass
in additional linker flags.  In some situations, this is not used, in
preference to the per-executable (or per-library) <code>_LDFLAGS</code>.

     <br></dd><dt><code>LINK</code><a name="index-LINK-397"></a></dt><dd>This is the command used to actually link a C program.  It already
includes <span class="samp">-o $@</span> and the usual variable references (for instance,
<code>CFLAGS</code>); it takes as &#8220;arguments&#8221; the names of the object files
and libraries to link in.
</dd></dl>

<div class="node">
<p></p><hr>
<a name="Yacc-and-Lex"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#C_002b_002b-Support">C++ Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-variables">Program variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.8 Yacc and Lex support</h3>

<p>Automake has somewhat idiosyncratic support for Yacc and Lex.

   </p><p>Automake assumes that the <span class="file">.c</span> file generated by <code>yacc</code> (or
<code>lex</code>) should be named using the basename of the input file.  That
is, for a yacc source file <span class="file">foo.y</span>, Automake will cause the
intermediate file to be named <span class="file">foo.c</span> (as opposed to
<span class="file">y.tab.c</span>, which is more traditional).

   </p><p>The extension of a yacc source file is used to determine the extension
of the resulting <span class="samp">C</span> or <span class="samp">C++</span> file.  Files with the extension
<span class="samp">.y</span> will be turned into <span class="samp">.c</span> files; likewise, <span class="samp">.yy</span> will
become <span class="samp">.cc</span>; <span class="samp">.y++</span>, <span class="samp">c++</span>; and <span class="samp">.yxx</span>,
<span class="samp">.cxx</span>.

   </p><p>Likewise, lex source files can be used to generate <span class="samp">C</span> or
<span class="samp">C++</span>; the extensions <span class="samp">.l</span>, <span class="samp">.ll</span>, <span class="samp">.l++</span>, and
<span class="samp">.lxx</span> are recognized.

   </p><p>You should never explicitly mention the intermediate (<span class="samp">C</span> or
<span class="samp">C++</span>) file in any <span class="samp">SOURCES</span> variable; only list the source
file.

   </p><p>The intermediate files generated by <code>yacc</code> (or <code>lex</code>) will be
included in any distribution that is made.  That way the user doesn't
need to have <code>yacc</code> or <code>lex</code>.

   </p><p>If a <code>yacc</code> source file is seen, then your <span class="file">configure.ac</span> must
define the variable <span class="samp">YACC</span>.  This is most easily done by invoking
the macro <span class="samp">AC_PROG_YACC</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>).

   </p><p><a name="index-YFLAGS-398"></a><a name="index-AM_005fYFLAGS-399"></a>When <code>yacc</code> is invoked, it is passed <span class="samp">YFLAGS</span> and
<span class="samp">AM_YFLAGS</span>.  The former is a user variable and the latter is
intended for the <span class="file">Makefile.am</span> author.

   </p><p><span class="samp">AM_YFLAGS</span> is usually used to pass the <code>-d</code> option to
<code>yacc</code>.  Automake knows what this means and will automatically
adjust its rules to update and distribute the header file built by
<code>yacc -d</code>.  What Automake cannot guess, though, is where this
header will be used: it is up to you to ensure the header gets built
before it is first used.  Typically this is necessary in order for
dependency tracking to work when the header is included by another
file.  The common solution is listing the header file in
<code>BUILT_SOURCES</code> (see <a href="#Sources">Sources</a>) as follows.

</p><pre class="example">     BUILT_SOURCES = parser.h
     AM_YFLAGS = -d
     bin_PROGRAMS = foo
     foo_SOURCES = ... parser.y ...
</pre>
   <p>If a <code>lex</code> source file is seen, then your <span class="file">configure.ac</span>
must define the variable <span class="samp">LEX</span>.  You can use <span class="samp">AC_PROG_LEX</span>
to do this (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>), but using <code>AM_PROG_LEX</code> macro
(see <a href="#Macros">Macros</a>) is recommended.

   </p><p><a name="index-LFLAGS-400"></a><a name="index-AM_005fLFLAGS-401"></a>When <code>lex</code> is invoked, it is passed <span class="samp">LFLAGS</span> and
<span class="samp">AM_LFLAGS</span>.  The former is a user variable and the latter is
intended for the <span class="file">Makefile.am</span> author.

   </p><p><a name="index-_0040command_007bylwrap_007d-402"></a><a name="index-_0040command_007byacc_007d_002c-multiple-parsers-403"></a><a name="index-Multiple-_0040command_007byacc_007d-parsers-404"></a><a name="index-Multiple-_0040command_007blex_007d-lexers-405"></a><a name="index-_0040command_007blex_007d_002c-multiple-lexers-406"></a>

   </p><p>Automake makes it possible to include multiple <code>yacc</code> (or
<code>lex</code>) source files in a single program.  When there is more than
one distinct <code>yacc</code> (or <code>lex</code>) source file in a directory,
Automake uses a small program called <code>ylwrap</code> to run <code>yacc</code>
(or <code>lex</code>) in a subdirectory.  This is necessary because yacc's
output filename is fixed, and a parallel make could conceivably invoke
more than one instance of <code>yacc</code> simultaneously.  The
<code>ylwrap</code> program is distributed with Automake.  It should appear
in the directory specified by <span class="samp">AC_CONFIG_AUX_DIR</span>, or one of its
default locations (see <a href="http://sources.redhat.com/automake/autoconf.html#Input">Finding `configure' Input (The Autoconf Manual)</a>).

   </p><p>For <code>yacc</code>, simply managing locking is insufficient.  The output of
<code>yacc</code> always uses the same symbol names internally, so it isn't
possible to link two <code>yacc</code> parsers into the same executable.

   </p><p>We recommend using the following renaming hack used in <code>gdb</code>:
</p><pre class="example">     #define yymaxdepth c_maxdepth
     #define yyparse c_parse
     #define yylex   c_lex
     #define yyerror c_error
     #define yylval  c_lval
     #define yychar  c_char
     #define yydebug c_debug
     #define yypact  c_pact
     #define yyr1    c_r1
     #define yyr2    c_r2
     #define yydef   c_def
     #define yychk   c_chk
     #define yypgo   c_pgo
     #define yyact   c_act
     #define yyexca  c_exca
     #define yyerrflag c_errflag
     #define yynerrs c_nerrs
     #define yyps    c_ps
     #define yypv    c_pv
     #define yys     c_s
     #define yy_yys  c_yys
     #define yystate c_state
     #define yytmp   c_tmp
     #define yyv     c_v
     #define yy_yyv  c_yyv
     #define yyval   c_val
     #define yylloc  c_lloc
     #define yyreds  c_reds
     #define yytoks  c_toks
     #define yylhs   c_yylhs
     #define yylen   c_yylen
     #define yydefred c_yydefred
     #define yydgoto c_yydgoto
     #define yysindex c_yysindex
     #define yyrindex c_yyrindex
     #define yygindex c_yygindex
     #define yytable  c_yytable
     #define yycheck  c_yycheck
     #define yyname   c_yyname
     #define yyrule   c_yyrule
</pre>
   <p>For each define, replace the <span class="samp">c_</span> prefix with whatever you like.
These defines work for <code>bison</code>, <code>byacc</code>, and traditional
<code>yacc</code>s.  If you find a parser generator that uses a symbol not
covered here, please report the new name so it can be added to the list.

</p><div class="node">
<p></p><hr>
<a name="C_002b_002b-Support"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Assembly-Support">Assembly Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Yacc-and-Lex">Yacc and Lex</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.9 C++ Support</h3>

<p><a name="index-C_002b_002b-support-407"></a><a name="index-Support-for-C_002b_002b-408"></a>
Automake includes full support for C++.

   </p><p>Any package including C++ code must define the output variable
<span class="samp">CXX</span> in <span class="file">configure.ac</span>; the simplest way to do this is to use
the <code>AC_PROG_CXX</code> macro (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>).

   </p><p>A few additional variables are defined when a C++ source file is seen:

     </p><dl>
<dt><code>CXX</code><a name="index-CXX-409"></a></dt><dd>The name of the C++ compiler.

     <br></dd><dt><code>CXXFLAGS</code><a name="index-CXXFLAGS-410"></a></dt><dd>Any flags to pass to the C++ compiler.

     <br></dd><dt><code>AM_CXXFLAGS</code><a name="index-AM_005fCXXFLAGS-411"></a></dt><dd>The maintainer's variant of <code>CXXFLAGS</code>.

     <br></dd><dt><code>CXXCOMPILE</code><a name="index-CXXCOMPILE-412"></a></dt><dd>The command used to actually compile a C++ source file.  The file name
is appended to form the complete command line.

     <br></dd><dt><code>CXXLINK</code><a name="index-CXXLINK-413"></a></dt><dd>The command used to actually link a C++ program.
</dd></dl>

<div class="node">
<p></p><hr>
<a name="Assembly-Support"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Fortran-77-Support">Fortran 77 Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#C_002b_002b-Support">C++ Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.10 Assembly Support</h3>

<p>Automake includes some support for assembly code.

   </p><p><a name="index-CCAS-414"></a><a name="index-CCASFLAGS-415"></a><a name="index-AM_005fCCASFLAGS-416"></a>The variable <code>CCAS</code> holds the name of the compiler used to build
assembly code.  This compiler must work a bit like a C compiler; in
particular it must accept <span class="samp">-c</span> and <span class="samp">-o</span>.  The values of
<code>CCASFLAGS</code> and <code>AM_CCASFLAGS</code> (or its per-target
definition) are passed to the compilation.

   </p><p>The autoconf macro <code>AM_PROG_AS</code> will define <code>CCAS</code> and
<code>CCASFLAGS</code> for you (unless they are already set, it simply sets
<code>CCAS</code> to the C compiler and <code>CCASFLAGS</code> to the C compiler
flags), but you are free to define these variables by other means.

   </p><p>Only the suffixes <span class="samp">.s</span> and <span class="samp">.S</span> are recognized by
<code>automake</code> as being files containing assembly code.

</p><div class="node">
<p></p><hr>
<a name="Fortran-77-Support"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Fortran-9x-Support">Fortran 9x Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assembly-Support">Assembly Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">7.11 Fortran 77 Support</h3>

<p><a name="index-Fortran-77-support-417"></a><a name="index-Support-for-Fortran-77-418"></a>
Automake includes full support for Fortran 77.

   </p><p>Any package including Fortran 77 code must define the output variable
<span class="samp">F77</span> in <span class="file">configure.ac</span>; the simplest way to do this is to use
the <code>AC_PROG_F77</code> macro (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>).

   </p><p>A few additional variables are defined when a Fortran 77 source file is
seen:

     </p><dl>
<dt><code>F77</code><a name="index-F77-419"></a></dt><dd>The name of the Fortran 77 compiler.

     <br></dd><dt><code>FFLAGS</code><a name="index-FFLAGS-420"></a></dt><dd>Any flags to pass to the Fortran 77 compiler.

     <br></dd><dt><code>AM_FFLAGS</code><a name="index-AM_005fFFLAGS-421"></a></dt><dd>The maintainer's variant of <code>FFLAGS</code>.

     <br></dd><dt><code>RFLAGS</code><a name="index-RFLAGS-422"></a></dt><dd>Any flags to pass to the Ratfor compiler.

     <br></dd><dt><code>AM_RFLAGS</code><a name="index-AM_005fRFLAGS-423"></a></dt><dd>The maintainer's variant of <code>RFLAGS</code>.

     <br></dd><dt><code>F77COMPILE</code><a name="index-F77COMPILE-424"></a></dt><dd>The command used to actually compile a Fortran 77 source file.  The file
name is appended to form the complete command line.

     <br></dd><dt><code>FLINK</code><a name="index-FLINK-425"></a></dt><dd>The command used to actually link a pure Fortran 77 program or shared
library.

   </dd></dl>

   <p>Automake can handle preprocessing Fortran 77 and Ratfor source files in
addition to compiling them<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a>.  Automake
also contains some support for creating programs and shared libraries
that are a mixture of Fortran 77 and other languages (see <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>).

   </p><p>These issues are covered in the following sections.

</p><ul class="menu">
<li><a accesskey="1" href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>:     Preprocessing Fortran 77 sources
</li><li><a accesskey="2" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>:   Compiling Fortran 77 sources
</li><li><a accesskey="3" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>:   Mixing Fortran 77 With C and C++
</li></ul>

<div class="node">
<p></p><hr>
<a name="Preprocessing-Fortran-77"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">7.11.1 Preprocessing Fortran 77</h4>

<p><a name="index-Preprocessing-Fortran-77-426"></a><a name="index-Fortran-77_002c-Preprocessing-427"></a><a name="index-Ratfor-programs-428"></a>
<span class="file">N.f</span> is made automatically from <span class="file">N.F</span> or <span class="file">N.r</span>.  This
rule runs just the preprocessor to convert a preprocessable Fortran 77
or Ratfor source file into a strict Fortran 77 source file.  The precise
command used is as follows:

     </p><dl>
<dt><span class="file">.F</span></dt><dd><code>$(F77) -F $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_FFLAGS) $(FFLAGS)</code>

     <br></dd><dt><span class="file">.r</span></dt><dd><code>$(F77) -F $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>

   </dd></dl>

<div class="node">
<p></p><hr>
<a name="Compiling-Fortran-77-Files"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">7.11.2 Compiling Fortran 77 Files</h4>

<p><span class="file">N.o</span> is made automatically from <span class="file">N.f</span>, <span class="file">N.F</span> or
<span class="file">N.r</span> by running the Fortran 77 compiler.  The precise command used
is as follows:

     </p><dl>
<dt><span class="file">.f</span></dt><dd><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS)</code>

     <br></dd><dt><span class="file">.F</span></dt><dd><code>$(F77) -c $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_FFLAGS) $(FFLAGS)</code>

     <br></dd><dt><span class="file">.r</span></dt><dd><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>

   </dd></dl>

<div class="node">
<p></p><hr>
<a name="Mixing-Fortran-77-With-C-and-C_002b_002b"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">7.11.3 Mixing Fortran 77 With C and C++</h4>

<p><a name="index-Fortran-77_002c-mixing-with-C-and-C_002b_002b-429"></a><a name="index-Mixing-Fortran-77-with-C-and-C_002b_002b-430"></a><a name="index-Linking-Fortran-77-with-C-and-C_002b_002b-431"></a><a name="index-cfortran-432"></a><a name="index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b-433"></a>
Automake currently provides <em>limited</em> support for creating programs
and shared libraries that are a mixture of Fortran 77 and C and/or C++.
However, there are many other issues related to mixing Fortran 77 with
other languages that are <em>not</em> (currently) handled by Automake, but
that are handled by other packages<a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a>.

   </p><p>Automake can help in two ways:

     </p><ol start="1" type="1">
<li>Automatic selection of the linker depending on which combinations of
source code.

     </li><li>Automatic selection of the appropriate linker flags (e.g. <span class="samp">-L</span> and
<span class="samp">-l</span>) to pass to the automatically selected linker in order to link
in the appropriate Fortran 77 intrinsic and run-time libraries.

     <p><a name="index-_0040code_007bFLIBS_007d_002c-defined-434"></a><a name="index-FLIBS-435"></a>These extra Fortran 77 linker flags are supplied in the output variable
<code>FLIBS</code> by the <code>AC_F77_LIBRARY_LDFLAGS</code> Autoconf macro
supplied with newer versions of Autoconf (Autoconf version 2.13 and
later).  See <a href="http://sources.redhat.com/automake/autoconf.html#Fortran-77-Compiler-Characteristics">Fortran 77 Compiler Characteristics (The Autoconf)</a>.
        </p></li></ol>

   <p>If Automake detects that a program or shared library (as mentioned in
some <code>_PROGRAMS</code> or <code>_LTLIBRARIES</code> primary) contains source
code that is a mixture of Fortran 77 and C and/or C++, then it requires
that the macro <code>AC_F77_LIBRARY_LDFLAGS</code> be called in
<span class="file">configure.ac</span>, and that either <code>$(FLIBS)</code>
appear in the appropriate <code>_LDADD</code> (for programs) or <code>_LIBADD</code>
(for shared libraries) variables.  It is the responsibility of the
person writing the <span class="file">Makefile.am</span> to make sure that <code>$(FLIBS)</code>
appears in the appropriate <code>_LDADD</code> or
<code>_LIBADD</code> variable.

   </p><p><a name="index-Mixed-language-example-436"></a><a name="index-Example_002c-mixed-language-437"></a>
For example, consider the following <span class="file">Makefile.am</span>:

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES  = main.cc foo.f
     foo_LDADD    = libfoo.la $(FLIBS)

     pkglib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES  = bar.f baz.c zardoz.cc
     libfoo_la_LIBADD   = $(FLIBS)
</pre>
   <p>In this case, Automake will insist that <code>AC_F77_LIBRARY_LDFLAGS</code>
is mentioned in <span class="file">configure.ac</span>.  Also, if <code>$(FLIBS)</code> hadn't
been mentioned in <code>foo_LDADD</code> and <code>libfoo_la_LIBADD</code>, then
Automake would have issued a warning.

</p><ul class="menu">
<li><a accesskey="1" href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>:     Automatic linker selection
</li></ul>

<div class="node">
<p></p><hr>
<a name="How-the-Linker-is-Chosen"></a>Up:&nbsp;<a rel="up" accesskey="u" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h5 class="subsubsection">7.11.3.1 How the Linker is Chosen</h5>

<p><a name="index-Automatic-linker-selection-438"></a><a name="index-Selecting-the-linker-automatically-439"></a>
The following diagram demonstrates under what conditions a particular
linker is chosen by Automake.

   </p><p>For example, if Fortran 77, C and C++ source code were to be compiled
into a program, then the C++ linker will be used.  In this case, if the
C or Fortran 77 linkers required any special libraries that weren't
included by the C++ linker, then they must be manually added to an
<code>_LDADD</code> or <code>_LIBADD</code> variable by the user writing the
<span class="file">Makefile.am</span>.

</p><pre class="example">                          \              Linker
               source      \
                code        \     C        C++     Fortran
          -----------------  +---------+---------+---------+
                             |         |         |         |
          C                  |    x    |         |         |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
              C++            |         |    x    |         |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
                    Fortran  |         |         |    x    |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
          C + C++            |         |    x    |         |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
          C +       Fortran  |         |         |    x    |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
              C++ + Fortran  |         |    x    |         |
                             |         |         |         |
                             +---------+---------+---------+
                             |         |         |         |
          C + C++ + Fortran  |         |    x    |         |
                             |         |         |         |
                             +---------+---------+---------+
</pre>
   <div class="node">
<p></p><hr>
<a name="Fortran-9x-Support"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Java-Support">Java Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fortran-77-Support">Fortran 77 Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">7.12 Fortran 9x Support</h3>

<p><a name="index-Fortran-9x-support-440"></a><a name="index-Support-for-Fortran-9x-441"></a>
Automake includes full support for Fortran 9x.

   </p><p>Any package including Fortran 9x code must define the output variable
<span class="samp">FC</span> in <span class="file">configure.ac</span>; the simplest way to do this is to use
the <code>AC_PROG_FC</code> macro (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>).

   </p><p>A few additional variables are defined when a Fortran 9x source file is
seen:

     </p><dl>
<dt><code>FC</code><a name="index-FC-442"></a></dt><dd>The name of the Fortran 9x compiler.

     <br></dd><dt><code>FCFLAGS</code><a name="index-FCFLAGS-443"></a></dt><dd>Any flags to pass to the Fortran 9x compiler.

     <br></dd><dt><code>AM_FCFLAGS</code><a name="index-AM_005fFCFLAGS-444"></a></dt><dd>The maintainer's variant of <code>FCFLAGS</code>.

     <br></dd><dt><code>FCCOMPILE</code><a name="index-FCCOMPILE-445"></a></dt><dd>The command used to actually compile a Fortran 9x source file.  The file
name is appended to form the complete command line.

     <br></dd><dt><code>FCLINK</code><a name="index-FCLINK-446"></a></dt><dd>The command used to actually link a pure Fortran 9x program or shared
library.

   </dd></dl>

<ul class="menu">
<li><a accesskey="1" href="#Compiling-Fortran-9x-Files">Compiling Fortran 9x Files</a>:   Compiling Fortran 9x sources
</li></ul>

<div class="node">
<p></p><hr>
<a name="Compiling-Fortran-9x-Files"></a>Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-9x-Support">Fortran 9x Support</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">7.12.1 Compiling Fortran 9x Files</h4>

<p><span class="file">N.o</span> is made automatically from <span class="file">N.f90</span> or <span class="file">N.f95</span>
by running the Fortran 9x compiler.  The precise command used
is as follows:

     </p><dl>
<dt><span class="file">.f9x</span></dt><dd><code>$(FC) -c $(AM_FCFLAGS) $(FCFLAGS)</code>

   </dd></dl>

<div class="node">
<p></p><hr>
<a name="Java-Support"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Support-for-Other-Languages">Support for Other Languages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fortran-9x-Support">Fortran 9x Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">7.13 Java Support</h3>

<p><a name="index-Java-support-447"></a><a name="index-Support-for-Java-448"></a>
Automake includes support for compiled Java, using <code>gcj</code>, the Java
front end to the GNU Compiler Collection.

   </p><p>Any package including Java code to be compiled must define the output
variable <span class="samp">GCJ</span> in <span class="file">configure.ac</span>; the variable <span class="samp">GCJFLAGS</span>
must also be defined somehow (either in <span class="file">configure.ac</span> or
<span class="file">Makefile.am</span>).  The simplest way to do this is to use the
<code>AM_PROG_GCJ</code> macro.

   </p><p><a name="index-GCJFLAGS-449"></a>
By default, programs including Java source files are linked with
<code>gcj</code>.

   </p><p>As always, the contents of <span class="samp">AM_GCJFLAGS</span> are passed to every
compilation invoking <code>gcj</code> (in its role as an ahead-of-time
compiler &#8211; when invoking it to create <span class="file">.class</span> files,
<span class="samp">AM_JAVACFLAGS</span> is used instead).  If it is necessary to pass
options to <code>gcj</code> from <span class="file">Makefile.am</span>, this variable, and not
the user variable <span class="samp">GCJFLAGS</span>, should be used.

   </p><p><a name="index-AM_005fGCJFLAGS-450"></a>
<code>gcj</code> can be used to compile <span class="file">.java</span>, <span class="file">.class</span>,
<span class="file">.zip</span>, or <span class="file">.jar</span> files.

   </p><p>When linking, <code>gcj</code> requires that the main class be specified
using the <span class="samp">--main=</span> option.  The easiest way to do this is to use
the <code>_LDFLAGS</code> variable for the program.

</p><div class="node">
<p></p><hr>
<a name="Support-for-Other-Languages"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#ANSI">ANSI</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Java-Support">Java Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">7.14 Support for Other Languages</h3>

<p>Automake currently only includes full support for C, C++ (see <a href="#C_002b_002b-Support">C++ Support</a>), Fortran 77 (see <a href="#Fortran-77-Support">Fortran 77 Support</a>),
Fortran 9x (see <a href="#Fortran-9x-Support">Fortran 9x Support</a>),
and Java (see <a href="#Java-Support">Java Support</a>).  There is only rudimentary support for other
languages, support for which will be improved based on user demand.

   </p><p>Some limited support for adding your own languages is available via the
suffix rule handling (see <a href="#Suffixes">Suffixes</a>).

</p><div class="node">
<p></p><hr>
<a name="ANSI"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Dependencies">Dependencies</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Support-for-Other-Languages">Support for Other Languages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.15 Automatic de-ANSI-fication</h3>

<p><a name="index-de_002dANSI_002dfication_002c-defined-451"></a>
Although the GNU standards allow the use of ANSI C, this can have the
effect of limiting portability of a package to some older compilers
(notably the SunOS C compiler).

   </p><p>Automake allows you to work around this problem on such machines by
<dfn>de-ANSI-fying</dfn> each source file before the actual compilation takes
place.

   </p><p><a name="index-AUTOMAKE_005fOPTIONS-452"></a><a name="index-ansi2knr-453"></a>
If the <span class="file">Makefile.am</span> variable <code>AUTOMAKE_OPTIONS</code>
(see <a href="#Options">Options</a>) contains the option <code>ansi2knr</code> then code to
handle de-ANSI-fication is inserted into the generated
<span class="file">Makefile.in</span>.

   </p><p>This causes each C source file in the directory to be treated as ANSI C.
If an ANSI C compiler is available, it is used.  If no ANSI C compiler
is available, the <code>ansi2knr</code> program is used to convert the source
files into K&amp;R C, which is then compiled.

   </p><p>The <code>ansi2knr</code> program is simple-minded.  It assumes the source
code will be formatted in a particular way; see the <code>ansi2knr</code> man
page for details.

   </p><p><a name="index-AM_005fC_005fPROTOTYPES-454"></a>Support for de-ANSI-fication requires the source files <span class="file">ansi2knr.c</span>
and <span class="file">ansi2knr.1</span> to be in the same package as the ANSI C source;
these files are distributed with Automake.  Also, the package
<span class="file">configure.ac</span> must call the macro <code>AM_C_PROTOTYPES</code>
(see <a href="#Macros">Macros</a>).

   </p><p>Automake also handles finding the <code>ansi2knr</code> support files in some
other directory in the current package.  This is done by prepending the
relative path to the appropriate directory to the <code>ansi2knr</code>
option.  For instance, suppose the package has ANSI C code in the
<span class="file">src</span> and <span class="file">lib</span> subdirectories.  The files <span class="file">ansi2knr.c</span> and
<span class="file">ansi2knr.1</span> appear in <span class="file">lib</span>.  Then this could appear in
<span class="file">src/Makefile.am</span>:

</p><pre class="example">     AUTOMAKE_OPTIONS = ../lib/ansi2knr
</pre>
   <p>If no directory prefix is given, the files are assumed to be in the
current directory.

   </p><p>Note that automatic de-ANSI-fication will not work when the package is
being built for a different host architecture.  That is because automake
currently has no way to build <code>ansi2knr</code> for the build machine.

<!-- FIXME: this paragraph might be better moved to an `upgrading' section. -->
</p><p><a name="index-_0040code_007bLTLIBOBJS_007d-and-_0040code_007bansi2knr_007d-455"></a><a name="index-_0040code_007bLIBOBJS_007d-and-_0040code_007bansi2knr_007d-456"></a><a name="index-_0040code_007bansi2knr_007d-and-_0040code_007bLTLIBOBJS_007d-457"></a><a name="index-_0040code_007bansi2knr_007d-and-_0040code_007bLIBOBJS_007d-458"></a>Using <code>LIBOBJS</code> with source de-ANSI-fication used to require
hand-crafted code in <span class="file">configure</span> to append <code>$U</code> to basenames
in <code>LIBOBJS</code>.  This is no longer true today.  Starting with version
2.54, Autoconf takes care of rewriting <code>LIBOBJS</code> and
<code>LTLIBOBJS</code>.  (see <a href="http://sources.redhat.com/automake/autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code> (The Autoconf Manual)</a>)

</p><div class="node">
<p></p><hr>
<a name="Dependencies"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#EXEEXT">EXEEXT</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ANSI">ANSI</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.16 Automatic dependency tracking</h3>

<p>As a developer it is often painful to continually update the
<span class="file">Makefile.in</span> whenever the include-file dependencies change in a
project.  Automake supplies a way to automatically track dependency
changes.

   </p><p><a name="index-Dependency-tracking-459"></a><a name="index-Automatic-dependency-tracking-460"></a>
Automake always uses complete dependencies for a compilation, including
system headers.  Automake's model is that dependency computation should
be a side effect of the build.  To this end, dependencies are computed
by running all compilations through a special wrapper program called
<code>depcomp</code>.  <code>depcomp</code> understands how to coax many different C
and C++ compilers into generating dependency information in the format
it requires.  <code>automake -a</code> will install <code>depcomp</code> into your
source tree for you.  If <code>depcomp</code> can't figure out how to properly
invoke your compiler, dependency tracking will simply be disabled for
your build.

   </p><p><a name="index-_0040command_007bdepcomp_007d-461"></a>
Experience with earlier versions of Automake (see <a href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>) taught us that it is not reliable to generate
dependencies only on the maintainer's system, as configurations vary
too much.  So instead Automake implements dependency tracking at build
time.

   </p><p>Automatic dependency tracking can be suppressed by putting
<code>no-dependencies</code> in the variable <code>AUTOMAKE_OPTIONS</code>, or
passing <code>no-dependencies</code> as an argument to <code>AM_INIT_AUTOMAKE</code>
(this should be the preferred way).  Or, you can invoke <code>automake</code>
with the <code>-i</code> option.  Dependency tracking is enabled by default.

   </p><p><a name="index-AUTOMAKE_005fOPTIONS-462"></a><a name="index-no_002ddependencies-463"></a>
The person building your package also can choose to disable dependency
tracking by configuring with <code>--disable-dependency-tracking</code>.

   </p><p><a name="index-Disabling-dependency-tracking-464"></a><a name="index-Dependency-tracking_002c-disabling-465"></a>

</p><div class="node">
<p></p><hr>
<a name="EXEEXT"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dependencies">Dependencies</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>
<br>
</div>

<h3 class="section">7.17 Support for executable extensions</h3>

<p><a name="index-Executable-extension-466"></a><a name="index-Extension_002c-executable-467"></a><a name="index-Windows-468"></a>
On some platforms, such as Windows, executables are expected to have an
extension such as <span class="samp">.exe</span>.  On these platforms, some compilers (GCC
among them) will automatically generate <span class="file">foo.exe</span> when asked to
generate <span class="file">foo</span>.

   </p><p>Automake provides mostly-transparent support for this.  Unfortunately
<em>mostly</em> doesn't yet mean <em>fully</em>.  Until the English
dictionary is revised, you will have to assist Automake if your package
must support those platforms.

   </p><p>One thing you must be aware of is that, internally, Automake rewrites
something like this:

</p><pre class="example">     bin_PROGRAMS = liver
</pre>
   <p>to this:

</p><pre class="example">     bin_PROGRAMS = liver$(EXEEXT)
</pre>
   <p>The targets Automake generates are likewise given the <span class="samp">$(EXEEXT)</span>
extension.  <code>EXEEXT</code>

   </p><p>However, Automake cannot apply this rewriting to <code>configure</code>
substitutions.  This means that if you are conditionally building a
program using such a substitution, then your <span class="file">configure.ac</span> must
take care to add <span class="samp">$(EXEEXT)</span> when constructing the output variable.

   </p><p>With Autoconf 2.13 and earlier, you must explicitly use <code>AC_EXEEXT</code>
to get this support.  With Autoconf 2.50, <code>AC_EXEEXT</code> is run
automatically if you configure a compiler (say, through
<code>AC_PROG_CC</code>).

   </p><p>Sometimes maintainers like to write an explicit link rule for their
program.  Without executable extension support, this is easy&#8212;you
simply write a rule whose target is the name of the program.  However,
when executable extension support is enabled, you must instead add the
<span class="samp">$(EXEEXT)</span> suffix.

   </p><p>Unfortunately, due to the change in Autoconf 2.50, this means you must
always add this extension.  However, this is a problem for maintainers
who know their package will never run on a platform that has
executable extensions.  For those maintainers, the <code>no-exeext</code>
option (see <a href="#Options">Options</a>) will disable this feature.  This works in a
fairly ugly way; if <code>no-exeext</code> is seen, then the presence of a
rule for a target named <code>foo</code> in <span class="file">Makefile.am</span> will override
an automake-generated rule for <code>foo$(EXEEXT)</code>.  Without
the <code>no-exeext</code> option, this use will give a diagnostic.

</p><div class="node">
<p></p><hr>
<a name="Other-objects"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Other-GNU-Tools">Other GNU Tools</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Programs">Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">8 Other Derived Objects</h2>

<p>Automake can handle derived objects which are not C programs.  Sometimes
the support for actually building such objects must be explicitly
supplied, but Automake will still automatically handle installation and
distribution.

</p><ul class="menu">
<li><a accesskey="1" href="#Scripts">Scripts</a>:                      Executable scripts
</li><li><a accesskey="2" href="#Headers">Headers</a>:                      Header files
</li><li><a accesskey="3" href="#Data">Data</a>:                         Architecture-independent data files
</li><li><a accesskey="4" href="#Sources">Sources</a>:                      Derived sources
</li></ul>

<div class="node">
<p></p><hr>
<a name="Scripts"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Headers">Headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-objects">Other objects</a>
<br>
</div>

<h3 class="section">8.1 Executable Scripts</h3>

<p><a name="index-_0040code_007b_005fSCRIPTS_007d-primary_002c-defined-469"></a><a name="index-_0040code_007bSCRIPTS_007d-primary_002c-defined-470"></a><a name="index-Primary-variable_002c-_0040code_007bSCRIPTS_007d-471"></a><a name="index-_005fSCRIPTS-472"></a>
It is possible to define and install programs which are scripts.  Such
programs are listed using the <span class="samp">SCRIPTS</span> primary name.  Automake
doesn't define any dependencies for scripts; the <span class="file">Makefile.am</span>
should include the appropriate rules.
<a name="index-SCRIPTS-473"></a>
Automake does not assume that scripts are derived objects; such objects
must be deleted by hand (see <a href="#Clean">Clean</a>).

   </p><p>The <code>automake</code> program itself is a Perl script that is generated
from <span class="file">automake.in</span>.  Here is how this is handled:

</p><pre class="example">     bin_SCRIPTS = automake
     CLEANFILES = $(bin_SCRIPTS)

     do_subst = sed -e 's,[@]datadir[@],$(datadir),g' \
                 -e 's,[@]PERL[@],$(PERL),g' \
                 -e 's,[@]PACKAGE[@],$(PACKAGE),g' \
                 -e 's,[@]VERSION[@],$(VERSION),g' \
                 ...

     automake: automake.in Makefile
             $(do_subst) &lt; $(srcdir)/automake.in &gt; automake
             chmod +x automake
</pre>
   <p>Because&#8212;as we have just seen&#8212;scripts can be built, they are not
distributed by default.  Scripts that should be distributed can be
specified using a <code>dist_</code> prefix as in other primaries.  For
instance the following <span class="file">Makefile.am</span> declares that
<span class="file">my_script</span> should be distributed and installed in
<code>$(sbindir)</code>.

</p><pre class="example">     dist_sbin_SCRIPTS = my_script
</pre>
   <p><a name="index-_0040code_007bSCRIPTS_007d_002c-installation-directories-474"></a><a name="index-Installing-scripts-475"></a>
<a name="index-bin_005fSCRIPTS-476"></a><a name="index-sbin_005fSCRIPTS-477"></a><a name="index-libexec_005fSCRIPTS-478"></a><a name="index-pkgdata_005fSCRIPTS-479"></a><a name="index-noinst_005fSCRIPTS-480"></a><a name="index-check_005fSCRIPTS-481"></a>
Script objects can be installed in <code>bindir</code>, <code>sbindir</code>,
<code>libexecdir</code>, or <code>pkgdatadir</code>.

   </p><p>Scripts that need not being installed can be listed in
<code>noinst_SCRIPTS</code>, and among them, those which are needed only by
<code>make check</code> should go in <code>check_SCRIPTS</code>.

</p><div class="node">
<p></p><hr>
<a name="Headers"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Data">Data</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scripts">Scripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-objects">Other objects</a>
<br>
</div>

<h3 class="section">8.2 Header files</h3>

<p><a name="index-_0040code_007b_005fHEADERS_007d-primary_002c-defined-482"></a><a name="index-_0040code_007bHEADERS_007d-primary_002c-defined-483"></a><a name="index-Primary-variable_002c-_0040code_007bHEADERS_007d-484"></a><a name="index-_005fHEADERS-485"></a><a name="index-noinst_005fHEADERS-486"></a><a name="index-_0040code_007bHEADERS_007d_002c-installation-directories-487"></a><a name="index-Installing-headers-488"></a><a name="index-include_005fHEADERS-489"></a><a name="index-oldinclude_005fHEADERS-490"></a><a name="index-pkginclude_005fHEADERS-491"></a>

   </p><p>Header files that must be installed are specified by the
<span class="samp">HEADERS</span> family of variables.  Headers can be installed in
<code>includedir</code>, <code>oldincludedir</code>, <code>pkgincludedir</code> or any
other directory you may have defined (see <a href="#Uniform">Uniform</a>).  For instance

</p><pre class="example">     include_HEADERS = foo.h bar/bar.h
</pre>
   <p class="noindent">will install the two files as <span class="file">$(includedir)/foo.h</span> and
<span class="file">$(includedir)/bar.h</span>.

   </p><p>The <span class="samp">nobase_</span> prefix is also supported,

</p><pre class="example">     nobase_include_HEADERS = foo.h bar/bar.h
</pre>
   <p class="noindent">will install the two files as <span class="file">$(includedir)/foo.h</span> and
<span class="file">$(includedir)/bar/bar.h</span> (see <a href="#Alternative">Alternative</a>).

   </p><p><a name="index-noinst_005fHEADERS-492"></a>Usually, only header files that accompany installed libraries need to
be installed.  Headers used by programs or convenience libraries are
not installed.  The <code>noinst_HEADERS</code> variable can be used for
such headers.  However when the header actually belongs to one
convenient library or program, we recommend listing it in the
program's or library's <span class="samp">_SOURCES</span> variable (see <a href="#Program-Sources">Program Sources</a>) instead of in <code>noinst_HEADERS</code>.  This is clearer for
the <span class="file">Makefile.am</span> reader.  <code>noinst_HEADERS</code> would be the
right variable to use in a directory containing only headers and no
associated library or program.

   </p><p>All header files must be listed somewhere; in a <span class="samp">_SOURCES</span>
variable or in a <span class="samp">_HEADERS</span> variable.  Missing ones will not
appear in the distribution.

   </p><p>For header files that are built and must not be distributed, use the
<span class="samp">nodist_</span> prefix as in <code>nodist_include_HEADERS</code> or
<code>nodist_prog_SOURCES</code>.  If these generated headers are needed
during the build, you must also ensure they exist before they are
used (see <a href="#Sources">Sources</a>).

</p><div class="node">
<p></p><hr>
<a name="Data"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Sources">Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Headers">Headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-objects">Other objects</a>
<br>
</div>

<h3 class="section">8.3 Architecture-independent data files</h3>

<p><a name="index-_0040code_007b_005fDATA_007d-primary_002c-defined-493"></a><a name="index-_0040code_007bDATA_007d-primary_002c-defined-494"></a><a name="index-Primary-variable_002c-_0040code_007bDATA_007d-495"></a><a name="index-_005fDATA-496"></a>
Automake supports the installation of miscellaneous data files using the
<span class="samp">DATA</span> family of variables.
<a name="index-DATA-497"></a>
<a name="index-data_005fDATA-498"></a><a name="index-sysconf_005fDATA-499"></a><a name="index-sharedstate_005fDATA-500"></a><a name="index-localstate_005fDATA-501"></a><a name="index-pkgdata_005fDATA-502"></a>
Such data can be installed in the directories <code>datadir</code>,
<code>sysconfdir</code>, <code>sharedstatedir</code>, <code>localstatedir</code>, or
<code>pkgdatadir</code>.

   </p><p>By default, data files are <em>not</em> included in a distribution.  Of
course, you can use the <span class="samp">dist_</span> prefix to change this on a
per-variable basis.

   </p><p>Here is how Automake declares its auxiliary data files:

</p><pre class="example">     dist_pkgdata_DATA = clean-kr.am clean.am ...
</pre>
   <div class="node">
<p></p><hr>
<a name="Sources"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Data">Data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-objects">Other objects</a>
<br>
</div>

<h3 class="section">8.4 Built sources</h3>

<p>Because Automake's automatic dependency tracking works as a side-effect
of compilation (see <a href="#Dependencies">Dependencies</a>) there is a bootstrap issue: a
target should not be compiled before its dependencies are made, but
these dependencies are unknown until the target is first compiled.

   </p><p>Ordinarily this is not a problem, because dependencies are distributed
sources: they preexist and do not need to be built.  Suppose that
<span class="file">foo.c</span> includes <span class="file">foo.h</span>.  When it first compiles
<span class="file">foo.o</span>, <span class="command">make</span> only knows that <span class="file">foo.o</span> depends on
<span class="file">foo.c</span>.  As a side-effect of this compilation <code>depcomp</code>
records the <span class="file">foo.h</span> dependency so that following invocations of
<span class="command">make</span> will honor it.  In these conditions, it's clear there is
no problem: either <span class="file">foo.o</span> doesn't exist and has to be built
(regardless of the dependencies), or accurate dependencies exist and
they can be used to decide whether <span class="file">foo.o</span> should be rebuilt.

   </p><p>It's a different story if <span class="file">foo.h</span> doesn't exist by the first
<span class="command">make</span> run.  For instance there might be a rule to build
<span class="file">foo.h</span>.  This time <span class="file">file.o</span>'s build will fail because the
compiler can't find <span class="file">foo.h</span>. <span class="command">make</span> failed to trigger the
rule to build <span class="file">foo.h</span> first by lack of dependency information.

   </p><p><a name="index-BUILT_005fSOURCES-503"></a><a name="index-_0040code_007bBUILT_005fSOURCES_007d_002c-defined-504"></a>
The <code>BUILT_SOURCES</code> variable is a workaround for this problem.  A
source file listed in <code>BUILT_SOURCES</code> is made on <code>make all</code>
or <code>make check</code> (or even <code>make install</code>) before other
targets are processed.  However, such a source file is not
<em>compiled</em> unless explicitly requested by mentioning it in some
other <span class="samp">_SOURCES</span> variable.

   </p><p>So, to conclude our introductory example, we could use
<code>BUILT_SOURCES = foo.h</code> to ensure <span class="file">foo.h</span> gets built before
any other target (including <span class="file">foo.o</span>) during <code>make all</code> or
<code>make check</code>.

   </p><p><code>BUILT_SOURCES</code> is actually a bit of a misnomer, as any file which
must be created early in the build process can be listed in this
variable.  Moreover, all built sources do not necessarily have to be
listed in <code>BUILT_SOURCES</code>.  For instance a generated <span class="file">.c</span> file
doesn't need to appear in <code>BUILT_SOURCES</code> (unless it is included by
another source), because it's a known dependency of the associated
object.

   </p><p>It might be important to emphasize that <code>BUILT_SOURCES</code> is
honored only by <code>make all</code>, <code>make check</code> and <code>make
install</code>.  This means you cannot build a specific target (e.g.,
<code>make foo</code>) in a clean tree if it depends on a built source.
However it will succeed if you have run <code>make all</code> earlier,
because accurate dependencies are already available.

   </p><p>The next section illustrates and discusses the handling of built sources
on a toy example.

</p><ul class="menu">
<li><a accesskey="1" href="#Built-sources-example">Built sources example</a>:        Several ways to handle built sources.
</li></ul>

<div class="node">
<p></p><hr>
<a name="Built-sources-example"></a>Up:&nbsp;<a rel="up" accesskey="u" href="#Sources">Sources</a>
<br>
</div>

<h4 class="subsection">8.4.1 Built sources example</h4>

<p>Suppose that <span class="file">foo.c</span> includes <span class="file">bindir.h</span>, which is
installation-dependent and not distributed: it needs to be built.  Here
<span class="file">bindir.h</span> defines the preprocessor macro <code>bindir</code> to the
value of the <span class="command">make</span> variable <code>bindir</code> (inherited from
<span class="file">configure</span>).

   </p><p>We suggest several implementations below.  It's not meant to be an
exhaustive listing of all ways to handle built sources, but it will give
you a few ideas if you encounter this issue.

</p><h4 class="unnumberedsubsec">First try</h4>

<p>This first implementation will illustrate the bootstrap issue mentioned
in the previous section (see <a href="#Sources">Sources</a>).

   </p><p>Here is a tentative <span class="file">Makefile.am</span>.

</p><pre class="example">     # This won't work.
     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>This setup doesn't work, because Automake doesn't know that <span class="file">foo.c</span>
includes <span class="file">bindir.h</span>.  Remember, automatic dependency tracking works
as a side-effect of compilation, so the dependencies of <span class="file">foo.o</span> will
be known only after <span class="file">foo.o</span> has been compiled (see <a href="#Dependencies">Dependencies</a>).
The symptom is as follows.

</p><pre class="example">     % make
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     foo.c:2: bindir.h: No such file or directory
     make: *** [foo.o] Error 1
</pre>
   <p>In this example <span class="file">bindir.h</span> is not distributed, not installed, and
it is not even being built on-time.  One may wonder what the
<code>nodist_foo_SOURCES = bindir.h</code> line has any use at all.  This
line simply states that <span class="file">bindir.h</span> is a source of <code>foo</code>, so
for instance it should be inspected while generating tags
(see <a href="#Tags">Tags</a>).  In other words, it does not help our present problem,
and the build would fail identically without it.

</p><h4 class="unnumberedsubsec">Using <code>BUILT_SOURCES</code></h4>

<p>A solution is to require <span class="file">bindir.h</span> to be built before anything
else.  This is what <code>BUILT_SOURCES</code> is meant for (see <a href="#Sources">Sources</a>).

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     BUILT_SOURCES = bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>See how <span class="file">bindir.h</span> get built first:

</p><pre class="example">     % make
     echo '#define bindir "/usr/local/bin"' &gt;bindir.h
     make  all-am
     make[1]: Entering directory `/home/adl/tmp'
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     gcc  -g -O2   -o foo  foo.o
     make[1]: Leaving directory `/home/adl/tmp'
</pre>
   <p>However, as said earlier, <code>BUILT_SOURCES</code> applies only to the
<code>all</code>, <code>check</code>, and <code>install</code> targets.  It still fails
if you try to run <code>make foo</code> explicitly:

</p><pre class="example">     % make clean
     test -z "bindir.h" || rm -f bindir.h
     test -z "foo" || rm -f foo
     rm -f *.o
     % : &gt; .deps/foo.Po # Suppress previously recorded dependencies
     % make foo
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     foo.c:2: bindir.h: No such file or directory
     make: *** [foo.o] Error 1
</pre>
   <h4 class="unnumberedsubsec">Recording dependencies manually</h4>

<p>Usually people are happy enough with <code>BUILT_SOURCES</code> because they
never build targets such as <code>make foo</code> before <code>make all</code>, as
in the previous example.  However if this matters to you, you can
avoid <code>BUILT_SOURCES</code> and record such dependencies explicitly in
the <span class="file">Makefile.am</span>.

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     foo.$(OBJEXT): bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>You don't have to list <em>all</em> the dependencies of <code>foo.o</code>
explicitly, only those which might need to be built.  If a dependency
already exists, it will not hinder the first compilation and will be
recorded by the normal dependency tracking code.  (Note that after this
first compilation the dependency tracking code will also have recorded
the dependency between <code>foo.o</code> and <code>bindir.h</code>; so our explicit
dependency is really useful to the first build only.)

   </p><p>Adding explicit dependencies like this can be a bit dangerous if you are
not careful enough.  This is due to the way Automake tries not to
overwrite your rules (it assumes you know better than it).
<code>foo.$(OBJEXT): bindir.h</code> supersedes any rule Automake may want to
output to build <code>foo.$(OBJEXT)</code>.  It happens to work in this case
because Automake doesn't have to output any <code>foo.$(OBJEXT):</code>
target: it relies on a suffix rule instead (i.e., <code>.c.$(OBJEXT):</code>).
Always check the generated <span class="file">Makefile.in</span> if you do this.

</p><h4 class="unnumberedsubsec">Build <span class="file">bindir.h</span> from <span class="file">configure</span></h4>

<p>It's possible to define this preprocessor macro from <span class="file">configure</span>,
either in <span class="file">config.h</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#Defining-Directories">Defining Directories (The Autoconf Manual)</a>), or by processing a
<span class="file">bindir.h.in</span> file using <code>AC_CONFIG_FILES</code>
(see <a href="http://sources.redhat.com/automake/autoconf.html#Configuration-Actions">Configuration Actions (The Autoconf Manual)</a>).

   </p><p>At this point it should be clear that building <span class="file">bindir.h</span> from
<span class="file">configure</span> work well for this example.  <span class="file">bindir.h</span> will exist
before you build any target, hence will not cause any dependency issue.

   </p><p>The Makefile can be shrunk as follows.  We do not even have to mention
<span class="file">bindir.h</span>.

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
</pre>
   <p>However, it's not always possible to build sources from
<span class="file">configure</span>, especially when these sources are generated by a tool
that needs to be built first...

</p><h4 class="unnumberedsubsec">Build <span class="file">bindir.c</span>, not <span class="file">bindir.h</span>.</h4>

<p>Another attractive idea is to define <code>bindir</code> as a variable or
function exported from <span class="file">bindir.o</span>, and build <span class="file">bindir.c</span>
instead of <span class="file">bindir.h</span>.

</p><pre class="example">     noinst_PROGRAMS = foo
     foo_SOURCES = foo.c bindir.h
     nodist_foo_SOURCES = bindir.c
     CLEANFILES = bindir.c
     bindir.c: Makefile
             echo 'const char bindir[] = "$(bindir)";' &gt;$@
</pre>
   <p><span class="file">bindir.h</span> contains just the variable's declaration and doesn't
need to be built, so it won't cause any trouble.  <span class="file">bindir.o</span> is
always dependent on <span class="file">bindir.c</span>, so <span class="file">bindir.c</span> will get built
first.

</p><h4 class="unnumberedsubsec">Which is best?</h4>

<p>There is no panacea, of course.  Each solution has its merits and
drawbacks.

   </p><p>You cannot use <code>BUILT_SOURCES</code> if the ability to run <code>make
foo</code> on a clean tree is important to you.

   </p><p>You won't add explicit dependencies if you are leery of overriding
an Automake rule by mistake.

   </p><p>Building files from <span class="file">./configure</span> is not always possible, neither
is converting <span class="file">.h</span> files into <span class="file">.c</span> files.

</p><div class="node">
<p></p><hr>
<a name="Other-GNU-Tools"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Documentation">Documentation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-objects">Other objects</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">9 Other GNU Tools</h2>

<p>Since Automake is primarily intended to generate <span class="file">Makefile.in</span>s for
use in GNU programs, it tries hard to interoperate with other GNU tools.

</p><ul class="menu">
<li><a accesskey="1" href="#Emacs-Lisp">Emacs Lisp</a>:                   Emacs Lisp
</li><li><a accesskey="2" href="#gettext">gettext</a>:                      Gettext
</li><li><a accesskey="3" href="#Libtool">Libtool</a>:                      Libtool
</li><li><a accesskey="4" href="#Java">Java</a>:                         Java
</li><li><a accesskey="5" href="#Python">Python</a>:                       Python
</li></ul>

<div class="node">
<p></p><hr>
<a name="Emacs-Lisp"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#gettext">gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>
<br>
</div>

<h3 class="section">9.1 Emacs Lisp</h3>

<p><a name="index-_0040code_007b_005fLISP_007d-primary_002c-defined-505"></a><a name="index-_0040code_007bLISP_007d-primary_002c-defined-506"></a><a name="index-Primary-variable_002c-_0040code_007bLISP_007d-507"></a>
<a name="index-_005fLISP-508"></a><a name="index-lisp_005fLISP-509"></a><a name="index-noinst_005fLISP-510"></a>
Automake provides some support for Emacs Lisp.  The <span class="samp">LISP</span> primary
is used to hold a list of <span class="file">.el</span> files.  Possible prefixes for this
primary are <span class="samp">lisp_</span> and <span class="samp">noinst_</span>.  Note that if
<code>lisp_LISP</code> is defined, then <span class="file">configure.ac</span> must run
<code>AM_PATH_LISPDIR</code> (see <a href="#Macros">Macros</a>).

   </p><p><a name="index-dist_005flisp_005fLISP-511"></a><a name="index-dist_005fnoinst_005fLISP-512"></a>Lisp sources are not distributed by default.  You can prefix the
<code>LISP</code> primary with <code>dist_</code>, as in <code>dist_lisp_LISP</code> or
<code>dist_noinst_LISP</code>, to indicate that these files should be
distributed.

   </p><p>Automake will byte-compile all Emacs Lisp source files using the Emacs
found by <code>AM_PATH_LISPDIR</code>, if any was found.

   </p><p>Byte-compiled Emacs Lisp files are not portable among all versions of
Emacs, so it makes sense to turn this off if you expect sites to have
more than one version of Emacs installed.  Furthermore, many packages
don't actually benefit from byte-compilation.  Still, we recommend
that you byte-compile your Emacs Lisp sources.  It is probably better
for sites with strange setups to cope for themselves than to make the
installation less nice for everybody else.

   </p><p>There are two ways to avoid byte-compiling.  Historically, we have
recommended the following construct.
</p><pre class="example">     lisp_LISP = file1.el file2.el
     ELCFILES =
</pre>
   <p class="noindent"><code>ELCFILES</code> is an internal Automake variable that normally lists
all <span class="file">.elc</span> files that must be byte-compiled.  Automake defines
<code>ELCFILES</code> automatically from <code>lisp_LISP</code>.  Emptying this
variable explicitly prevents byte-compilation to occur.

   </p><p>Since Automake 1.8, we now recommend using <code>lisp_DATA</code> instead.  As
in
</p><pre class="example">     lisp_DATA = file1.el file2.el
</pre>
   <p>Note that these two constructs are not equivalent.  <code>_LISP</code> will
not install a file if Emacs is not installed, while <code>_DATA</code> will
always install its files.

</p><div class="node">
<p></p><hr>
<a name="gettext"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool">Libtool</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Emacs-Lisp">Emacs Lisp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>
<br>
</div>

<h3 class="section">9.2 Gettext</h3>

<p><a name="index-GNU-Gettext-support-513"></a><a name="index-Gettext-support-514"></a><a name="index-Support-for-GNU-Gettext-515"></a>
If <code>AM_GNU_GETTEXT</code> is seen in <span class="file">configure.ac</span>, then Automake
turns on support for GNU gettext, a message catalog system for
internationalization
(see <a href="http://sources.redhat.com/automake/gettext.html#GNU-Gettext">GNU Gettext (GNU gettext utilities)</a>).

   </p><p>The <code>gettext</code> support in Automake requires the addition of two
subdirectories to the package, <span class="file">intl</span> and <span class="file">po</span>.  Automake
insures that these directories exist and are mentioned in
<code>SUBDIRS</code>.

</p><div class="node">
<p></p><hr>
<a name="Libtool"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Java">Java</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#gettext">gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>
<br>
</div>

<h3 class="section">9.3 Libtool</h3>

<p>Automake provides support for GNU Libtool (see <a href="http://sources.redhat.com/automake/libtool.html#Top">Introduction (The Libtool Manual)</a>) with the <span class="samp">LTLIBRARIES</span> primary.
See <a href="#A-Shared-Library">A Shared Library</a>.

</p><div class="node">
<p></p><hr>
<a name="Java"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Python">Python</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool">Libtool</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>
<br>
</div>

<h3 class="section">9.4 Java</h3>

<p><a name="index-_0040code_007b_005fJAVA_007d-primary_002c-defined-516"></a><a name="index-_0040code_007bJAVA_007d-primary_002c-defined-517"></a><a name="index-Primary-variable_002c-_0040code_007bJAVA_007d-518"></a>
Automake provides some minimal support for Java compilation with the
<span class="samp">JAVA</span> primary.

   </p><p>Any <span class="file">.java</span> files listed in a <span class="samp">_JAVA</span> variable will be
compiled with <code>JAVAC</code> at build time.  By default, <span class="file">.java</span>
files are not included in the distribution, you should use the
<code>dist_</code> prefix to distribute them.

   </p><p>Here is a typical setup for distributing <span class="file">.java</span> files and
installing the <span class="file">.class</span> files resulting from their compilation.

</p><pre class="example">     javadir = $(datadir)/java
     dist_java_JAVA = a.java b.java ...
</pre>
   <p><a name="index-_0040code_007bJAVA_007d-restrictions-519"></a><a name="index-Restrictions-for-_0040code_007bJAVA_007d-520"></a>
Currently Automake enforces the restriction that only one <span class="samp">_JAVA</span>
primary can be used in a given <span class="file">Makefile.am</span>.  The reason for this
restriction is that, in general, it isn't possible to know which
<span class="file">.class</span> files were generated from which <span class="file">.java</span> files &#8211; so
it would be impossible to know which files to install where.  For
instance, a <span class="file">.java</span> file can define multiple classes; the resulting
<span class="file">.class</span> file names cannot be predicted without parsing the
<span class="file">.java</span> file.

   </p><p>There are a few variables which are used when compiling Java sources:

     </p><dl>
<dt><code>JAVAC</code><a name="index-JAVAC-521"></a></dt><dd>The name of the Java compiler.  This defaults to <span class="samp">javac</span>.

     <br></dd><dt><code>JAVACFLAGS</code><a name="index-JAVACFLAGS-522"></a></dt><dd>The flags to pass to the compiler.  This is considered to be a user
variable (see <a href="#User-Variables">User Variables</a>).

     <br></dd><dt><code>AM_JAVACFLAGS</code><a name="index-AM_005fJAVACFLAGS-523"></a></dt><dd>More flags to pass to the Java compiler.  This, and not
<code>JAVACFLAGS</code>, should be used when it is necessary to put Java
compiler flags into <span class="file">Makefile.am</span>.

     <br></dd><dt><code>JAVAROOT</code><a name="index-JAVAROOT-524"></a></dt><dd>The value of this variable is passed to the <span class="samp">-d</span> option to
<code>javac</code>.  It defaults to <span class="samp">$(top_builddir)</span>.

     <br></dd><dt><code>CLASSPATH_ENV</code><a name="index-CLASSPATH_005fENV-525"></a></dt><dd>This variable is an <code>sh</code> expression which is used to set the
<code>CLASSPATH</code> environment variable on the <code>javac</code> command line.
(In the future we will probably handle class path setting differently.)
</dd></dl>

<div class="node">
<p></p><hr>
<a name="Python"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Java">Java</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>
<br>
</div>

<h3 class="section">9.5 Python</h3>

<p><a name="index-_0040code_007b_005fPYTHON_007d-primary_002c-defined-526"></a><a name="index-_0040code_007bPYTHON_007d-primary_002c-defined-527"></a><a name="index-Primary-variable_002c-_0040code_007bPYTHON_007d-528"></a><a name="index-_005fPYTHON-529"></a>
Automake provides support for Python compilation with the <span class="samp">PYTHON</span>
primary.

   </p><p>Any files listed in a <span class="samp">_PYTHON</span> variable will be byte-compiled with
<code>py-compile</code> at install time.  <code>py-compile</code> actually creates
both standard (<span class="file">.pyc</span>) and byte-compiled (<span class="file">.pyo</span>) versions of
the source files.  Note that because byte-compilation occurs at install
time, any files listed in <span class="samp">noinst_PYTHON</span> will not be compiled.
Python source files are included in the distribution by default.

   </p><p>Automake ships with an Autoconf macro called <code>AM_PATH_PYTHON</code> which
will determine some Python-related directory variables (see below).  If
you have called <code>AM_PATH_PYTHON</code> from <span class="file">configure.ac</span>, then you
may use the following variables to list you Python source files in your
variables: <span class="samp">python_PYTHON</span>, <span class="samp">pkgpython_PYTHON</span>,
<span class="samp">pyexecdir_PYTHON</span>, <span class="samp">pkgpyexecdir_PYTHON</span>, depending where you
want your files installed.

   </p><p><code>AM_PATH_PYTHON([</code><var>VERSION</var><code>], [</code><var>ACTION-IF-FOUND</var><code>],
[</code><var>ACTION-IF-NOT-FOUND</var><code>])</code> takes three optional arguments.  It will
search a Python interpreter on the system.  The first argument, if
present, is the minimum version of Python required for this package:
<code>AM_PATH_PYTHON</code> will skip any Python interpreter which is older
than <var>VERSION</var>.  If an interpreter is found and satisfies
<var>VERSION</var>, then <var>ACTION-IF-FOUND</var> is run.  Otherwise,
<var>ACTION-IF-NOT-FOUND</var> is run.

   </p><p>If <var>ACTION-IF-NOT-FOUND</var> is not specified, the default is to abort
configure.  This is fine when Python is an absolute requirement for the
package.  Therefore if Python &gt;= 2.2 is only <em>optional</em> to the
package, <code>AM_PATH_PYTHON</code> could be called as follows.

</p><pre class="example">       AM_PATH_PYTHON(2.2,, :)
</pre>
   <p><code>AM_PATH_PYTHON</code> creates several output variables based on the
Python installation found during configuration.

     </p><dl>
<dt><code>PYTHON</code><a name="index-PYTHON-530"></a></dt><dd>The name of the Python executable, or <code>:</code> if no suitable
interpreter could be found.

     <p>Assuming <var>ACTION-IF-NOT-FOUND</var> is used (otherwise <span class="file">./configure</span>
will abort if Python is absent), the value of <code>PYTHON</code> can be used
to setup a conditional in order to disable the relevant part of a build
as follows.

     </p><pre class="example">            AM_PATH_PYTHON(,, :)
            AM_CONDITIONAL([HAVE_PYTHON], [test "$PYTHON" != :])
     </pre>
     <p>If the <var>ACTION-IF-NOT-FOUND</var>
is specified

     <br></p></dd><dt><code>PYTHON_VERSION</code><a name="index-PYTHON_005fVERSION-531"></a></dt><dd>The Python version number, in the form <var>major</var>.<var>minor</var>
(e.g. <span class="samp">1.5</span>).  This is currently the value of
<code>sys.version[:3]</code>.

     <br></dd><dt><code>PYTHON_PREFIX</code><a name="index-PYTHON_005fPREFIX-532"></a></dt><dd>The string <code>${prefix}</code>.  This term may be used in future work
which needs the contents of Python's <code>sys.prefix</code>, but general
consensus is to always use the value from configure.

     <br></dd><dt><code>PYTHON_EXEC_PREFIX</code><a name="index-PYTHON_005fEXEC_005fPREFIX-533"></a></dt><dd>The string <code>${exec_prefix}</code>.  This term may be used in future work
which needs the contents of Python's <code>sys.exec_prefix</code>, but general
consensus is to always use the value from configure.

     <br></dd><dt><code>PYTHON_PLATFORM</code><a name="index-PYTHON_005fPLATFORM-534"></a></dt><dd>The canonical name used by Python to describe the operating system, as
given by <code>sys.platform</code>.  This value is sometimes needed when
building Python extensions.

     <br></dd><dt><code>pythondir</code><a name="index-pythondir-535"></a></dt><dd>The directory name for the <span class="file">site-packages</span> subdirectory of the
standard Python install tree.

     <br></dd><dt><code>pkgpythondir</code><a name="index-pkgpythondir-536"></a></dt><dd>This is is the directory under <code>pythondir</code> which is named after the
package.  That is, it is <span class="samp">$(pythondir)/$(PACKAGE)</span>.  It is provided
as a convenience.

     <br></dd><dt><code>pyexecdir</code><a name="index-pyexecdir-537"></a></dt><dd>This is the directory where Python extension modules (shared libraries)
should be installed.

     <br></dd><dt><code>pkgpyexecdir</code><a name="index-pkgpyexecdir-538"></a></dt><dd>This is a convenience variable which is defined as
<span class="samp">$(pyexecdir)/$(PACKAGE)</span>.
</dd></dl>

   <p>All these directory variables have values that start with either
<code>${prefix}</code> or <code>${exec_prefix}</code> unexpanded.  This works
fine in <span class="file">Makefiles</span>, but it makes these variables hard to use in
<span class="file">configure</span>.  This is mandated by the GNU coding standards, so
that the user can run <code>make prefix=/foo install</code>.  The Autoconf
manual has a section with more details on this topic
(see <a href="http://sources.redhat.com/automake/autoconf.html#Installation-Directory-Variables">Installation Directory Variables (The Autoconf Manual)</a>).

</p><div class="node">
<p></p><hr>
<a name="Documentation"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Install">Install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-GNU-Tools">Other GNU Tools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">10 Building documentation</h2>

<p>Currently Automake provides support for Texinfo and man pages.

</p><ul class="menu">
<li><a accesskey="1" href="#Texinfo">Texinfo</a>:                      Texinfo
</li><li><a accesskey="2" href="#Man-pages">Man pages</a>:                    Man pages
</li></ul>

<div class="node">
<p></p><hr>
<a name="Texinfo"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Man-pages">Man pages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Documentation">Documentation</a>
<br>
</div>

<h3 class="section">10.1 Texinfo</h3>

<p><a name="index-_0040code_007b_005fTEXINFOS_007d-primary_002c-defined-539"></a><a name="index-_0040code_007bTEXINFOS_007d-primary_002c-defined-540"></a><a name="index-Primary-variable_002c-_0040code_007bTEXINFOS_007d-541"></a><a name="index-HTML-output-using-Texinfo-542"></a><a name="index-PDF-output-using-Texinfo-543"></a><a name="index-PS-output-using-Texinfo-544"></a><a name="index-DVI-output-using-Texinfo-545"></a><a name="index-_005fTEXINFOS-546"></a><a name="index-info_005fTEXINFOS-547"></a>
If the current directory contains Texinfo source, you must declare it
with the <span class="samp">TEXINFOS</span> primary.  Generally Texinfo files are converted
into info, and thus the <code>info_TEXINFOS</code> variable is most commonly used
here.  Any Texinfo source file must end in the <span class="file">.texi</span>,
<span class="file">.txi</span>, or <span class="file">.texinfo</span> extension.  We recommend <span class="file">.texi</span>
for new manuals.

   </p><p>Automake generates rules to build <span class="file">.info</span>, <span class="file">.dvi</span>, <span class="file">.ps</span>,
<span class="file">.pdf</span> and <span class="file">.html</span> files from your Texinfo sources.
The <span class="file">.info</span> files are built by <code>make all</code> and installed
by <code>make install</code> (unless you use <code>no-installinfo</code>, see below).
The other files can be built on request by <code>make dvi</code>, <code>make ps</code>,
<code>make pdf</code> and <code>make html</code>.

   </p><p><a name="index-Texinfo-flag_002c-_0040code_007bVERSION_007d-548"></a><a name="index-Texinfo-flag_002c-_0040code_007bUPDATED_007d-549"></a><a name="index-Texinfo-flag_002c-_0040code_007bEDITION_007d-550"></a><a name="index-Texinfo-flag_002c-_0040code_007bUPDATED_002dMONTH_007d-551"></a>
<a name="index-_0040code_007bVERSION_007d-Texinfo-flag-552"></a><a name="index-_0040code_007bUPDATED_007d-Texinfo-flag-553"></a><a name="index-_0040code_007bEDITION_007d-Texinfo-flag-554"></a><a name="index-_0040code_007bUPDATED_002dMONTH_007d-Texinfo-flag-555"></a>
<a name="index-_0040file_007bmdate_002dsh_007d-556"></a>
If the <span class="file">.texi</span> file <code>@include</code>s <span class="file">version.texi</span>, then
that file will be automatically generated.  The file <span class="file">version.texi</span>
defines four Texinfo flag you can reference using
<code>@value{EDITION}</code>, <code>@value{VERSION}</code>,
<code>@value{UPDATED}</code>, and <code>@value{UPDATED-MONTH}</code>.

     </p><dl>
<dt><code>EDITION</code></dt><dt><code>VERSION</code></dt><dd>Both of these flags hold the version number of your program.  They are
kept separate for clarity.

     <br></dd><dt><code>UPDATED</code></dt><dd>This holds the date the primary <span class="file">.texi</span> file was last modified.

     <br></dd><dt><code>UPDATED-MONTH</code></dt><dd>This holds the name of the month in which the primary <span class="file">.texi</span> file
was last modified.
</dd></dl>

   <p>The <span class="file">version.texi</span> support requires the <code>mdate-sh</code> program;
this program is supplied with Automake and automatically included when
<code>automake</code> is invoked with the <code>--add-missing</code> option.

   </p><p>If you have multiple Texinfo files, and you want to use the
<span class="file">version.texi</span> feature, then you have to have a separate version
file for each Texinfo file.  Automake will treat any include in a
Texinfo file that matches <span class="samp">vers*.texi</span> just as an automatically
generated version file.

   </p><p>Sometimes an info file actually depends on more than one <span class="file">.texi</span>
file.  For instance, in GNU Hello, <span class="file">hello.texi</span> includes the file
<span class="file">gpl.texi</span>.  You can tell Automake about these dependencies using
the <var>texi</var><code>_TEXINFOS</code> variable.  Here is how GNU Hello does it:
<a name="index-TEXINFOS-557"></a><a name="index-_005fTEXINFOS-558"></a>
</p><pre class="example">     info_TEXINFOS = hello.texi
     hello_TEXINFOS = gpl.texi
</pre>
   <p><a name="index-_0040file_007btexinfo_002etex_007d-559"></a>
By default, Automake requires the file <span class="file">texinfo.tex</span> to appear in
the same directory as the Texinfo source (this can be changed using the
<code>TEXINFO_TEX</code> variable, see below).  However, if you used
<code>AC_CONFIG_AUX_DIR</code> in <span class="file">configure.ac</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#Input">Finding `configure' Input (The Autoconf Manual)</a>), then
<span class="file">texinfo.tex</span> is looked for there.  Automake supplies
<span class="file">texinfo.tex</span> if <span class="samp">--add-missing</span> is given.

   </p><p><a name="index-no_002dtexinfo_002etex-560"></a>
The option <span class="samp">no-texinfo.tex</span> can be used to eliminate the
requirement for <span class="file">texinfo.tex</span>.  Use of the variable
<code>TEXINFO_TEX</code> is preferable, however, because that allows the
<code>dvi</code>, <code>ps</code>, and <code>pdf</code> targets to still work.

   </p><p><a name="index-Option_002c-_0040code_007bnoinstall_002dinfo_007d-561"></a><a name="index-Target_002c-_0040code_007binstall_002dinfo_007d-562"></a><a name="index-_0040code_007binstall_002dinfo_007d-target-563"></a><a name="index-_0040code_007bnoinstall_002dinfo_007d-option-564"></a>
<a name="index-no_002dinstallinfo-565"></a><a name="index-install_002dinfo-566"></a>
Automake generates an <code>install-info</code> rule; some people apparently
use this.  By default, info pages are installed by <span class="samp">make install</span>.
This can be prevented via the <code>no-installinfo</code> option.

   </p><p>The following variables are used by the Texinfo build rules.

     </p><dl>
<dt><code>MAKEINFO</code><a name="index-MAKEINFO-567"></a></dt><dd>The name of the program invoked to build <span class="file">.info</span> files.  This
variable is defined by Automake.  If the <code>makeinfo</code> program is
found on the system then it will be used by default; otherwise
<code>missing</code> will be used instead.

     <br></dd><dt><code>MAKEINFOHTML</code><a name="index-MAKEINFOHTML-568"></a></dt><dd>The command invoked to build <span class="file">.html</span> files.  Automake
defines this to <code>$(MAKEINFO) --html</code>.

     <br></dd><dt><code>MAKEINFOFLAGS</code><a name="index-MAKEINFOFLAGS-569"></a></dt><dd>User flags passed to each invocation of <code>$(MAKEINFO)</code> and
<code>$(MAKEINFOHTML)</code>.  This user variable (see <a href="#User-Variables">User Variables</a>) is
not expected to be defined in any <span class="file">Makefile</span>; it can be used by
users to pass extra flags to suit their needs.

     <br></dd><dt><code>AM_MAKEINFOFLAGS</code><a name="index-AM_005fMAKEINFOFLAGS-570"></a></dt><dt><code>AM_MAKEINFOHTMLFLAGS</code><a name="index-AM_005fMAKEINFOHTMLFLAGS-571"></a></dt><dd>Maintainer flags passed to each <code>makeinfo</code> invocation.  These
are maintainer variables that can be overridden in <span class="file">Makefile.am</span>.
<code>$(AM_MAKEINFOFLAGS)</code> is passed to <code>makeinfo</code> when building
<span class="file">.info</span> files; and <code>$(AM_MAKEINFOHTMLFLAGS)</code> is used when
building <span class="file">.html</span> files.

     <p>For instance the following setting can be used to obtain one single
<span class="file">.html</span> file per manual, without node separators.
     </p><pre class="example">          AM_MAKEINFOHTMLFLAGS = --no-headers --no-split
     </pre>
     <p>By default, <code>$(AM_MAKEINFOHTMLFLAGS)</code> is set to
<code>$(AM_MAKEINFOFLAGS)</code>.  This means that defining
<code>$(AM_MAKEINFOFLAGS)</code> without defining
<code>$(AM_MAKEINFOHTMLFLAGS)</code> will impact builds of both <span class="file">.info</span>
and <span class="file">.html</span> files.

     <br></p></dd><dt><code>TEXI2DVI</code><a name="index-TEXI2DVI-572"></a></dt><dd>The name of the command that converts a <span class="file">.texi</span> file into a
<span class="file">.dvi</span> file.  This defaults to <code>texi2dvi</code>, a script that ships
with the Texinfo package.

     <br></dd><dt><code>TEXI2PDF</code><a name="index-TEXI2PDF-573"></a></dt><dd>The name of the command that translates a <span class="file">.texi</span> file into a
<span class="file">.pdf</span> file.  This defaults to <code>$(TEXI2DVI) --pdf --batch</code>.

     <br></dd><dt><code>DVIPS</code><a name="index-DVIPS-574"></a></dt><dd>The name of the command that build a <span class="file">.ps</span> file out of a
<span class="file">.dvi</span> file.  This defaults to <code>dvips</code>.

     <br></dd><dt><code>TEXINFO_TEX</code><a name="index-TEXINFO_005fTEX-575"></a></dt><dd>
If your package has Texinfo files in many directories, you can use the
variable <code>TEXINFO_TEX</code> to tell Automake where to find the canonical
<span class="file">texinfo.tex</span> for your package.  The value of this variable should
be the relative path from the current <span class="file">Makefile.am</span> to
<span class="file">texinfo.tex</span>:

     <pre class="example">          TEXINFO_TEX = ../doc/texinfo.tex
     </pre>
     </dd></dl>

<div class="node">
<p></p><hr>
<a name="Man-pages"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Texinfo">Texinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Documentation">Documentation</a>
<br>
</div>

<h3 class="section">10.2 Man pages</h3>

<p><a name="index-_0040code_007b_005fMANS_007d-primary_002c-defined-576"></a><a name="index-_0040code_007bMANS_007d-primary_002c-defined-577"></a><a name="index-Primary-variable_002c-_0040code_007bMANS_007d-578"></a>
<a name="index-_005fMANS-579"></a><a name="index-man_005fMANS-580"></a>A package can also include man pages (but see the GNU standards on this
matter, <a href="http://sources.redhat.com/automake/standards.html#Man-Pages">Man Pages (The GNU Coding Standards)</a>.)  Man
pages are declared using the <span class="samp">MANS</span> primary.  Generally the
<code>man_MANS</code> variable is used.  Man pages are automatically installed in
the correct subdirectory of <code>mandir</code>, based on the file extension.

   </p><p>File extensions such as <span class="samp">.1c</span> are handled by looking for the valid
part of the extension and using that to determine the correct
subdirectory of <code>mandir</code>.  Valid section names are the digits
<span class="samp">0</span> through <span class="samp">9</span>, and the letters <span class="samp">l</span> and <span class="samp">n</span>.

   </p><p>Sometimes developers prefer to name a man page something like
<span class="file">foo.man</span> in the source, and then rename it to have the correct
suffix, e.g. <span class="file">foo.1</span>, when installing the file.  Automake also
supports this mode.  For a valid section named <var>SECTION</var>, there is a
corresponding directory named <span class="samp">man</span><var>SECTION</var><span class="samp">dir</span>, and a
corresponding <span class="samp">_MANS</span> variable.  Files listed in such a variable
are installed in the indicated section.  If the file already has a
valid suffix, then it is installed as-is; otherwise the file suffix is
changed to match the section.

   </p><p>For instance, consider this example:
</p><pre class="example">     man1_MANS = rename.man thesame.1 alsothesame.1c
</pre>
   <p>In this case, <span class="file">rename.man</span> will be renamed to <span class="file">rename.1</span> when
installed, but the other files will keep their names.

   </p><p><a name="index-Target_002c-_0040code_007binstall_002dman_007d-581"></a><a name="index-Option_002c-_0040code_007bnoinstall_002dman_007d-582"></a><a name="index-_0040code_007binstall_002dman_007d-target-583"></a><a name="index-_0040code_007bnoinstall_002dman_007d-option-584"></a><a name="index-no_002dinstallman-585"></a><a name="index-install_002dman-586"></a>
<!-- Use @samp{make install} per documentation: (texi)code. -->
By default, man pages are installed by <span class="samp">make install</span>.  However,
since the GNU project does not require man pages, many maintainers do
not expend effort to keep the man pages up to date.  In these cases, the
<code>no-installman</code> option will prevent the man pages from being
installed by default.  The user can still explicitly install them via
<span class="samp">make install-man</span>.

   </p><p>Here is how the man pages are handled in GNU <span class="command">cpio</span> (which
includes both Texinfo documentation and man pages):

</p><pre class="example">     man_MANS = cpio.1 mt.1
     EXTRA_DIST = $(man_MANS)
</pre>
   <p>Man pages are not currently considered to be source, because it is not
uncommon for man pages to be automatically generated.  Therefore they
are not automatically included in the distribution.  However, this can
be changed by use of the <span class="samp">dist_</span> prefix.

   </p><p>The <span class="samp">nobase_</span> prefix is meaningless for man pages and is
disallowed.

</p><div class="node">
<p></p><hr>
<a name="Install"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Clean">Clean</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Documentation">Documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">11 What Gets Installed</h2>

<p><a name="index-Installation-support-587"></a><a name="index-_0040code_007bmake-install_007d-support-588"></a>

</p><h3 class="section">11.1 Basics of installation</h3>

<p>Naturally, Automake handles the details of actually installing your
program once it has been built.  All files named by the various
primaries are automatically installed in the appropriate places when the
user runs <code>make install</code>.

   </p><p>A file named in a primary is installed by copying the built file into
the appropriate directory.  The base name of the file is used when
installing.

</p><pre class="example">     bin_PROGRAMS = hello subdir/goodbye
</pre>
   <p>In this example, both <span class="samp">hello</span> and <span class="samp">goodbye</span> will be installed
in <code>$(bindir)</code>.

   </p><p>Sometimes it is useful to avoid the basename step at install time.  For
instance, you might have a number of header files in subdirectories of
the source tree which are laid out precisely how you want to install
them.  In this situation you can use the <span class="samp">nobase_</span> prefix to
suppress the base name step.  For example:

</p><pre class="example">     nobase_include_HEADERS = stdio.h sys/types.h
</pre>
   <p>Will install <span class="file">stdio.h</span> in <code>$(includedir)</code> and <span class="file">types.h</span>
in <code>$(includedir)/sys</code>.

</p><h3 class="section">11.2 The two parts of install</h3>

<p>Automake generates separate <code>install-data</code> and <code>install-exec</code>
rules, in case the installer is installing on multiple machines which
share directory structure&#8212;these targets allow the machine-independent
parts to be installed only once.  <code>install-exec</code> installs
platform-dependent files, and <code>install-data</code> installs
platform-independent files.  The <code>install</code> target depends on both
of these targets.  While Automake tries to automatically segregate
objects into the correct category, the <span class="file">Makefile.am</span> author is, in
the end, responsible for making sure this is done correctly.
<a name="index-install_002ddata-589"></a><a name="index-install_002dexec-590"></a><a name="index-install-591"></a><a name="index-Install_002c-two-parts-of-592"></a>
Variables using the standard directory prefixes <span class="samp">data</span>,
<span class="samp">info</span>, <span class="samp">man</span>, <span class="samp">include</span>, <span class="samp">oldinclude</span>,
<span class="samp">pkgdata</span>, or <span class="samp">pkginclude</span> (e.g. <span class="samp">data_DATA</span>) are
installed by <span class="samp">install-data</span>.

   </p><p>Variables using the standard directory prefixes <span class="samp">bin</span>, <span class="samp">sbin</span>,
<span class="samp">libexec</span>, <span class="samp">sysconf</span>, <span class="samp">localstate</span>, <span class="samp">lib</span>, or
<span class="samp">pkglib</span> (e.g. <span class="samp">bin_PROGRAMS</span>) are installed by
<span class="samp">install-exec</span>.

   </p><p>Any variable using a user-defined directory prefix with <span class="samp">exec</span> in
the name (e.g. <span class="samp">myexecbin_PROGRAMS</span>) is installed by
<span class="samp">install-exec</span>.  All other user-defined prefixes are installed by
<span class="samp">install-data</span>.

</p><h3 class="section">11.3 Extending installation</h3>

<p>It is possible to extend this mechanism by defining an
<code>install-exec-local</code> or <code>install-data-local</code> rule.  If these
rules exist, they will be run at <span class="samp">make install</span> time.  These
rules can do almost anything; care is required.
<a name="index-install_002dexec_002dlocal-593"></a><a name="index-install_002ddata_002dlocal-594"></a>
Automake also supports two install hooks, <code>install-exec-hook</code> and
<code>install-data-hook</code>.  These hooks are run after all other install
rules of the appropriate type, exec or data, have completed.  So, for
instance, it is possible to perform post-installation modifications
using an install hook.  <a href="#Extending">Extending</a> gives some examples.
<a name="index-Install-hook-595"></a>

</p><h3 class="section">11.4 Staged installs</h3>

<p><a name="index-DESTDIR-596"></a>Automake generates support for the <span class="samp">DESTDIR</span> variable in all
install rules.  <span class="samp">DESTDIR</span> is used during the <span class="samp">make install</span>
step to relocate install objects into a staging area.  Each object and
path is prefixed with the value of <span class="samp">DESTDIR</span> before being copied
into the install area.  Here is an example of typical DESTDIR usage:

</p><pre class="example">     mkdir /tmp/staging &amp;&amp;
     make DESTDIR=/tmp/staging install
</pre>
   <p>The <span class="command">mkdir</span> command avoids a security problem if the attacker
creates a symbolic link from <span class="file">/tmp/staging</span> to a victim area;
then <span class="command">make</span> places install objects in a directory tree built under
<span class="file">/tmp/staging</span>.  If <span class="file">/gnu/bin/foo</span> and
<span class="file">/gnu/share/aclocal/foo.m4</span> are to be installed, the above command
would install <span class="file">/tmp/staging/gnu/bin/foo</span> and
<span class="file">/tmp/staging/gnu/share/aclocal/foo.m4</span>.

   </p><p>This feature is commonly used to build install images and packages.  For
more information, see <a href="http://sources.redhat.com/automake/standards.html#Makefile-Conventions">Makefile Conventions (The GNU Coding Standards)</a>.

   </p><p>Support for <span class="samp">DESTDIR</span> is implemented by coding it directly into the
install rules.  If your <span class="file">Makefile.am</span> uses a local install rule
(e.g., <code>install-exec-local</code>) or an install hook, then you must
write that code to respect <span class="samp">DESTDIR</span>.

</p><h3 class="section">11.5 Rules for the user</h3>

<p>Automake also generates rules for targets <code>uninstall</code>,
<code>installdirs</code>, and <code>install-strip</code>.
<a name="index-uninstall-597"></a><a name="index-installdirs-598"></a><a name="index-install_002dstrip-599"></a>
Automake supports <code>uninstall-local</code> and <code>uninstall-hook</code>.
There is no notion of separate uninstalls for &#8220;exec&#8221; and &#8220;data&#8221;, as
these features would not provide additional functionality.

   </p><p>Note that <code>uninstall</code> is not meant as a replacement for a real
packaging tool.

</p><div class="node">
<p></p><hr>
<a name="Clean"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Dist">Dist</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Install">Install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">12 What Gets Cleaned</h2>

<p><a name="index-_0040code_007bmake-clean_007d-support-600"></a>
The GNU Makefile Standards specify a number of different clean rules.
See <a href="http://sources.redhat.com/automake/standards.html#Standard-Targets">Standard Targets for Users (The GNU Coding Standards)</a>.

   </p><p>Generally the files that can be cleaned are determined automatically by
Automake.  Of course, Automake also recognizes some variables that can
be defined to specify additional files to clean.  These variables are
<code>MOSTLYCLEANFILES</code>, <code>CLEANFILES</code>, <code>DISTCLEANFILES</code>, and
<code>MAINTAINERCLEANFILES</code>.
<a name="index-MOSTLYCLEANFILES-601"></a><a name="index-CLEANFILES-602"></a><a name="index-DISTCLEANFILES-603"></a><a name="index-MAINTAINERCLEANFILES-604"></a>
<a name="index-mostlyclean_002dlocal-605"></a><a name="index-clean_002dlocal-606"></a><a name="index-distclean_002dlocal-607"></a><a name="index-maintainer_002dclean_002dlocal-608"></a>When cleaning involves more than deleting some hard-coded list of
files, it is also possible to supplement the cleaning rules with your
own commands.  Simply define a rule for any of the
<code>mostlyclean-local</code>, <code>clean-local</code>, <code>distclean-local</code>,
or <code>maintainer-clean-local</code> targets (see <a href="#Extending">Extending</a>).  A common
case is deleting a directory, for instance a directory created by the
test suite:

</p><pre class="example">     clean-local:
             -rm -rf testSubDir
</pre>
   <p>As the GNU Standards aren't always explicit as to which files should
be removed by which rule, we've adopted a heuristic which we believe
was first formulated by François Pinard:

     </p><ul>
<li>If <code>make</code> built it, and it is commonly something that one would
want to rebuild (for instance, a <span class="file">.o</span> file), then
<code>mostlyclean</code> should delete it.

     </li><li>Otherwise, if <code>make</code> built it, then <code>clean</code> should delete it.

     </li><li>If <code>configure</code> built it, then <code>distclean</code> should delete it.

     </li><li>If the maintainer built it (for instance, a <span class="file">.info</span> file), then
<code>maintainer-clean</code> should delete it.  However
<code>maintainer-clean</code> should not delete anything that needs to exist
in order to run <code>./configure &amp;&amp; make</code>.
</li></ul>

   <p>We recommend that you follow this same set of heuristics in your
<span class="file">Makefile.am</span>.

</p><div class="node">
<p></p><hr>
<a name="Dist"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Tests">Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Clean">Clean</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">13 What Goes in a Distribution</h2>

<h3 class="section">13.1 Basics of distribution</h3>

<p><a name="index-_0040code_007bmake-dist_007d-609"></a>
<a name="index-PACKAGE-610"></a><a name="index-VERSION-611"></a><a name="index-dist-612"></a>The <code>dist</code> rule in the generated <span class="file">Makefile.in</span> can be used
to generate a gzip'd <code>tar</code> file and other flavors of archive for
distribution.  The files is named based on the <span class="samp">PACKAGE</span> and
<span class="samp">VERSION</span> variables defined by <code>AM_INIT_AUTOMAKE</code>
(see <a href="#Macros">Macros</a>); more precisely the gzip'd <code>tar</code> file is named
<var>package</var><span class="samp">-</span><var>version</var><span class="samp">.tar.gz</span>.
<a name="index-GZIP_005fENV-613"></a>You can use the <code>make</code> variable <span class="samp">GZIP_ENV</span> to control how gzip
is run.  The default setting is <span class="samp">--best</span>.

   </p><p><a name="index-_0040code_007bm4_005finclude_007d_002c-distribution-614"></a><a name="index-_0040code_007binclude_007d_002c-distribution-615"></a><a name="index-m4_005finclude-616"></a><a name="index-include-617"></a>For the most part, the files to distribute are automatically found by
Automake: all source files are automatically included in a distribution,
as are all <span class="file">Makefile.am</span>s and <span class="file">Makefile.in</span>s.  Automake also
has a built-in list of commonly used files which are automatically
included if they are found in the current directory (either physically,
or as the target of a <span class="file">Makefile.am</span> rule).  This list is printed by
<span class="samp">automake --help</span>.  Also, files which are read by <code>configure</code>
(i.e. the source files corresponding to the files specified in various
Autoconf macros such as <code>AC_CONFIG_FILES</code> and siblings) are
automatically distributed.  Files included in <span class="file">Makefile.am</span>s (using
<code>include</code>) or in <span class="file">configure.ac</span> (using <code>m4_include</code>), and
helper scripts installed with <span class="samp">automake --add-missing</span> are also
distributed.

   </p><p><a name="index-EXTRA_005fDIST-618"></a>Still, sometimes there are files which must be distributed, but which
are not covered in the automatic rules.  These files should be listed in
the <code>EXTRA_DIST</code> variable.  You can mention files from
subdirectories in <code>EXTRA_DIST</code>.

   </p><p>You can also mention a directory in <code>EXTRA_DIST</code>; in this case the
entire directory will be recursively copied into the distribution.
Please note that this will also copy <em>everything</em> in the directory,
including CVS/RCS version control files.  We recommend against using
this feature.

   </p><p><a name="index-SUBDIRS-619"></a><a name="index-DIST_005fSUBDIRS-620"></a>If you define <code>SUBDIRS</code>, Automake will recursively include the
subdirectories in the distribution.  If <code>SUBDIRS</code> is defined
conditionally (see <a href="#Conditionals">Conditionals</a>), Automake will normally include
all directories that could possibly appear in <code>SUBDIRS</code> in the
distribution.  If you need to specify the set of directories
conditionally, you can set the variable <code>DIST_SUBDIRS</code> to the
exact list of subdirectories to include in the distribution
(see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>).

</p><h3 class="section">13.2 Fine-grained distribution control</h3>

<p><a name="index-dist_005f-621"></a><a name="index-nodist_005f-622"></a>Sometimes you need tighter control over what does <em>not</em> go into the
distribution; for instance you might have source files which are
generated and which you do not want to distribute.  In this case
Automake gives fine-grained control using the <span class="samp">dist</span> and
<span class="samp">nodist</span> prefixes.  Any primary or <span class="samp">_SOURCES</span> variable can be
prefixed with <span class="samp">dist_</span> to add the listed files to the distribution.
Similarly, <span class="samp">nodist_</span> can be used to omit the files from the
distribution.

   </p><p>As an example, here is how you would cause some data to be distributed
while leaving some source code out of the distribution:

</p><pre class="example">     dist_data_DATA = distribute-this
     bin_PROGRAMS = foo
     nodist_foo_SOURCES = do-not-distribute.c
</pre>
   <h3 class="section">13.3 The dist hook</h3>

<p><a name="index-dist_002dhook-623"></a>
Occasionally it is useful to be able to change the distribution before
it is packaged up.  If the <code>dist-hook</code> rule exists, it is run
after the distribution directory is filled, but before the actual tar
(or shar) file is created.  One way to use this is for distributing
files in subdirectories for which a new <span class="file">Makefile.am</span> is overkill:

</p><pre class="example">     dist-hook:
             mkdir $(distdir)/random
             cp -p $(srcdir)/random/a1 $(srcdir)/random/a2 $(distdir)/random
</pre>
   <p>Another way to to use this is for removing unnecessary files that get
recursively included by specifying a directory in EXTRA_DIST:

</p><pre class="example">     EXTRA_DIST = doc

     dist-hook:
             rm -rf `find $(distdir)/doc -name CVS`
</pre>
   <p><a name="index-distdir-624"></a><a name="index-top_005fdistdir-625"></a>Two variables that come handy when writing <code>dist-hook</code> rules are
<code>$(distdir)</code> and <code>$(top_distdir)</code>.

   </p><p><code>$(distdir)</code> points to the directory where the <code>dist</code> rule
will copy files from the current directory before creating the
tarball.  If you are at the top-level directory, then <code>distdir =
$(PACKAGE)-$(VERSION)</code>.  When used from subdirectory named
<span class="file">foo/</span>, then <code>distdir = ../$(PACKAGE)-$(VERSION)/foo</code>.
<code>$(distdir)</code> can be a relative or absolute path, do not assume
any form.

   </p><p><code>$(top_distdir)</code> always points to the root directory of the
distributed tree.  At the top-level it's equal to <code>$(distdir)</code>.
In the <span class="file">foo/</span> subdirectory
<code>top_distdir = ../$(PACKAGE)-$(VERSION)</code>.
<code>$(top_distdir)</code> too can be a relative or absolute path.

   </p><p>Note that when packages are nested using <code>AC_CONFIG_SUBDIRS</code>
(see <a href="#Subpackages">Subpackages</a>), then <code>$(distdir)</code> and
<code>$(top_distdir)</code> are relative to the package where <code>make
dist</code> was run, not to any sub-packages involved.

</p><h3 class="section">13.4 Checking the distribution</h3>

<p><a name="index-_0040code_007bmake-distcheck_007d-626"></a><a name="index-_0040code_007bmake-distcleancheck_007d-627"></a><a name="index-distcleancheck_005flistfiles-628"></a><a name="index-_0040code_007bmake-distuninstallcheck_007d-629"></a><a name="index-distuninstallcheck_005flistfiles-630"></a>
<a name="index-distcheck-631"></a>Automake also generates a <code>distcheck</code> rule which can be of help
to ensure that a given distribution will actually work.
<code>distcheck</code> makes a distribution, then tries to do a <code>VPATH</code>
build, run the test suite, and finally make another tarfile to ensure the
distribution is self-contained.

   </p><p><a name="index-DISTCHECK_005fCONFIGURE_005fFLAGS-632"></a>Building the package involves running <code>./configure</code>.  If you need
to supply additional flags to <code>configure</code>, define them in the
<code>DISTCHECK_CONFIGURE_FLAGS</code> variable, either in your top-level
<span class="file">Makefile.am</span>, or on the command line when invoking <code>make</code>.

   </p><p><a name="index-distcheck_002dhook-633"></a>If the <code>distcheck-hook</code> rule is defined in your top-level
<span class="file">Makefile.am</span>, then it will be invoked by <code>distcheck</code> after
the new distribution has been unpacked, but before the unpacked copy
is configured and built.  Your <code>distcheck-hook</code> can do almost
anything, though as always caution is advised.  Generally this hook is
used to check for potential distribution errors not caught by the
standard mechanism.  Note that <code>distcheck-hook</code> as well as
<code>DISTCHECK_CONFIGURE_FLAGS</code> are not honored in a subpackage
<span class="file">Makefile.am</span>, but the <code>DISTCHECK_CONFIGURE_FLAGS</code> are
passed down to the <code>configure</code> script of the subpackage.

   </p><p><a name="index-distcleancheck-634"></a><a name="index-DISTCLEANFILES-635"></a><a name="index-distcleancheck_005flistfiles-636"></a>Speaking about potential distribution errors, <code>distcheck</code> will also
ensure that the <code>distclean</code> rule actually removes all built
files.  This is done by running <code>make distcleancheck</code> at the end of
the <code>VPATH</code> build.  By default, <code>distcleancheck</code> will run
<code>distclean</code> and then make sure the build tree has been emptied by
running <code>$(distcleancheck_listfiles)</code>.  Usually this check will
find generated files that you forgot to add to the <code>DISTCLEANFILES</code>
variable (see <a href="#Clean">Clean</a>).

   </p><p>The <code>distcleancheck</code> behavior should be OK for most packages,
otherwise you have the possibility to override the definition of
either the <code>distcleancheck</code> rule, or the
<code>$(distcleancheck_listfiles)</code> variable.  For instance to disable
<code>distcleancheck</code> completely, add the following rule to your
top-level <span class="file">Makefile.am</span>:

</p><pre class="example">     distcleancheck:
             @:
</pre>
   <p>If you want <code>distcleancheck</code> to ignore built files which have not
been cleaned because they are also part of the distribution, add the
following definition instead:

</p><pre class="example">     distcleancheck_listfiles = \
       find -type f -exec sh -c 'test -f $(srcdir)/{} || echo {}' ';'
</pre>
   <p>The above definition is not the default because it's usually an error if
your Makefiles cause some distributed files to be rebuilt when the user
build the package.  (Think about the user missing the tool required to
build the file; or if the required tool is built by your package,
consider the cross-compilation case where it can't be run.)  There is
a FAQ entry about this (see <a href="#distcleancheck">distcleancheck</a>), make sure you read it
before playing with <code>distcleancheck_listfiles</code>.

   </p><p><code>distcheck</code> also checks that the <code>uninstall</code> rule works
properly, both for ordinary and <span class="samp">DESTDIR</span> builds.  It does this
by invoking <code>make uninstall</code>, and then it checks the install tree
to see if any files are left over.  This check will make sure that you
correctly coded your <code>uninstall</code>-related rules.

   </p><p>By default, the checking is done by the <code>distuninstallcheck</code> rule,
and the list of files in the install tree is generated by
<code>$(distuninstallcheck_listfiles</code>) (this is a variable whose value is
a shell command to run that prints the list of files to stdout).

   </p><p>Either of these can be overridden to modify the behavior of
<code>distcheck</code>.  For instance, to disable this check completely, you
would write:

</p><pre class="example">     distuninstallcheck:
             @:
</pre>
   <h3 class="section">13.5 The types of distributions</h3>

<p>Automake generates rules to provide archives of the project for
distributions in various formats.  Their targets are:

     </p><dl>
<dt><code>dist-bzip2</code></dt><dd>Generate a bzip2 tar archive of the distribution.  bzip2 archives are
frequently smaller than gzipped archives.
<a name="index-dist_002dbzip2-637"></a>
<br></dd><dt><code>dist-gzip</code></dt><dd>Generate a gzip tar archive of the distribution.
<a name="index-dist_002dgzip-638"></a>
<br></dd><dt><code>dist-shar</code></dt><dd>Generate a shar archive of the distribution.
<a name="index-dist_002dshar-639"></a>
<br></dd><dt><code>dist-zip</code></dt><dd>Generate a zip archive of the distribution.
<a name="index-dist_002dzip-640"></a>
<br></dd><dt><code>dist-tarZ</code></dt><dd>Generate a compressed tar archive of
the distribution.
<a name="index-dist_002dtarZ-641"></a></dd></dl>

   <p>The rule <code>dist</code> (and its historical synonym <code>dist-all</code>) will
create archives in all the enabled formats, <a href="#Options">Options</a>.  By
default, only the <code>dist-gzip</code> target is hooked to <code>dist</code>.

</p><div class="node">
<p></p><hr>
<a name="Tests"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Rebuilding">Rebuilding</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dist">Dist</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">14 Support for test suites</h2>

<p><a name="index-Test-suites-642"></a><a name="index-_0040code_007bmake-check_007d-643"></a><a name="index-check-644"></a>
Automake supports two forms of test suites.

</p><h3 class="section">14.1 Simple Tests</h3>

<p>If the variable <code>TESTS</code> is defined, its value is taken to be a list
of programs to run in order to do the testing.  The programs can either
be derived objects or source objects; the generated rule will look both
in <code>srcdir</code> and <span class="file">.</span>.  Programs needing data files should look
for them in <code>srcdir</code> (which is both an environment variable and a
make variable) so they work when building in a separate directory
(see <a href="http://sources.redhat.com/automake/autoconf.html#Build-Directories">Build Directories (The Autoconf Manual)</a>), and in particular for the <code>distcheck</code> rule
(see <a href="#Dist">Dist</a>).

   </p><p><a name="index-Exit-status-77_002c-special-interpretation-645"></a>
The number of failures will be printed at the end of the run.  If a
given test program exits with a status of 77, then its result is ignored
in the final count.  This feature allows non-portable tests to be
ignored in environments where they don't make sense.

   </p><p>The variable <code>TESTS_ENVIRONMENT</code> can be used to set environment
variables for the test run; the environment variable <code>srcdir</code> is
set in the rule.  If all your test programs are scripts, you can also
set <code>TESTS_ENVIRONMENT</code> to an invocation of the shell (e.g.
<span class="samp">$(SHELL) -x</span>); this can be useful for debugging the tests.
<a name="index-TESTS-646"></a><a name="index-TESTS_005fENVIRONMENT-647"></a>
<a name="index-Tests_002c-expected-failure-648"></a><a name="index-Expected-test-failure-649"></a>
You may define the variable <code>XFAIL_TESTS</code> to a list of tests
(usually a subset of <code>TESTS</code>) that are expected to fail.  This will
reverse the result of those tests.
<a name="index-XFAIL_005fTESTS-650"></a>
Automake ensures that each program listed in <code>TESTS</code> is built
before any tests are run; you can list both source and derived programs
in <code>TESTS</code>.  For instance, you might want to run a C program as a
test.  To do this you would list its name in <code>TESTS</code> and also in
<code>check_PROGRAMS</code>, and then specify it as you would any other
program.

</p><h3 class="section">14.2 DejaGnu Tests</h3>

<p>If <a href="ftp://ftp.gnu.org/gnu/dejagnu/"><span class="samp">dejagnu</span></a> appears in
<code>AUTOMAKE_OPTIONS</code>, then a <code>dejagnu</code>-based test suite is
assumed.  The variable <code>DEJATOOL</code> is a list of names which are
passed, one at a time, as the <code>--tool</code> argument to <code>runtest</code>
invocations; it defaults to the name of the package.

   </p><p>The variable <code>RUNTESTDEFAULTFLAGS</code> holds the <code>--tool</code> and
<code>--srcdir</code> flags that are passed to dejagnu by default; this can be
overridden if necessary.
<a name="index-RUNTESTDEFAULTFLAGS-651"></a>
The variables <code>EXPECT</code> and <code>RUNTEST</code> can
also be overridden to provide project-specific values.  For instance,
you will need to do this if you are testing a compiler toolchain,
because the default values do not take into account host and target
names.
<a name="index-dejagnu-652"></a><a name="index-DEJATOOL-653"></a><a name="index-EXPECT-654"></a><a name="index-RUNTEST-655"></a>
The contents of the variable <code>RUNTESTFLAGS</code> are passed to the
<code>runtest</code> invocation.  This is considered a &#8220;user variable&#8221;
(see <a href="#User-Variables">User Variables</a>).  If you need to set <code>runtest</code> flags in
<span class="file">Makefile.am</span>, you can use <code>AM_RUNTESTFLAGS</code> instead.
<a name="index-RUNTESTFLAGS-656"></a><a name="index-AM_005fRUNTESTFLAGS-657"></a>
<a name="index-_0040file_007bsite_002eexp_007d-658"></a>Automake will generate rules to create a local <span class="file">site.exp</span> file,
defining various variables detected by <code>./configure</code>.  This file
is automatically read by DejaGnu.  It is OK for the user of a package
to edit this file in order to tune the test suite.  However this is
not the place where the test suite author should define new variables:
this should be done elsewhere in the real test suite code.
Especially, <span class="file">site.exp</span> should not be distributed.

   </p><p>For more information regarding DejaGnu test suites, see <a href="http://sources.redhat.com/automake/dejagnu.html#Top">Top (The DejaGnu Manual)</a>.

   </p><p>In either case, the testing is done via <span class="samp">make check</span>.

</p><h3 class="section">14.3 Install Tests</h3>

<p>The <code>installcheck</code> target is available to the user as a way to
run any tests after the package has been installed.  You can add tests
to this by writing an <code>installcheck-local</code> rule.

</p><div class="node">
<p></p><hr>
<a name="Rebuilding"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Options">Options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tests">Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">15 Rebuilding Makefiles</h2>

<p><a name="index-rebuild-rules-659"></a>
Automake generates rules to automatically rebuild <span class="file">Makefile</span>s,
<span class="file">configure</span>, and other derived files like <span class="file">Makefile.in</span>.

   </p><p><a name="index-AM_005fMAINTAINER_005fMODE-660"></a>If you are using <code>AM_MAINTAINER_MODE</code> in <span class="file">configure.ac</span>, then
these automatic rebuilding rules are only enabled in maintainer mode.

   </p><p><a name="index-ACLOCAL_005fAMFLAGS-661"></a>Sometimes you need to run <code>aclocal</code> with an argument like <code>-I</code>
to tell it where to find <span class="file">.m4</span> files.  Since sometimes <code>make</code>
will automatically run <code>aclocal</code>, you need a way to specify these
arguments.  You can do this by defining <code>ACLOCAL_AMFLAGS</code>; this
holds arguments which are passed verbatim to <code>aclocal</code>.  This variable
is only useful in the top-level <span class="file">Makefile.am</span>.

   </p><p><a name="index-CONFIG_005fSTATUS_005fDEPENDENCIES-662"></a><a name="index-CONFIGURE_005fDEPENDENCIES-663"></a><a name="index-_0040file_007bversion_002esh_007d_002c-example-664"></a><a name="index-_0040file_007bversion_002em4_007d_002c-example-665"></a>
Sometimes it is convenient to supplement the rebuild rules for
<span class="file">configure</span> or <span class="file">config.status</span> with additional dependencies.
The variables <code>CONFIGURE_DEPENDENCIES</code> and
<code>CONFIG_STATUS_DEPENDENCIES</code> can be used to list these extra
dependencies.  These variable should be defined in all
<span class="file">Makefile</span>s of the tree (because these two rebuild rules are
output in all them), so it is safer and easier to <code>AC_SUBST</code> them
from <span class="file">configure.ac</span>.  For instance the following statement will
cause <span class="file">configure</span> to be rerun each time <span class="file">version.sh</span> is
changed.
</p><pre class="example">     AC_SUBST([CONFIG_STATUS_DEPENDENCIES], ['$(top_srcdir)/version.sh'])
</pre>
   <p class="noindent">Note the <code>$(top_srcdir)/</code> in the filename.  Since this variable
is to be used in all <span class="file">Makefile</span>s, its value must be sensible at
any level in the build hierarchy.

   </p><p>Beware not to mistake <code>CONFIGURE_DEPENDENCIES</code> for
<code>CONFIG_STATUS_DEPENDENCIES</code>.

   </p><p><code>CONFIGURE_DEPENDENCIES</code> adds dependencies to the
<span class="file">configure</span> rule, whose effect is to run <code>autoconf</code>.  This
variable should be seldom used, because <code>automake</code> already tracks
<code>m4_include</code>d files.  However it can be useful when playing
tricky games with <code>m4_esyscmd</code> or similar non-recommendable
macros with side effects.

   </p><p><code>CONFIG_STATUS_DEPENDENCIES</code> adds dependencies to the
<span class="file">config.status</span> rule, whose effect is to run <span class="file">configure</span>.
This variable should therefore carry any non-standard source that may
be read as a side effect of running configure, like <span class="file">version.sh</span>
in the example above.

   </p><p>Speaking of <span class="file">version.sh</span> scripts, we recommend against them
today.  They are mainly used when the version of a package is updated
automatically by a script (e.g., in daily builds).  Here is what some
old-style <span class="file">configure.ac</span>s may look like:
</p><pre class="example">     AC_INIT
     . $srcdir/version.sh
     AM_INIT_AUTOMAKE([name], $VERSION_NUMBER)
     ...
</pre>
   <p class="noindent">Here, <span class="file">version.sh</span> is a shell fragment that sets
<code>VERSION_NUMBER</code>.  The problem with this example is that
<code>automake</code> cannot track dependencies (listing <span class="file">version.sh</span>
in <code>CONFIG_STATUS_DEPENDENCIES</code>, and distributing this file is up
to the user), and that it uses the obsolete form of <code>AC_INIT</code> and
<code>AM_INIT_AUTOMAKE</code>.  Upgrading to the new syntax is not
straightforward, because shell variables are not allowed in
<code>AC_INIT</code>'s arguments.  We recommend that <span class="file">version.sh</span> be
replaced by an M4 file that is included by <span class="file">configure.ac</span>:
</p><pre class="example">     m4_include([version.m4])
     AC_INIT([name], VERSION_NUMBER)
     AM_INIT_AUTOMAKE
     ...
</pre>
   <p class="noindent">Here <span class="file">version.m4</span> could contain something like
<code>m4_define([VERSION_NUMBER], [1.2])</code>.  The advantage of this
second form is that <code>automake</code> will take care of the dependencies
when defining the rebuild rule, and will also distribute the file
automatically.  An inconvenience is that <code>autoconf</code> will now be
rerun each time the version number is bumped, when only
<span class="file">configure</span> had to be rerun in the previous setup.

</p><div class="node">
<p></p><hr>
<a name="Options"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Miscellaneous">Miscellaneous</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rebuilding">Rebuilding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">16 Changing Automake's Behavior</h2>

<p>Various features of Automake can be controlled by options in the
<span class="file">Makefile.am</span>.  Such options are applied on a per-<span class="file">Makefile</span>
basis when listed in a special <span class="file">Makefile</span> variable named
<code>AUTOMAKE_OPTIONS</code>.  They are applied globally to all processed
<span class="file">Makefiles</span> when listed in the first argument of
<code>AM_INIT_AUTOMAKE</code> in <span class="file">configure.ac</span>.  Currently understood
options are:
<a name="index-AUTOMAKE_005fOPTIONS-666"></a>
     </p><dl>
<dt><code>gnits</code></dt><dt><code>gnu</code></dt><dt><code>foreign</code></dt><dt><code>cygnus</code></dt><dd><a name="index-Option_002c-_0040code_007bgnits_007d-667"></a><a name="index-Option_002c-_0040code_007bgnu_007d-668"></a><a name="index-Option_002c-_0040code_007bforeign_007d-669"></a><a name="index-Option_002c-_0040code_007bcygnus_007d-670"></a><a name="index-gnits-671"></a><a name="index-gnu-672"></a><a name="index-foreign-673"></a><a name="index-cygnus-674"></a>
Set the strictness as appropriate.  The <code>gnits</code> option also implies
<code>readme-alpha</code> and <code>check-news</code>.

     <br></dd><dt><code>ansi2knr</code></dt><dt><var>path</var><code>/ansi2knr</code></dt><dd><a name="index-Option_002c-_0040code_007bansi2knr_007d-675"></a><a name="index-ansi2knr-676"></a>Turn on automatic de-ANSI-fication.  See <a href="#ANSI">ANSI</a>.  If preceded by a
path, the generated <span class="file">Makefile.in</span> will look in the specified
directory to find the <span class="file">ansi2knr</span> program.  The path should be a
relative path to another directory in the same distribution (Automake
currently does not check this).

     <br></dd><dt><code>check-news</code></dt><dd><a name="index-Option_002c-_0040code_007bcheck_002dnews_007d-677"></a><a name="index-check_002dnews-678"></a>Cause <code>make dist</code> to fail unless the current version number appears
in the first few lines of the <span class="file">NEWS</span> file.

     <br></dd><dt><code>dejagnu</code></dt><dd><a name="index-Option_002c-_0040code_007bdejagnu_007d-679"></a><a name="index-dejagnu-680"></a>Cause <code>dejagnu</code>-specific rules to be generated.  See <a href="#Tests">Tests</a>.

     <br></dd><dt><code>dist-bzip2</code></dt><dd><a name="index-Option_002c-_0040code_007bdist_002dbzip2_007d-681"></a><a name="index-dist_002dbzip2-682"></a>Hook <code>dist-bzip2</code> to <code>dist</code>.
<a name="index-dist_002dbzip2-683"></a>
<br></dd><dt><code>dist-shar</code></dt><dd><a name="index-Option_002c-_0040code_007bdist_002dshar_007d-684"></a><a name="index-dist_002dshar-685"></a>Hook <code>dist-shar</code> to <code>dist</code>.
<a name="index-dist_002dshar-686"></a>
<br></dd><dt><code>dist-zip</code></dt><dd><a name="index-Option_002c-_0040code_007bdist_002dzip_007d-687"></a><a name="index-dist_002dzip-688"></a>Hook <code>dist-zip</code> to <code>dist</code>.
<a name="index-dist_002dzip-689"></a>
<br></dd><dt><code>dist-tarZ</code></dt><dd><a name="index-Option_002c-_0040code_007bdist_002dtarZ_007d-690"></a><a name="index-dist_002dtarZ-691"></a>Hook <code>dist-tarZ</code> to <code>dist</code>.
<a name="index-dist_002dtarZ-692"></a>
<br></dd><dt><code>filename-length-max=99</code></dt><dd><a name="index-Option_002c-_0040code_007bfilename_002dlength_002dmax_003d99_007d-693"></a><a name="index-filename_002dlength_002dmax_003d99-694"></a>Abort if filenames longer than 99 characters are found during
<code>make dist</code>.  Such long filenames are generally considered not to
be portable in tarballs.  See the <code>tar-v7</code> and <code>tar-ustar</code>
options below.  This option should be used in the top-level
<span class="file">Makefile.am</span> or as an argument of <code>AM_INIT_AUTOMAKE</code> in
<span class="file">configure.ac</span>, it will be ignored otherwise.

     <br></dd><dt><code>no-define</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002ddefine_007d-695"></a><a name="index-no_002ddefine-696"></a>This options is meaningful only when passed as an argument to
<code>AM_INIT_AUTOMAKE</code>.  It will prevent the <code>PACKAGE</code> and
<code>VERSION</code> variables to be <code>AC_DEFINE</code>d.

     <br></dd><dt><code>no-dependencies</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002ddependencies_007d-697"></a><a name="index-no_002ddependencies-698"></a>This is similar to using <span class="samp">--include-deps</span> on the command line,
but is useful for those situations where you don't have the necessary
bits to make automatic dependency tracking work
(see <a href="#Dependencies">Dependencies</a>).  In this case the effect is to effectively
disable automatic dependency tracking.

     <br></dd><dt><code>no-dist</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002ddist_007d-699"></a><a name="index-no_002ddist-700"></a>Don't emit any code related to <code>dist</code> target.  This is useful
when a package has its own method for making distributions.

     <br></dd><dt><code>no-dist-gzip</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002ddist_002dgzip_007d-701"></a><a name="index-no_002ddist_002dgzip-702"></a>Do not hook <code>dist-gzip</code> to <code>dist</code>.
<a name="index-no_002ddist_002dgzip-703"></a>
<br></dd><dt><code>no-exeext</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002dexeext_007d-704"></a><a name="index-no_002dexeext-705"></a>If your <span class="file">Makefile.am</span> defines a rule for target <span class="samp">foo</span>, it
will override a rule for a target named <span class="samp">foo$(EXEEXT)</span>.  This is
necessary when <code>EXEEXT</code> is found to be empty.  However, by
default automake will generate an error for this use.  The
<code>no-exeext</code> option will disable this error.  This is intended for
use only where it is known in advance that the package will not be
ported to Windows, or any other operating system using extensions on
executables.

     <br></dd><dt><code>no-installinfo</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002dinstallinfo_007d-706"></a><a name="index-no_002dinstallinfo-707"></a>The generated <span class="file">Makefile.in</span> will not cause info pages to be built
or installed by default.  However, <code>info</code> and <code>install-info</code>
targets will still be available.  This option is disallowed at
<span class="samp">GNU</span> strictness and above.
<a name="index-info-708"></a><a name="index-install_002dinfo-709"></a>
<br></dd><dt><code>no-installman</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002dinstallman_007d-710"></a><a name="index-no_002dinstallman-711"></a>The generated <span class="file">Makefile.in</span> will not cause man pages to be
installed by default.  However, an <code>install-man</code> target will still
be available for optional installation.  This option is disallowed at
<span class="samp">GNU</span> strictness and above.
<a name="index-install_002dman-712"></a>
<br></dd><dt><code>nostdinc</code></dt><dd><a name="index-Option_002c-_0040code_007bnostdinc_007d-713"></a><a name="index-nostdinc-714"></a>This option can be used to disable the standard <span class="samp">-I</span> options which
are ordinarily automatically provided by Automake.

     <br></dd><dt><code>no-texinfo.tex</code></dt><dd><a name="index-Option_002c-_0040code_007bno_002dtexinfo_002etex_007d-715"></a><a name="index-no_002dtexinfo_002etex-716"></a>Don't require <span class="file">texinfo.tex</span>, even if there are texinfo files in
this directory.

     <br></dd><dt><code>readme-alpha</code></dt><dd><a name="index-Option_002c-_0040code_007breadme_002dalpha_007d-717"></a><a name="index-readme_002dalpha-718"></a>If this release is an alpha release, and the file <span class="file">README-alpha</span>
exists, then it will be added to the distribution.  If this option is
given, version numbers are expected to follow one of two forms.  The
first form is <var>MAJOR</var><span class="samp">.</span><var>MINOR</var><span class="samp">.</span><var>ALPHA</var>, where each
element is a number; the final period and number should be left off for
non-alpha releases.  The second form is
<var>MAJOR</var><span class="samp">.</span><var>MINOR</var><var>ALPHA</var>, where <var>ALPHA</var> is a
letter; it should be omitted for non-alpha releases.

     <br></dd><dt><code>std-options</code></dt><dd><a name="index-Options_002c-_0040code_007bstd_002doptions_007d-719"></a><a name="index-_0040code_007bmake-installcheck_007d_002c-testing-_0040code_007b_002d_002dhelp_007d-and-_0040code_007b_002d_002dversion_007d-720"></a><a name="index-_0040code_007b_002d_002dhelp_007d-check-721"></a><a name="index-_0040code_007b_002d_002dversion_007d-check-722"></a><a name="index-std_002doptions-723"></a>
Make the <code>installcheck</code> rule check that installed scripts and
programs support the <code>--help</code> and <code>--version</code> options.
This also provides a basic check that the program's
run-time dependencies are satisfied after installation.

     <p><a name="index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT-724"></a>In a few situations, programs (or scripts) have to be exempted from this
test.  For instance <span class="command">false</span> (from GNU sh-utils) is never
successful, even for <code>--help</code> or <code>--version</code>.  You can list
such programs in the variable <code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code>.
Programs (not scripts) listed in this variable should be suffixed by
<code>$(EXEEXT)</code> for the sake of Win32 or OS/2.  For instance suppose we
build <code>false</code> as a program but <code>true.sh</code> as a script, and that
neither of them support <code>--help</code> or <code>--version</code>:

     </p><pre class="example">          AUTOMAKE_OPTIONS = std-options
          bin_PROGRAMS = false ...
          bin_SCRIPTS = true.sh ...
          AM_INSTALLCHECK_STD_OPTIONS_EXEMPT = false$(EXEEXT) true.sh
     </pre>
     <br></dd><dt><code>subdir-objects</code></dt><dd><a name="index-Options_002c-_0040code_007bsubdir_002dobjects_007d-725"></a><a name="index-subdir_002dobjects-726"></a>If this option is specified, then objects are placed into the
subdirectory of the build directory corresponding to the subdirectory of
the source file.  For instance if the source file is
<span class="file">subdir/file.cxx</span>, then the output file would be
<span class="file">subdir/file.o</span>.

     <br></dd><dt><code>tar-v7</code></dt><dt><code>tar-ustar</code></dt><dt><code>tar-pax</code></dt><dd><a name="index-Option_002c-_0040code_007btar_002dv7_007d-727"></a><a name="index-Option_002c-_0040code_007btar_002dustar_007d-728"></a><a name="index-Option_002c-_0040code_007btar_002dpax_007d-729"></a><a name="index-_0040command_007btar_007d-formats-730"></a><a name="index-v7-_0040command_007btar_007d-format-731"></a><a name="index-ustar-format-732"></a><a name="index-pax-format-733"></a><a name="index-tar_002dv7-734"></a><a name="index-tar_002dustar-735"></a><a name="index-tar_002dpax-736"></a>
These three mutually exclusive options select the tar format to use
when generating tarballs with <code>make dist</code>.  (The tar file created
is then compressed according to the set of <code>no-dist-gzip</code>,
<code>dist-bzip2</code> and <code>dist-tarZ</code> options in use.)

     <p>These options must be passed as argument to <code>AM_INIT_AUTOMAKE</code>
(see <a href="#Macros">Macros</a>) because they can require additional configure checks.
Automake will complain if it sees such options in a
<code>AUTOMAKE_OPTIONS</code> variable.

     </p><p><code>tar-v7</code> selects the old V7 tar format.  This is the historical
default.  This antiquated format is understood by all tar
implementations and supports filenames with up to 99 characters. When
given longer filenames some tar implementations will diagnose the
problem while other will generate broken tarballs or use non-portable
extensions.  Furthermore, the V7 format cannot store empty
directories.  When using this format, consider using the
<code>filename-length-max=99</code> option to catch filenames too long.

     </p><p><code>tar-ustar</code> selects the ustar format defined by POSIX
1003.1-1988.  This format is believed to be old enough to be portable.
It fully supports empty directories.  It can store filenames with up
to 256 characters, provided that the filename can be split at
directory separator in two parts, first of them being at most 155
bytes long. So, in most cases the maximum file name length will be
shorter than 256 characters.  However you may run against broken tar
implementations that incorrectly handle filenames longer than 99
characters (please report them to <a href="mailto:bug-automake@gnu.org">bug-automake@gnu.org</a> so we
can document this accurately).

     </p><p><code>tar-pax</code> selects the new pax interchange format defined by POSIX
1003.1-2001.  It does not limit the length of filenames.  However,
this format is very young and should probably be restricted to
packages which target only very modern platforms.  There are moves to
change the pax format in an upward-compatible way, so this option may
refer to a more recent version in the future.

     </p><p>See <a href="http://sources.redhat.com/automake/tar.html#Formats">Controlling the Archive Format (GNU Tar)</a>, for
further discussion about tar formats.

     </p><p><code>configure</code> knows several ways to construct these formats.  It
will not abort if it cannot find a tool up to the task (so that the
package can still be built), but <code>make dist</code> will fail.

     <br></p></dd><dt><var>version</var></dt><dd><a name="index-Option_002c-_0040var_007bversion_007d-737"></a>A version number (e.g. <span class="samp">0.30</span>) can be specified.  If Automake is not
newer than the version specified, creation of the <span class="file">Makefile.in</span>
will be suppressed.

     <br></dd><dt><code>-W</code><var>category</var> or <code>--warnings=</code><var>category</var></dt><dd><a name="index-Option_002c-warnings-738"></a><a name="index-Option_002c-_0040code_007b_002dW_0040var_007bcategory_007d_007d-739"></a><a name="index-Option_002c-_0040code_007b_002d_002dwarnings_003d_0040var_007bcategory_007d_007d-740"></a>These options behave exactly like their command-line counterpart
(see <a href="#Invoking-Automake">Invoking Automake</a>).  This allows you to enable or disable some
warning categories on a per-file basis.  You can also setup some warnings
for your entire project; for instance try <code>AM_INIT_AUTOMAKE([-Wall])</code>
in your <span class="file">configure.ac</span>.

   </dd></dl>

   <p>Unrecognized options are diagnosed by <code>automake</code>.

   </p><p>If you want an option to apply to all the files in the tree, you can use
the <code>AM_INIT_AUTOMAKE</code> macro in <span class="file">configure.ac</span>.
See <a href="#Macros">Macros</a>.

</p><div class="node">
<p></p><hr>
<a name="Miscellaneous"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Include">Include</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Options">Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">17 Miscellaneous Rules</h2>

<p>There are a few rules and variables that didn't fit anywhere else.

</p><ul class="menu">
<li><a accesskey="1" href="#Tags">Tags</a>:                         Interfacing to etags and mkid
</li><li><a accesskey="2" href="#Suffixes">Suffixes</a>:                     Handling new file extensions
</li><li><a accesskey="3" href="#Multilibs">Multilibs</a>:                    Support for multilibs.
</li></ul>

<div class="node">
<p></p><hr>
<a name="Tags"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Suffixes">Suffixes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous">Miscellaneous</a>
<br>
</div>

<h3 class="section">17.1 Interfacing to <code>etags</code></h3>

<p><a name="index-_0040file_007bTAGS_007d-support-741"></a>
Automake will generate rules to generate <span class="file">TAGS</span> files for use with
GNU Emacs under some circumstances.

   </p><p><a name="index-tags-742"></a>If any C, C++ or Fortran 77 source code or headers are present, then
<code>tags</code> and <code>TAGS</code> rules will be generated for the directory.
All files listed using the <code>_SOURCES</code>, <code>_HEADERS</code>, and
<code>_LISP</code> primaries will be used to generate tags.  Note that
generated source files that are not distributed must be declared in
variables like <code>nodist_noinst_HEADERS</code> or
<code>nodist_</code><var>prog</var><code>_SOURCES</code> or they will be ignored.

   </p><p>At the topmost directory of a multi-directory package, a <code>tags</code>
rule will be output which, when run, will generate a <span class="file">TAGS</span> file
that includes by reference all <span class="file">TAGS</span> files from subdirectories.

   </p><p>The <code>tags</code> rule will also be generated if the variable
<code>ETAGS_ARGS</code> is defined.  This variable is intended for use in
directories which contain taggable source that <code>etags</code> does not
understand.  The user can use the <code>ETAGSFLAGS</code> to pass additional
flags to <code>etags</code>; <code>AM_ETAGSFLAGS</code> is also available for use
in <span class="file">Makefile.am</span>.
<a name="index-ETAGS_005fARGS-743"></a><a name="index-ETAGSFLAGS-744"></a><a name="index-AM_005fETAGSFLAGS-745"></a>
Here is how Automake generates tags for its source, and for nodes in its
Texinfo file:

</p><pre class="example">     ETAGS_ARGS = automake.in --lang=none \
      --regex='/^@node[ \t]+\([^,]+\)/\1/' automake.texi
</pre>
   <p>If you add filenames to <span class="samp">ETAGS_ARGS</span>, you will probably also
want to set <span class="samp">TAGS_DEPENDENCIES</span>.  The contents of this variable
are added directly to the dependencies for the <code>tags</code> rule.
<a name="index-TAGS_005fDEPENDENCIES-746"></a>
Automake also generates a <code>ctags</code> rule which can be used to
build <span class="command">vi</span>-style <span class="file">tags</span> files.  The variable <code>CTAGS</code>
is the name of the program to invoke (by default <span class="samp">ctags</span>);
<code>CTAGSFLAGS</code> can be used by the user to pass additional flags,
and <code>AM_CTAGSFLAGS</code> can be used by the <span class="file">Makefile.am</span>.

   </p><p>Automake will also generate an <code>ID</code> rule which will run
<code>mkid</code> on the source.  This is only supported on a
directory-by-directory basis.
<a name="index-id-747"></a>
Automake also supports the <a href="http://www.gnu.org/software/global/">GNU Global Tags program</a>.  The <code>GTAGS</code> rule runs Global Tags
automatically and puts the result in the top build directory.  The
variable <code>GTAGS_ARGS</code> holds arguments which are passed to
<code>gtags</code>.
<a name="index-GTAGS_005fARGS-748"></a>

</p><div class="node">
<p></p><hr>
<a name="Suffixes"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multilibs">Multilibs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tags">Tags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous">Miscellaneous</a>
<br>
</div>

<h3 class="section">17.2 Handling new file extensions</h3>

<p><a name="index-Adding-new-_0040code_007bSUFFIXES_007d-749"></a><a name="index-_0040code_007bSUFFIXES_007d_002c-adding-750"></a><a name="index-SUFFIXES-751"></a>
It is sometimes useful to introduce a new implicit rule to handle a file
type that Automake does not know about.

   </p><p>For instance, suppose you had a compiler which could compile <span class="samp">.foo</span>
files to <span class="samp">.o</span> files.  You would simply define an suffix rule for
your language:

</p><pre class="example">     .foo.o:
             foocc -c -o $@ $&lt;
</pre>
   <p>Then you could directly use a <span class="samp">.foo</span> file in a <span class="samp">_SOURCES</span>
variable and expect the correct results:

</p><pre class="example">     bin_PROGRAMS = doit
     doit_SOURCES = doit.foo
</pre>
   <p>This was the simpler and more common case.  In other cases, you will
have to help Automake to figure which extensions you are defining your
suffix rule for.  This usually happens when your extensions does not
start with a dot.  Then, all you have to do is to put a list of new
suffixes in the <code>SUFFIXES</code> variable <strong>before</strong> you define your
implicit rule.

   </p><p>For instance the following definition prevents Automake to misinterpret
<span class="samp">.idlC.cpp:</span> as an attempt to transform <span class="samp">.idlC</span> into
<span class="samp">.cpp</span>.

</p><pre class="example">     SUFFIXES = .idl C.cpp
     .idlC.cpp:
             # whatever
</pre>
   <p>As you may have noted, the <code>SUFFIXES</code> variable behaves like the
<code>.SUFFIXES</code> special target of <code>make</code>.  You should not touch
<code>.SUFFIXES</code> yourself, but use <code>SUFFIXES</code> instead and let
Automake generate the suffix list for <code>.SUFFIXES</code>.  Any given
<code>SUFFIXES</code> go at the start of the generated suffixes list, followed
by Automake generated suffixes not already in the list.

</p><div class="node">
<p></p><hr>
<a name="Multilibs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Suffixes">Suffixes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous">Miscellaneous</a>
<br>
</div>

<h3 class="section">17.3 Support for Multilibs</h3>

<p>Automake has support for an obscure feature called multilibs.  A
<dfn>multilib</dfn> is a library which is built for multiple different ABIs
at a single time; each time the library is built with a different target
flag combination.  This is only useful when the library is intended to
be cross-compiled, and it is almost exclusively used for compiler
support libraries.

   </p><p>The multilib support is still experimental.  Only use it if you are
familiar with multilibs and can debug problems you might encounter.

</p><div class="node">
<p></p><hr>
<a name="Include"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditionals">Conditionals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Miscellaneous">Miscellaneous</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">18 Include</h2>

<p><a name="index-include-752"></a><a name="index-Including-_0040file_007bMakefile_007d-fragment-753"></a><a name="index-_0040file_007bMakefile_007d-fragment_002c-including-754"></a>
Automake supports an <code>include</code> directive which can be used to
include other <span class="file">Makefile</span> fragments when <code>automake</code> is run.
Note that these fragments are read and interpreted by <code>automake</code>,
not by <code>make</code>.  As with conditionals, <code>make</code> has no idea that
<code>include</code> is in use.

   </p><p>There are two forms of <code>include</code>:

     </p><dl>
<dt><code>include $(srcdir)/file</code></dt><dd>Include a fragment which is found relative to the current source
directory.

     <br></dd><dt><code>include $(top_srcdir)/file</code></dt><dd>Include a fragment which is found relative to the top source directory.
</dd></dl>

   <p>Note that if a fragment is included inside a conditional, then the
condition applies to the entire contents of that fragment.

   </p><p>Makefile fragments included this way are always distributed because
there are needed to rebuild <span class="file">Makefile.in</span>.

</p><div class="node">
<p></p><hr>
<a name="Conditionals"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Gnits">Gnits</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Include">Include</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">19 Conditionals</h2>

<p><a name="index-Conditionals-755"></a>
Automake supports a simple type of conditionals.

   </p><p><a name="index-AM_005fCONDITIONAL-756"></a>Before using a conditional, you must define it by using
<code>AM_CONDITIONAL</code> in the <code>configure.ac</code> file (see <a href="#Macros">Macros</a>).

</p><div class="defun">
&#8212; Macro: <b>AM_CONDITIONAL</b> (<var>conditional, condition</var>)<var><a name="index-AM_005fCONDITIONAL-757"></a></var><br>
<blockquote><p>The conditional name, <var>conditional</var>, should be a simple string
starting with a letter and containing only letters, digits, and
underscores.  It must be different from <span class="samp">TRUE</span> and <span class="samp">FALSE</span>
which are reserved by Automake.

        </p><p>The shell <var>condition</var> (suitable for use in a shell <code>if</code>
statement) is evaluated when <code>configure</code> is run.  Note that you
must arrange for <em>every</em> <code>AM_CONDITIONAL</code> to be invoked every
time <code>configure</code> is run &#8211; if <code>AM_CONDITIONAL</code> is run
conditionally (e.g., in a shell <code>if</code> statement), then the result
will confuse automake.
</p></blockquote></div>

   <p><a name="index-_0040code_007b_002d_002denable_002ddebug_007d_002c-example-758"></a><a name="index-Example-conditional-_0040code_007b_002d_002denable_002ddebug_007d-759"></a><a name="index-Conditional-example_002c-_0040code_007b_002d_002denable_002ddebug_007d-760"></a>
Conditionals typically depend upon options which the user provides to
the <code>configure</code> script.  Here is an example of how to write a
conditional which is true if the user uses the <span class="samp">--enable-debug</span>
option.

</p><pre class="example">     AC_ARG_ENABLE(debug,
     [  --enable-debug    Turn on debugging],
     [case "${enableval}" in
       yes) debug=true ;;
       no)  debug=false ;;
       *) AC_MSG_ERROR(bad value ${enableval} for --enable-debug) ;;
     esac],[debug=false])
     AM_CONDITIONAL(DEBUG, test x$debug = xtrue)
</pre>
   <p>Here is an example of how to use that conditional in <span class="file">Makefile.am</span>:

   </p><p><a name="index-if-761"></a><a name="index-endif-762"></a><a name="index-else-763"></a>
</p><pre class="example">     if DEBUG
     DBG = debug
     else
     DBG =
     endif
     noinst_PROGRAMS = $(DBG)
</pre>
   <p>This trivial example could also be handled using EXTRA_PROGRAMS
(see <a href="#Conditional-Programs">Conditional Programs</a>).

   </p><p>You may only test a single variable in an <code>if</code> statement, possibly
negated using <span class="samp">!</span>.  The <code>else</code> statement may be omitted.
Conditionals may be nested to any depth.  You may specify an argument to
<code>else</code> in which case it must be the negation of the condition used
for the current <code>if</code>.  Similarly you may specify the condition
which is closed by an <code>end</code>:

</p><pre class="example">     if DEBUG
     DBG = debug
     else !DEBUG
     DBG =
     endif !DEBUG
</pre>
   <p class="noindent">Unbalanced conditions are errors.

   </p><p>Note that conditionals in Automake are not the same as conditionals in
GNU Make.  Automake conditionals are checked at configure time by the
<span class="file">configure</span> script, and affect the translation from
<span class="file">Makefile.in</span> to <span class="file">Makefile</span>.  They are based on options passed
to <span class="file">configure</span> and on results that <span class="file">configure</span> has discovered
about the host system.  GNU Make conditionals are checked at <code>make</code>
time, and are based on variables passed to the make program or defined
in the <span class="file">Makefile</span>.

   </p><p>Automake conditionals will work with any make program.

</p><div class="node">
<p></p><hr>
<a name="Gnits"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Cygnus">Cygnus</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditionals">Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">20 The effect of <code>--gnu</code> and <code>--gnits</code></h2>

<p><a name="index-_0040code_007b_002d_002dgnu_007d_002c-required-files-764"></a><a name="index-_0040code_007b_002d_002dgnu_007d_002c-complete-description-765"></a>
The <span class="samp">--gnu</span> option (or <span class="samp">gnu</span> in the <span class="samp">AUTOMAKE_OPTIONS</span>
variable) causes <code>automake</code> to check the following:

     </p><ul>
<li>The files <span class="file">INSTALL</span>, <span class="file">NEWS</span>, <span class="file">README</span>, <span class="file">AUTHORS</span>,
and <span class="file">ChangeLog</span>, plus one of <span class="file">COPYING.LIB</span>, <span class="file">COPYING.LESSER</span>
or <span class="file">COPYING</span>, are required at the topmost directory of the package.

     </li><li>The options <span class="samp">no-installman</span> and <span class="samp">no-installinfo</span> are
prohibited.
</li></ul>

   <p>Note that this option will be extended in the future to do even more
checking; it is advisable to be familiar with the precise requirements
of the GNU standards.  Also, <span class="samp">--gnu</span> can require certain
non-standard GNU programs to exist for use by various maintainer-only
rules; for instance in the future <code>pathchk</code> might be required for
<span class="samp">make dist</span>.

   </p><p><a name="index-_0040code_007b_002d_002dgnits_007d_002c-complete-description-766"></a>
The <span class="samp">--gnits</span> option does everything that <span class="samp">--gnu</span> does, and
checks the following as well:

     </p><ul>
<li><span class="samp">make installcheck</span> will check to make sure that the <code>--help</code>
and <code>--version</code> really print a usage message and a version string,
respectively.  This is the <code>std-options</code> option (see <a href="#Options">Options</a>).

     </li><li><span class="samp">make dist</span> will check to make sure the <span class="file">NEWS</span> file has been
updated to the current version.

     </li><li><span class="samp">VERSION</span> is checked to make sure its format complies with Gnits
standards.
<!-- FIXME xref when standards are finished -->

     </li><li><a name="index-_0040file_007bREADME_002dalpha_007d-767"></a>If <span class="samp">VERSION</span> indicates that this is an alpha release, and the file
<span class="file">README-alpha</span> appears in the topmost directory of a package, then
it is included in the distribution.  This is done in <span class="samp">--gnits</span>
mode, and no other, because this mode is the only one where version
number formats are constrained, and hence the only mode where Automake
can automatically determine whether <span class="file">README-alpha</span> should be
included.

     </li><li>The file <span class="file">THANKS</span> is required.
</li></ul>

<div class="node">
<p></p><hr>
<a name="Cygnus"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Not-Enough">Not Enough</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Gnits">Gnits</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">21 The effect of <code>--cygnus</code></h2>

<p><a name="index-_0040code_007bcygnus_007d-strictness-768"></a>
Some packages, notably GNU GCC and GNU gdb, have a build environment
originally written at Cygnus Support (subsequently renamed Cygnus
Solutions, and then later purchased by Red Hat).  Packages with this
ancestry are sometimes referred to as &#8220;Cygnus&#8221; trees.

   </p><p>A Cygnus tree has slightly different rules for how a <span class="file">Makefile.in</span>
is to be constructed.  Passing <span class="samp">--cygnus</span> to <code>automake</code> will
cause any generated <span class="file">Makefile.in</span> to comply with Cygnus rules.

   </p><p>Here are the precise effects of <span class="samp">--cygnus</span>:

     </p><ul>
<li>Info files are always created in the build directory, and not in the
source directory.

     </li><li><span class="file">texinfo.tex</span> is not required if a Texinfo source file is
specified.  The assumption is that the file will be supplied, but in a
place that Automake cannot find.  This assumption is an artifact of how
Cygnus packages are typically bundled.

     </li><li><span class="samp">make dist</span> is not supported, and the rules for it are not
generated.  Cygnus-style trees use their own distribution mechanism.

     </li><li>Certain tools will be searched for in the build tree as well as in the
user's <span class="samp">PATH</span>.  These tools are <code>runtest</code>, <code>expect</code>,
<code>makeinfo</code> and <code>texi2dvi</code>.

     </li><li><code>--foreign</code> is implied.

     </li><li>The options <span class="samp">no-installinfo</span> and <span class="samp">no-dependencies</span> are
implied.

     </li><li>The macros <span class="samp">AM_MAINTAINER_MODE</span> and <span class="samp">AM_CYGWIN32</span> are
required.

     </li><li>The <code>check</code> target doesn't depend on <code>all</code>.
</li></ul>

   <p>GNU maintainers are advised to use <span class="samp">gnu</span> strictness in preference
to the special Cygnus mode.  Some day, perhaps, the differences between
Cygnus trees and GNU trees will disappear (for instance, as GCC is made
more standards compliant).  At that time the special Cygnus mode will be
removed.

</p><div class="node">
<p></p><hr>
<a name="Not-Enough"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Distributing">Distributing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cygnus">Cygnus</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">22 When Automake Isn't Enough</h2>

<p>In some situations, where Automake is not up to one task, one has to
resort to handwritten rules or even handwritten <span class="file">Makefile</span>s.

</p><ul class="menu">
<li><a accesskey="1" href="#Extending">Extending</a>:                    Adding new rules or overriding existing ones.
</li><li><a accesskey="2" href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>:        Integrating Non-Automake <span class="file">Makefile</span>s.
</li></ul>

<div class="node">
<p></p><hr>
<a name="Extending"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Not-Enough">Not Enough</a>
<br>
</div>

<h3 class="section">22.1 Extending Automake Rules</h3>

<p>With some minor exceptions (like <code>_PROGRAMS</code> variables being
rewritten to append <code>$(EXEEXT)</code>), the contents of a
<span class="file">Makefile.am</span> is copied to <span class="file">Makefile.in</span> verbatim.

   </p><p><a name="index-copying-semantics-769"></a>
These copying semantics means that many problems can be worked around
by simply adding some <code>make</code> variables and rules to
<span class="file">Makefile.am</span>.  Automake will ignore these additions.

   </p><p><a name="index-conflicting-definitions-770"></a><a name="index-rules_002c-conflicting-771"></a><a name="index-variables_002c-conflicting-772"></a><a name="index-definitions_002c-conflicts-773"></a>
Since a <span class="file">Makefile.in</span> is built from data gathered from three
different places (<span class="file">Makefile.am</span>, <span class="file">configure.ac</span>, and
<span class="command">automake</span> itself), it is possible to have conflicting
definitions of rules or variables.  When building <span class="file">Makefile.in</span>
the following priorities are respected by <span class="command">automake</span> to ensure
the user always have the last word.  User defined variables in
<span class="file">Makefile.am</span> have priority over variables <code>AC_SUBST</code>ed from
<span class="file">configure.ac</span>, and <code>AC_SUBST</code>ed variables have priority
over <span class="command">automake</span>-defined variables.  As far rules are
concerned, a user-defined rule overrides any
<span class="command">automake</span>-defined rule for the same target.

   </p><p><a name="index-overriding-rules-774"></a><a name="index-overriding-semantics-775"></a><a name="index-rules_002c-overriding-776"></a>
These overriding semantics make it possible to fine tune some default
settings of Automake, or replace some of its rules.  Overriding
Automake rules is often inadvisable, particularly in the topmost
directory of a package with subdirectories.  The <code>-Woverride</code>
option (see <a href="#Invoking-Automake">Invoking Automake</a>) comes handy to catch overridden
definitions.

   </p><p>Note that Automake does not make any difference between rules with
commands and rules that only specify dependencies.  So it is not
possible to append new dependencies to an <code>automake</code>-defined
target without redefining the entire rule.

   </p><p><a name="index-_0040code_007b_002dlocal_007d-targets-777"></a><a name="index-local-targets-778"></a>
However, various useful targets have a <span class="samp">-local</span> version you can
specify in your <span class="file">Makefile.am</span>.  Automake will supplement the
standard target with these user-supplied targets.

   </p><p><a name="index-all-779"></a><a name="index-all_002dlocal-780"></a><a name="index-info-781"></a><a name="index-info_002dlocal-782"></a><a name="index-dvi-783"></a><a name="index-dvi_002dlocal-784"></a><a name="index-ps-785"></a><a name="index-ps_002dlocal-786"></a><a name="index-pdf-787"></a><a name="index-pdf_002dlocal-788"></a><a name="index-html-789"></a><a name="index-html_002dlocal-790"></a><a name="index-check-791"></a><a name="index-check_002dlocal-792"></a><a name="index-install-793"></a><a name="index-install_002ddata_002dlocal-794"></a><a name="index-install_002dexec-795"></a><a name="index-install_002dexec_002dlocal-796"></a><a name="index-uninstall-797"></a><a name="index-uninstall_002dlocal-798"></a><a name="index-mostlyclean-799"></a><a name="index-mostlyclean_002dlocal-800"></a><a name="index-clean-801"></a><a name="index-clean_002dlocal-802"></a><a name="index-distclean-803"></a><a name="index-distclean_002dlocal-804"></a><a name="index-installdirs-805"></a><a name="index-installdirs_002dlocal-806"></a><a name="index-installcheck-807"></a><a name="index-installcheck_002dlocal-808"></a>
The targets that support a local version are <code>all</code>, <code>info</code>,
<code>dvi</code>, <code>ps</code>, <code>pdf</code>, <code>html</code>, <code>check</code>,
<code>install-data</code>, <code>install-exec</code>, <code>uninstall</code>,
<code>installdirs</code>, <code>installcheck</code> and the various <code>clean</code> targets
(<code>mostlyclean</code>, <code>clean</code>, <code>distclean</code>, and
<code>maintainer-clean</code>).  Note that there are no
<code>uninstall-exec-local</code> or <code>uninstall-data-local</code> targets; just
use <code>uninstall-local</code>.  It doesn't make sense to uninstall just
data or just executables.

   </p><p>For instance, here is one way to install a file in <span class="file">/etc</span>:

</p><pre class="example">     install-data-local:
             $(INSTALL_DATA) $(srcdir)/afile $(DESTDIR)/etc/afile
</pre>
   <p><a name="index-_0040code_007b_002dhook_007d-targets-809"></a><a name="index-hook-targets-810"></a>
Some rule also have a way to run another rule, called a <dfn>hook</dfn>,
after their work is done.  The hook is named after the principal target,
with <span class="samp">-hook</span> appended.  The targets allowing hooks are
<code>install-data</code>, <code>install-exec</code>, <code>uninstall</code>, <code>dist</code>,
and <code>distcheck</code>.
<a name="index-install_002ddata_002dhook-811"></a><a name="index-install_002dexec_002dhook-812"></a><a name="index-uninstall_002dhook-813"></a><a name="index-dist_002dhook-814"></a>
For instance, here is how to create a hard link to an installed program:

</p><pre class="example">     install-exec-hook:
             ln $(DESTDIR)$(bindir)/program$(EXEEXT) \
                $(DESTDIR)$(bindir)/proglink$(EXEEXT)
</pre>
   <p>Although cheaper and more portable than symbolic links, hard links
will not work everywhere (for instance OS/2 does not have
<span class="command">ln</span>).  Ideally you should fall back to <code>cp -p</code> when
<code>ln</code> does not work.  An easy way, if symbolic links are
acceptable to you, is to add <code>AC_PROG_LN_S</code> to
<span class="file">configure.ac</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#Particular-Programs">Particular Program Checks (The Autoconf Manual)</a>) and use <code>$(LN_S)</code> in
<span class="file">Makefile.am</span>.

   </p><p><a name="index-versioned-binaries_002c-installing-815"></a><a name="index-installing-versioned-binaries-816"></a><a name="index-_0040code_007bLN_005fS_007d-example-817"></a>For instance, here is how you could install a versioned copy of a
program using <code>$(LN_S)</code>:

</p><pre class="example">     install-exec-hook:
             cd $(DESTDIR)$(bindir) &amp;&amp; \
               mv -f prog$(EXEEXT) prog-$(VERSION)$(EXEEXT) &amp;&amp; \
               $(LN_S) prog-$(VERSION)$(EXEEXT) prog$(EXEEXT)
</pre>
   <p>Note that we rename the program so that a new version will erase the
symbolic link, not the real binary.  Also we <code>cd</code> into the
destination directory in order to create relative links.

   </p><p>When writing <code>install-exec-hook</code> or <code>install-data-hook</code>,
please bear in mind that the exec/data distinction is based on the
installation directory, not on the primary used (see <a href="#Install">Install</a>).  So
a <code>foo_SCRIPTS</code> will be installed by <code>install-data</code>, and a
<code>barexec_SCRIPTS</code> will be installed by <code>install-exec</code>.  You
should define your hooks consequently.

<!-- FIXME should include discussion of variables you can use in these -->
<!-- rules -->
</p><div class="node">
<p></p><hr>
<a name="Third_002dParty-Makefiles"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extending">Extending</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Not-Enough">Not Enough</a>
<br>
</div>

<h3 class="section">22.2 Third-Party <span class="file">Makefile</span>s</h3>

<p><a name="index-Third_002dparty-packages_002c-interfacing-with-818"></a><a name="index-Interfacing-with-third_002dparty-packages-819"></a>
In most projects all <span class="file">Makefile</span>s are generated by Automake.  In
some cases, however, projects need to embed subdirectories with
handwritten <span class="file">Makefile</span>s.  For instance one subdirectory could be
a third-party project with its own build system, not using Automake.

   </p><p>It is possible to list arbitrary directories in <code>SUBDIRS</code> or
<code>DIST_SUBDIRS</code> provided each of these directories has a
<span class="file">Makefile</span> that recognizes all the following recursive targets.

   </p><p><a name="index-recursive-targets-and-third_002dparty-_0040file_007bMakefile_007ds-820"></a>When a user runs one of these targets, that target is run recursively
in all subdirectories.  This is why it is important that even
third-party <span class="file">Makefile</span>s support them.

     </p><dl>
<dt><code>all</code></dt><dd>Compile the entire package.  This is the default target in
Automake-generated <span class="file">Makefile</span>s, but it does not need to be the
default in third-party <span class="file">Makefile</span>s.

     <br></dd><dt><code>distdir</code></dt><dd><a name="index-distdir-821"></a><a name="index-distdir-822"></a><a name="index-top_005fdistdir-823"></a>Copy files to distribute into <code>$(distdir)</code>, before a tarball is
constructed.  Of course this target is not required if the
<code>no-dist</code> option (see <a href="#Options">Options</a>) is used.

     <p>The variables <code>$(top_distdir)</code> and <code>$(distdir)</code>
(see <a href="#Dist">Dist</a>) will be passed from the outer package to the subpackage
when the <code>distdir</code> target is invoked.  These two variables have
been adjusted for the directory which is being recursed into, so they
are ready to use.

     <br></p></dd><dt><code>install</code></dt><dt><code>install-data</code></dt><dt><code>install-exec</code></dt><dt><code>uninstall</code></dt><dd>Install or uninstall files (see <a href="#Install">Install</a>).

     <br></dd><dt><code>install-info</code></dt><dd>Install only the Texinfo documentation (see <a href="#Texinfo">Texinfo</a>).

     <br></dd><dt><code>installdirs</code></dt><dd>Create install directories, but do not install any files.

     <br></dd><dt><code>check</code></dt><dt><code>installcheck</code></dt><dd>Check the package (see <a href="#Tests">Tests</a>).

     <br></dd><dt><code>mostlyclean</code></dt><dt><code>clean</code></dt><dt><code>distclean</code></dt><dt><code>maintainer-clean</code></dt><dd>Cleaning rules (see <a href="#Clean">Clean</a>).

     <br></dd><dt><code>dvi</code></dt><dt><code>pdf</code></dt><dt><code>ps</code></dt><dt><code>info</code></dt><dt><code>html</code></dt><dd>Build the documentation in various formats (see <a href="#Texinfo">Texinfo</a>).

     <br></dd><dt><code>tags</code></dt><dt><code>ctags</code></dt><dd>Build <code>TAGS</code> and <code>CTAGS</code> (see <a href="#Tags">Tags</a>).
</dd></dl>

   <p>If you have ever used Gettext in a project, this is a good example of
how third-party <span class="file">Makefile</span>s can be used with Automake.  The
<span class="file">Makefile</span>s <span class="command">gettextize</span> puts in the <span class="file">po/</span> and
<span class="file">intl/</span> directories are handwritten <span class="file">Makefile</span>s that
implement all these targets.  That way they can be added to
<code>SUBDIRS</code> in Automake packages.

   </p><p>Directories which are only listed in <code>DIST_SUBDIRS</code> but not in
<code>SUBDIRS</code> need only the <code>distclean</code>,
<code>maintainer-clean</code>, and <code>distdir</code> rules (see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>).

   </p><p>Usually, many of these rules are irrelevant to the third-party
subproject, but they are required for the whole package to work.  It's
OK to have a rule that does nothing, so if you are integrating a
third-party project with no documentation or tag support, you could
simply augment its <span class="file">Makefile</span> as follows:

</p><pre class="example">     EMPTY_AUTOMAKE_TARGETS = dvi pdf ps info html tags ctags
     .PHONY: $(EMPTY_AUTOMAKE_TARGETS)
     $(EMPTY_AUTOMAKE_TARGETS):
</pre>
   <p>Another aspect of integrating third-party build systems is whether
they support VPATH builds.  Obviously if the subpackage does not
support VPATH builds the whole package will not support VPATH builds.
This in turns means that <code>make distcheck</code> will not work, because
it relies on VPATH builds.  Some people can live without this
(actually, many Automake users have never heard of <code>make
distcheck</code>).  Other people may prefer to revamp the existing
<span class="file">Makefile</span>s to support VPATH.  Doing so does not necessarily
require Automake, only Autoconf is needed (see <a href="http://sources.redhat.com/automake/autoconf.html#Build-Directories">Build Directories (The Autoconf Manual)</a>).  The necessary
substitutions: <code>@scrdir@</code>, <code>@top_srcdir@</code>, and
<code>@top_builddir@</code> are defined by <span class="file">configure</span> when it
processes a <span class="file">Makefile</span> (see <a href="http://sources.redhat.com/automake/autoconf.html#Preset-Output-Variables">Preset Output Variables (The Autoconf Manual)</a>), they are not
computed by the Makefile like the aforementioned <code>$(distdir)</code> and
<code>$(top_distdir)</code> variables..

   </p><p>It is sometimes inconvenient to modify a third-party <span class="file">Makefile</span>
to introduce the above required targets.  For instance one may want to
keep the third-party sources untouched to ease upgrades to new
versions.

   </p><p><a name="index-_0040file_007bGNUmakefile_007d-including-_0040file_007bMakefile_007d-824"></a>Here are two other ideas.  If GNU make is assumed, one possibility is
to add to that subdirectory a <span class="file">GNUmakefile</span> that defines the
required targets and include the third-party <span class="file">Makefile</span>.  For
this to work in VPATH builds, <span class="file">GNUmakefile</span> must lie in the build
directory; the easiest way to do this is to write a
<span class="file">GNUmakefile.in</span> instead, and have it processed with
<code>AC_CONFIG_FILES</code> from the outer package.  For example if we
assume <span class="file">Makefile</span> defines all targets except the documentation
targets, and that the <code>check</code> target is actually called
<code>test</code>, we could write <span class="file">GNUmakefile</span> (or
<span class="file">GNUmakefile.in</span>) like this:

</p><pre class="example">     # First, include the real Makefile
     include Makefile
     # Then, define the other targets needed by Automake Makefiles.
     .PHONY: dvi pdf ps info html check
     dvi pdf ps info html:
     check: test
</pre>
   <p><a name="index-Proxy-_0040file_007bMakefile_007d-for-third_002dparty-packages-825"></a>A similar idea that does not use <code>include</code> is to write a proxy
<span class="file">Makefile</span> that dispatches rules to the real <span class="file">Makefile</span>,
either with <code>$(MAKE) -f Makefile.real $(AM_MAKEFLAGS) target</code> (if
it's OK to rename the original <span class="file">Makefile</span>) or with <code>cd
subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) target</code> (if it's OK to store the
subdirectory project one directory deeper).  The good news is that
this proxy <span class="file">Makefile</span> can be generated with Automake.  All we
need are <code>-local</code> targets (see <a href="#Extending">Extending</a>) that perform the
dispatch.  Of course the other Automake features are available, so you
could decide to let Automake perform distribution or installation.
Here is a possible <span class="file">Makefile.am</span>:

</p><pre class="example">     all-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) all
     check-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) test
     clean-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) clean

     # Assuming the package knows how to install itself
     install-data-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-data
     install-exec-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-exec
     uninstall-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) uninstall

     # Distribute files from here.
     EXTRA_DIST = subdir/Makefile subdir/program.c ...
</pre>
   <p>Pushing this idea to the extreme, it is also possible to ignore the
subproject build system and build everything from this proxy
<span class="file">Makefile.am</span>.  This might sounds very sensible if you need VPATH
builds but the subproject does not support them.

</p><div class="node">
<p></p><hr>
<a name="Distributing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#API-versioning">API versioning</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Not-Enough">Not Enough</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">23 Distributing <span class="file">Makefile.in</span>s</h2>

<p>Automake places no restrictions on the distribution of the resulting
<span class="file">Makefile.in</span>s.  We still encourage software authors to
distribute their work under terms like those of the GPL, but doing so
is not required to use Automake.

   </p><p>Some of the files that can be automatically installed via the
<code>--add-missing</code> switch do fall under the GPL.  However, these also
have a special exception allowing you to distribute them with your
package, regardless of the licensing you choose.

</p><div class="node">
<p></p><hr>
<a name="API-versioning"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Upgrading">Upgrading</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Distributing">Distributing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">24 Automake API versioning</h2>

<p>New Automake releases usually include bug fixes and new features.
Unfortunately they may also introduce new bugs and incompatibilities.
This makes four reasons why a package may require a particular Automake
version.

   </p><p>Things get worse when maintaining a large tree of packages, each one
requiring a different version of Automake.  In the past, this meant that
any developer (and sometime users) had to install several versions of
Automake in different places, and switch <span class="samp">$PATH</span> appropriately for
each package.

   </p><p>Starting with version 1.6, Automake installs versioned binaries.  This
means you can install several versions of Automake in the same
<span class="samp">$prefix</span>, and can select an arbitrary Automake version by running
<span class="samp">automake-1.6</span> or <span class="samp">automake-1.7</span> without juggling with
<span class="samp">$PATH</span>.  Furthermore, <span class="file">Makefile</span>'s generated by Automake 1.6
will use <span class="samp">automake-1.6</span> explicitly in their rebuild rules.

   </p><p>The number <span class="samp">1.6</span> in <span class="samp">automake-1.6</span> is Automake's API version,
not Automake's version.  If a bug fix release is made, for instance
Automake 1.6.1, the API version will remain 1.6.  This means that a
package which work with Automake 1.6 should also work with 1.6.1; after
all, this is what people expect from bug fix releases.

   </p><p>If your package relies on a feature or a bug fix introduced in
a release, you can pass this version as an option to Automake to ensure
older releases will not be used.  For instance, use this in your
<span class="file">configure.ac</span>:

</p><pre class="example">       AM_INIT_AUTOMAKE(1.6.1)    dnl Require Automake 1.6.1 or better.
</pre>
   <p class="noindent">or, in a particular <span class="file">Makefile.am</span>:

</p><pre class="example">       AUTOMAKE_OPTIONS = 1.6.1   # Require Automake 1.6.1 or better.
</pre>
   <p class="noindent">Automake will print an error message if its version is
older than the requested version.

</p><h3 class="heading">What is in the API</h3>

<p>Automake's programming interface is not easy to define.  Basically it
should include at least all <strong>documented</strong> variables and targets
that a <span class="samp">Makefile.am</span> author can use, any behavior associated with
them (e.g. the places where <span class="samp">-hook</span>'s are run), the command line
interface of <span class="samp">automake</span> and <span class="samp">aclocal</span>, <small class="dots">...</small>

</p><h3 class="heading">What is not in the API</h3>

<p>Every undocumented variable, target, or command line option, is not part
of the API.  You should avoid using them, as they could change from one
version to the other (even in bug fix releases, if this helps to fix a
bug).

   </p><p>If it turns out you need to use such a undocumented feature, contact
<a href="mailto:automake@gnu.org">automake@gnu.org</a> and try to get it documented and exercised by
the test-suite.

</p><div class="node">
<p></p><hr>
<a name="Upgrading"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#FAQ">FAQ</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#API-versioning">API versioning</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">25 Upgrading a Package to a Newer Automake Version</h2>

<p>Automake maintains three kind of files in a package.

     </p><ul>
<li><span class="file">aclocal.m4</span>
</li><li><span class="file">Makefile.in</span>s
</li><li>auxiliary tools like <span class="file">install-sh</span> or <span class="file">py-compile</span>
</li></ul>

   <p><span class="file">aclocal.m4</span> is generated by <span class="command">aclocal</span> and contains some
Automake-supplied M4 macros.  Auxiliary tools are installed by
<span class="samp">automake --add-missing</span> when needed.  <span class="file">Makefile.in</span>s are
built from <span class="file">Makefile.am</span> by <span class="command">automake</span>, and rely on the
definitions of the M4 macros put in <span class="file">aclocal.m4</span> as well as the
behavior of the auxiliary tools installed.

   </p><p>Because all these files are closely related, it is important to
regenerate all of them when upgrading to a newer Automake release.
The usual way to do that is

</p><pre class="example">     aclocal # with any option needed (such a -I m4)
     autoconf
     automake --add-missing --force-missing
</pre>
   <p class="noindent">or more conveniently:

</p><pre class="example">     autoreconf -vfi
</pre>
   <p>The use of <code>--force-missing</code> ensures that auxiliary tools will be
overridden by new versions (see <a href="#Invoking-Automake">Invoking Automake</a>).

   </p><p>It is important to regenerate all these files each time Automake is
upgraded, even between bug fixes releases.  For instance it is not
unusual for a bug fix to involve changes to both the rules generated
in <span class="file">Makefile.in</span> and the supporting M4 macros copied to
<span class="file">aclocal.m4</span>.

   </p><p>Presently <span class="command">automake</span> is able to diagnose situations where
<span class="file">aclocal.m4</span> has been generated with another version of
<span class="command">aclocal</span>.  However it never checks whether auxiliary scripts
are up-to-date.  In other words, <span class="command">automake</span> will tell you when
<span class="command">aclocal</span> needs to be rerun, but it will never diagnose a
missing <code>--force-missing</code>.

   </p><p>Before upgrading to a new major release, it is a good idea to read the
file <span class="file">NEWS</span>.  This file lists all changes between releases: new
features, obsolete constructs, known incompatibilities, and
workarounds.

</p><div class="node">
<p></p><hr>
<a name="FAQ"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#History">History</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Upgrading">Upgrading</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">26 Frequently Asked Questions about Automake</h2>

<p>This chapter covers some questions that often come up on the mailing
lists.

</p><ul class="menu">
<li><a accesskey="1" href="#CVS">CVS</a>:                          CVS and generated files
</li><li><a accesskey="2" href="#maintainer_002dmode">maintainer-mode</a>:              missing and AM_MAINTAINER_MODE
</li><li><a accesskey="3" href="#wildcards">wildcards</a>:                    Why doesn't Automake support wildcards?
</li><li><a accesskey="4" href="#distcleancheck">distcleancheck</a>:               Files left in build directory after distclean
</li><li><a accesskey="5" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>:      CFLAGS vs. AM_CFLAGS vs. mumble_CFLAGS
</li><li><a accesskey="6" href="#renamed-objects">renamed objects</a>:              Why are object files sometimes renamed?
</li><li><a accesskey="7" href="#Per_002dObject-Flags">Per-Object Flags</a>:             How to simulate per-object flags?
</li><li><a accesskey="8" href="#Multiple-Outputs">Multiple Outputs</a>:             Writing rules for tools with many output files
</li></ul>

<div class="node">
<p></p><hr>
<a name="CVS"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#maintainer_002dmode">maintainer-mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.1 CVS and generated files</h3>

<h4 class="subsection">26.1.1 Background: distributed generated files</h4>

<p><a name="index-generated-files_002c-distributed-826"></a><a name="index-rebuild-rules-827"></a>
Packages made with Autoconf and Automake ship with some generated
files like <span class="file">configure</span> or <span class="file">Makefile.in</span>.  These files were
generated on the developer's host and are distributed so that
end-users do not have to install the maintainer tools required to
rebuild them.  Other generated files like Lex scanners, Yacc parsers,
or Info documentation, are usually distributed on similar grounds.

   </p><p>Automake outputs rules in <span class="file">Makefile</span>s to rebuild these files.  For
instance <span class="command">make</span> will run <span class="command">autoconf</span> to rebuild
<span class="file">configure</span> whenever <span class="file">configure.ac</span> is changed.  This makes
development safer by ensuring a <span class="file">configure</span> is never out-of-date
with respect to <span class="file">configure.ac</span>.

   </p><p>As generated files shipped in packages are up-to-date, and because
<span class="command">tar</span> preserves times-tamps, these rebuild rules are not
triggered when a user unpacks and builds a package.

</p><h4 class="subsection">26.1.2 Background: CVS and timestamps</h4>

<p><a name="index-timestamps-and-CVS-828"></a><a name="index-CVS-and-timestamps-829"></a>
Unless you use CVS keywords (in which case files must be updated at
commit time), CVS preserves timestamp during <code>cvs commit</code> and
<code>cvs import -d</code> operations.

   </p><p>When you check out a file using <code>cvs checkout</code> its timestamp is
set to that of the revision which is being checked out.

   </p><p>However, during <span class="command">cvs update</span>, files will have the date of the
update, not the original timestamp of this revision.  This is meant to
make sure that <span class="command">make</span> notices sources files have been updated.

   </p><p>This timestamp shift is troublesome when both sources and generated
files are kept under CVS.  Because CVS processes files in alphabetical
order, <span class="file">configure.ac</span> will appear older than <span class="file">configure</span>
after a <span class="command">cvs update</span> that updates both files, even if
<span class="file">configure</span> was newer than <span class="file">configure.ac</span> when it was
checked in.  Calling <code>make</code> will then trigger a spurious rebuild
of <span class="file">configure</span>.

</p><h4 class="subsection">26.1.3 Living with CVS in Autoconfiscated projects</h4>

<p><a name="index-CVS-and-generated-files-830"></a><a name="index-generated-files-and-CVS-831"></a>
There are basically two clans amongst maintainers: those who keep all
distributed files under CVS, including generated files, and those who
keep generated files <em>out</em> of CVS.

</p><h5 class="subsubheading">All files in CVS</h5>

     <ul>
<li>The CVS repository contains all distributed files so you know exactly
what is distributed, and you can checkout any prior version entirely.

     </li><li>Maintainers can see how generated files evolve (for instance you can
see what happens to your <span class="file">Makefile.in</span>s when you upgrade Automake
and make sure they look OK).

     </li><li>Users do not need the autotools to build a checkout of the project, it
works just like a released tarball.

     </li><li>If users use <span class="command">cvs update</span> to update their copy, instead of
<span class="command">cvs checkout</span> to fetch a fresh one, timestamps will be
inaccurate.  Some rebuild rules will be triggered and attempt to
run developer tools such as <span class="command">autoconf</span> or <span class="command">automake</span>.

     <p>Actually, calls to such tools are all wrapped into a call to the
<span class="command">missing</span> script discussed later (see <a href="#maintainer_002dmode">maintainer-mode</a>).
<span class="command">missing</span> will take care of fixing the timestamps when these
tools are not installed, so that the build can continue.

     </p></li><li>In distributed development, developers are likely to have different
version of the maintainer tools installed.  In this case rebuilds
triggered by timestamp lossage will lead to spurious changes
to generated files.  There are several solutions to this:

          <ul>
<li>All developers should use the same versions, so that the rebuilt files
are identical to files in CVS.  (This starts to be difficult when each
project you work on uses different versions.)
</li><li>Or people use a script to fix the timestamp after a checkout (the GCC
folks have such a script).
</li><li>Or <span class="file">configure.ac</span> uses <code>AM_MAINTAINER_MODE</code>, which will
disable all these rebuild rules by default.  This is further discussed
in <a href="#maintainer_002dmode">maintainer-mode</a>.
</li></ul>

     </li><li>Although we focused on spurious rebuilds, the converse can also
happen.  CVS's timestamp handling can also let you think an
out-of-date file is up-to-date.

     <p>For instance, suppose a developer has modified <span class="file">Makefile.am</span> and
rebuilt <span class="file">Makefile.in</span>, and then decide to do a last-minute change
to <span class="file">Makefile.am</span> right before checking in both files (without
rebuilding <span class="file">Makefile.in</span> to account for the change).

     </p><p>This last change to <span class="file">Makefile.am</span> make the copy of
<span class="file">Makefile.in</span> out-of-date.  Since CVS processes files
alphabetically, when another developer <code>cvs update</code> his or her
tree, <span class="file">Makefile.in</span> will happen to be newer than
<span class="file">Makefile.am</span>.  This other developer will not see
<span class="file">Makefile.in</span> is out-of-date.

</p></li></ul>

<h5 class="subsubheading">Generated files out of CVS</h5>

<p>One way to get CVS and <code>make</code> working peacefully is to never
store generated files in CVS, i.e., do not CVS-control files which
are <code>Makefile</code> targets (also called <em>derived</em> files).

   </p><p>This way developers are not annoyed by changes to generated files.  It
does not matter if they all have different versions (assuming they are
compatible, of course).  And finally, timestamps are not lost, changes
to sources files can't be missed as in the
<span class="file">Makefile.am</span>/<span class="file">Makefile.in</span> example discussed earlier.

   </p><p>The drawback is that the CVS repository is not an exact copy of what
is distributed and that users now need to install various development
tools (maybe even specific versions) before they can build a checkout.
But, after all, CVS's job is versioning, not distribution.

   </p><p>Allowing developers to use different versions of their tools can also
hide bugs during distributed development.  Indeed, developers will be
using (hence testing) their own generated files, instead of the
generated files that will be released actually.  The developer who
prepares the tarball might be using a version of the tool that
produces bogus output (for instance a non-portable C file), something
other developers could have noticed if they weren't using their own
versions of this tool.

</p><h4 class="subsection">26.1.4 Third-party files</h4>

<p><a name="index-CVS-and-third_002dparty-files-832"></a><a name="index-third_002dparty-files-and-CVS-833"></a>
Another class of files not discussed here (because they do not cause
timestamp issues) are files which are shipped with a package, but
maintained elsewhere.  For instance tools like <span class="command">gettextize</span>
and <span class="command">autopoint</span> (from Gettext) or <span class="command">libtoolize</span> (from
Libtool), will install or update files in your package.

   </p><p>These files, whether they are kept under CVS or not, raise similar
concerns about version mismatch between developers' tools.  The
Gettext manual has a section about this, see <a href="http://sources.redhat.com/automake/gettext.html#CVS-Issues">CVS Issues (GNU gettext tools)</a>.

</p><div class="node">
<p></p><hr>
<a name="maintainer_002dmode"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#wildcards">wildcards</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CVS">CVS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.2 <span class="command">missing</span> and <code>AM_MAINTAINER_MODE</code></h3>

<h4 class="subsection">26.2.1 <span class="command">missing</span></h4>

<p><a name="index-_0040command_007bmissing_007d_002c-purpose-834"></a>
The <span class="command">missing</span> script is a wrapper around several maintainer
tools, designed to warn users if a maintainer tool is required but
missing.  Typical maintainer tools are <span class="command">autoconf</span>,
<span class="command">automake</span>, <span class="command">bison</span>, etc.  Because file generated by
these tools are shipped with the other sources of a package, these
tools shouldn't be required during a user build and they are not
checked for in <span class="file">configure</span>.

   </p><p>However, if for some reason a rebuild rule is triggered and involves a
missing tool, <span class="command">missing</span> will notice it and warn the user.
Besides the warning, when a tool is missing, <span class="command">missing</span> will
attempt to fix timestamps in a way which allow the build to continue.
For instance <span class="command">missing</span> will touch <span class="file">configure</span> if
<span class="command">autoconf</span> is not installed.  When all distributed files are
kept under CVS, this feature of <span class="command">missing</span> allows user
<em>with no maintainer tools</em> to build a package off CVS, bypassing
any timestamp inconsistency implied by <code>cvs update</code>.

   </p><p>If the required tool is installed, <span class="command">missing</span> will run it and
won't attempt to continue after failures.  This is correct during
development: developers love fixing failures.  However, users with
wrong versions of maintainer tools may get an error when the rebuild
rule is spuriously triggered, halting the build.  This failure to let
the build continue is one of the arguments of the
<code>AM_MAINTAINER_MODE</code> advocates.

</p><h4 class="subsection">26.2.2 <code>AM_MAINTAINER_MODE</code></h4>

<p><a name="index-_0040code_007bAM_005fMAINTAINER_005fMODE_007d_002c-purpose-835"></a><a name="index-AM_005fMAINTAINER_005fMODE-836"></a>
<code>AM_MAINTAINER_MODE</code> disables the so called "rebuild rules" by
default.  If you have <code>AM_MAINTAINER_MODE</code> in
<span class="file">configure.ac</span>, and run <code>./configure &amp;&amp; make</code>, then
<span class="command">make</span> will *never* attempt to rebuilt <span class="file">configure</span>,
<span class="file">Makefile.in</span>s, Lex or Yacc outputs, etc.  I.e., this disables
build rules for files which are usually distributed and that users
should normally not have to update.

   </p><p>If you run <code>./configure --enable-maintainer-mode</code>, then these
rebuild rules will be active.

   </p><p>People use <code>AM_MAINTAINER_MODE</code> either because they do want their
users (or themselves) annoyed by timestamps lossage (see <a href="#CVS">CVS</a>), or
because they simply can't stand the rebuild rules and prefer running
maintainer tools explicitly.

   </p><p><code>AM_MAINTAINER_MODE</code> also allows you to disable some custom build
rules conditionally.  Some developers use this feature to disable
rules that need exotic tools that users may not have available.

   </p><p>Several years ago François Pinard pointed out several arguments
against <code>AM_MAINTAINER_MODE</code>.  Most of them relate to insecurity.
By removing dependencies you get non-dependable builds: change to
sources files can have no effect on generated files and this can be
very confusing when unnoticed.  He adds that security shouldn't be
reserved to maintainers (what <code>--enable-maintainer-mode</code>
suggests), on the contrary.  If one user has to modify a
<span class="file">Makefile.am</span>, then either <span class="file">Makefile.in</span> should be updated
or a warning should be output (this is what Automake uses
<code>missing</code> for) but the last thing you want is that nothing
happens and the user doesn't notice it (this is what happens when
rebuild rules are disabled by <code>AM_MAINTAINER_MODE</code>).

   </p><p>Jim Meyering, the inventor of the <code>AM_MAINTAINER_MODE</code> macro was
swayed by François's arguments, and got rid of
<code>AM_MAINTAINER_MODE</code> in all of his packages.

   </p><p>Still many people continue to use <code>AM_MAINTAINER_MODE</code>, because
it helps them working on projects where all files are kept under CVS,
and because <span class="command">missing</span> isn't enough if you have the wrong
version of the tools.

</p><div class="node">
<p></p><hr>
<a name="wildcards"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#distcleancheck">distcleancheck</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#maintainer_002dmode">maintainer-mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.3 Why doesn't Automake support wildcards?</h3>

<p><a name="index-wildcards-837"></a>
Developers are lazy.  They often would like to use wildcards in
<span class="file">Makefile.am</span>s, so they don't need to remember they have to
update <span class="file">Makefile.am</span>s every time they add, delete, or rename a
file.

   </p><p>There are several objections to this:
     </p><ul>
<li>When using CVS (or similar) developers need to remember they have to
run <code>cvs add</code> or <code>cvs rm</code> anyway.  Updating
<span class="file">Makefile.am</span> accordingly quickly becomes a reflex.

     <p>Conversely, if your application doesn't compile
because you forgot to add a file in <span class="file">Makefile.am</span>, it will help
you remember to <code>cvs add</code> it.

     </p></li><li>Using wildcards makes easy to distribute files by mistake.  For
instance some code a developer is experimenting with (a test case,
say) but which should not be part of the distribution.

     </li><li>Using wildcards it's easy to omit some files by mistake.  For
instance one developer creates a new file, uses it at many places,
but forget to commit it.  Another developer then checkout the
incomplete project and is able to run `make dist' successfully,
even though a file is missing.

     </li><li>Listing files, you control *exactly* what you distribute.
If some file that should be distributed is missing from your
tree, <code>make dist</code> will complain.  Besides, you don't distribute
more than what you listed.

     </li><li>Finally it's really hard to <span class="file">forget</span> adding a file to
<span class="file">Makefile.am</span>, because if you don't add it, it doesn't get
compiled nor installed, so you can't even test it.
</li></ul>

   <p>Still, these are philosophical objections, and as such you may disagree,
or find enough value in wildcards to dismiss all of them.  Before you
start writing a patch against Automake to teach it about wildcards,
let's see the main technical issue: portability.

   </p><p>Although <code>$(wildcard ...)</code> works with GNU <span class="command">make</span>, it is
not portable to other <span class="command">make</span> implementations.

   </p><p>The only way Automake could support <span class="command">$(wildcard ...)</span> is by
expending <span class="command">$(wildcard ...)</span> when <span class="command">automake</span> is run.
Resulting <span class="file">Makefile.in</span>s would be portable since they would
list all files and not use <code>$(wildcard ...)</code>.  However that
means developers need to remember they must run <code>automake</code> each
time they add, delete, or rename files.

   </p><p>Compared to editing <span class="file">Makefile.am</span>, this is really little win.  Sure,
it's easier and faster to type <code>automake; make</code> than to type
<code>emacs Makefile.am; make</code>.  But nobody bothered enough to write a
patch add support for this syntax.  Some people use scripts to
generated file lists in <span class="file">Makefile.am</span> or in separate
<span class="file">Makefile</span> fragments.

   </p><p>Even if you don't care about portability, and are tempted to use
<code>$(wildcard ...)</code> anyway because you target only GNU Make, you
should know there are many places where Automake need to know exactly
which files should be processed.  As Automake doesn't know how to
expand <code>$(wildcard ...)</code>, you cannot use it in these places.
<code>$(wildcard ...)</code> is a black box comparable to <code>AC_SUBST</code>ed
variables as far Automake is concerned.

   </p><p>You can get warnings about <code>$(wildcard ...</code>) constructs using the
<code>-Wportability</code> flag.

</p><div class="node">
<p></p><hr>
<a name="distcleancheck"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#wildcards">wildcards</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.4 Files left in build directory after distclean</h3>

<p><a name="index-_0040code_007bdistclean_007d_002c-diagnostic-838"></a><a name="index-_0040code_007bmake-distclean_007d_002c-diagnostic-839"></a><a name="index-dependencies-and-distributed-files-840"></a><a name="index-distclean-841"></a><a name="index-distcleancheck-842"></a>
This is a diagnostic you might encounter while running <code>make
distcheck</code>.

   </p><p>As explained in <a href="#Dist">Dist</a>, <code>make distcheck</code> attempts to build
and check your package for errors like this one.

   </p><p><code>make distcheck</code> will perform a <code>VPATH</code> build of your
package, and then call <code>make distclean</code>.  Files left in the build
directory after <code>make distclean</code> has run are listed after this
error.

   </p><p>This diagnostic really covers two kinds of errors:

     </p><ul>
<li>files that are forgotten by distclean;
</li><li>distributed files that are erroneously rebuilt.
</li></ul>

   <p>The former left-over files are not distributed, so the fix is to mark
them for cleaning (see <a href="#Clean">Clean</a>), this is obvious and doesn't deserve
more explanations.

   </p><p>The latter bug is not always easy to understand and fix, so let's
proceed with an example.  Suppose our package contains a program for
which we want to build a man page using <span class="command">help2man</span>.  GNU
<span class="command">help2man</span> produces simple manual pages from the <code>--help</code>
and <code>--version</code> output of other commands (see <a href="http://sources.redhat.com/automake/help2man.html#Top">Overview (The Help2man Manual)</a>).  Because we don't to force want our
users to install <span class="command">help2man</span>, we decide to distribute the
generated man page using the following setup.

</p><pre class="example">     # This Makefile.am is bogus.
     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     dist_man_MANS = foo.1

     foo.1: foo$(EXEEXT)
             help2man --output=foo.1 ./foo$(EXEEXT)
</pre>
   <p>This will effectively distribute the man page.  However,
<code>make distcheck</code> will fail with:

</p><pre class="example">     ERROR: files left in build directory after distclean:
     ./foo.1
</pre>
   <p>Why was <span class="file">foo.1</span> rebuilt?  Because although distributed,
<span class="file">foo.1</span> depends on a non-distributed built file:
<span class="file">foo$(EXEEXT)</span>.  <span class="file">foo$(EXEEXT)</span> is built by the user, so it
will always appear to be newer than the distributed <span class="file">foo.1</span>.

   </p><p><code>make distcheck</code> caught an inconsistency in our package.  Our
intent was to distribute <span class="file">foo.1</span> so users do not need installing
<span class="command">help2man</span>, however since this our rule causes this file to be
always rebuilt, users <em>do</em> need <span class="command">help2man</span>.  Either we
should ensure that <span class="file">foo.1</span> is not rebuilt by users, or there is
no point in distributing <span class="file">foo.1</span>.

   </p><p>More generally, the rule is that distributed files should never depend
on non-distributed built files.  If you distribute something
generated, distribute its sources.

   </p><p>One way to fix the above example, while still distributing
<span class="file">foo.1</span> is to not depend on <span class="file">foo$(EXEEXT)</span>.  For instance,
assuming <span class="command">foo --version</span> and <span class="command">foo --help</span> do not
change unless <span class="file">foo.c</span> or <span class="file">configure.ac</span> change, we could
write the following <span class="file">Makefile.am</span>:

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     dist_man_MANS = foo.1

     foo.1: foo.c $(top_srcdir)/configure.ac
             $(MAKE) $(AM_MAKEFLAGS) foo$(EXEEXT)
             help2man --output=foo.1 ./foo$(EXEEXT)
</pre>
   <p>This way, <span class="file">foo.1</span> will not get rebuilt every time
<span class="file">foo$(EXEEXT)</span> changes.  The <span class="command">make</span> call makes sure
<span class="file">foo$(EXEEXT)</span> is up-to-date before <span class="command">help2man</span>.  Another
way to ensure this would be to use separate directories for binaries
and man pages, and set <code>SUBDIRS</code> so that binaries are built
before man pages.

   </p><p>We could also decide not to distribute <span class="file">foo.1</span>.  In
this case it's fine to have <span class="file">foo.1</span> dependent upon
<span class="file">foo$(EXEEXT)</span>, since both will have to be rebuilt.
However it would be impossible to build the package in a
cross-compilation, because building <span class="file">foo.1</span> involves
an <em>execution</em> of <span class="file">foo$(EXEEXT)</span>.

   </p><p>Another context where such errors are common is when distributed files
are built by tools which are built by the package.  The pattern is similar:

</p><pre class="example">     distributed-file: built-tools distributed-sources
             build-command
</pre>
   <p class="noindent">should be changed to

</p><pre class="example">     distributed-file: distributed-sources
             $(MAKE) $(AM_MAKEFLAGS) built-tools
             build-command
</pre>
   <p class="noindent">or you could choose not to distribute <span class="file">distributed-file</span>, if
cross-compilation does not matter.

   </p><p>The points made through these examples are worth a summary:

   </p><p><table class="cartouche" summary="cartouche" border="1"><tbody><tr><td>
     <ul>
<li>Distributed files should never depend upon non-distributed built
files.
</li><li>Distributed files should be distributed will all their dependencies.
</li><li>If a file is <em>intended</em> be rebuilt by users, there is no point in
distributing it.
</li></ul>
   </td></tr></tbody></table>

   </p><p><a name="index-distcleancheck_005flistfiles-843"></a>For desperate cases, it's always possible to disable this check by
setting <code>distcleancheck_listfiles</code> as documented in <a href="#Dist">Dist</a>.
Make sure you do understand the reason why <code>make distcheck</code>
complains before you do this.  <code>distcleancheck_listfiles</code> is a
way to <em>hide</em> errors, not to fix them.  You can always do better.

</p><div class="node">
<p></p><hr>
<a name="Flag-Variables-Ordering"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#renamed-objects">renamed objects</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#distcleancheck">distcleancheck</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.5 Flag Variables Ordering</h3>

<p><a name="index-Ordering-flag-variables-844"></a><a name="index-Flag-variables_002c-ordering-845"></a>
</p><pre class="display">     What is the difference between <code>AM_CFLAGS</code>, <code>CFLAGS</code>, and
     <code>mumble_CFLAGS</code>?
</pre>
   <pre class="display">     Why does <span class="command">automake</span> output <code>CPPFLAGS</code> after
     <code>AM_CPPFLAGS</code> on compile lines?  Shouldn't it be the converse?
</pre>
   <pre class="display">     My <span class="file">configure</span> adds some warning flags into <code>CXXFLAGS</code>.  In
     one <span class="file">Makefile.am</span> I would like to append a new flag, however if I
     put the flag into <code>AM_CXXFLAGS</code> it is prepended to the other
     flags, not appended.
</pre>
   <h4 class="subsection">26.5.1 Compile Flag Variables</h4>

<p><a name="index-Flag-Variables_002c-Ordering-846"></a><a name="index-Compile-Flag-Variables-847"></a><a name="index-_0040code_007bAM_005fCCASFLAGS_007d-and-_0040code_007bCCASFLAGS_007d-848"></a><a name="index-_0040code_007bAM_005fCFLAGS_007d-and-_0040code_007bCFLAGS_007d-849"></a><a name="index-_0040code_007bAM_005fCPPFLAGS_007d-and-_0040code_007bCPPFLAGS_007d-850"></a><a name="index-_0040code_007bAM_005fCXXFLAGS_007d-and-_0040code_007bCXXFLAGS_007d-851"></a><a name="index-_0040code_007bAM_005fFCFLAGS_007d-and-_0040code_007bFCFLAGS_007d-852"></a><a name="index-_0040code_007bAM_005fFFLAGS_007d-and-_0040code_007bFFLAGS_007d-853"></a><a name="index-_0040code_007bAM_005fGCJFLAGS_007d-and-_0040code_007bGCJFLAGS_007d-854"></a><a name="index-_0040code_007bAM_005fLDFLAGS_007d-and-_0040code_007bLDFLAGS_007d-855"></a><a name="index-_0040code_007bAM_005fLFLAGS_007d-and-_0040code_007bLFLAGS_007d-856"></a><a name="index-_0040code_007bAM_005fOBJCFLAGS_007d-and-_0040code_007bOBJCFLAGS_007d-857"></a><a name="index-_0040code_007bAM_005fRFLAGS_007d-and-_0040code_007bRFLAGS_007d-858"></a><a name="index-_0040code_007bAM_005fYFLAGS_007d-and-_0040code_007bYFLAGS_007d-859"></a><a name="index-_0040code_007bCCASFLAGS_007d-and-_0040code_007bAM_005fCCASFLAGS_007d-860"></a><a name="index-_0040code_007bCFLAGS_007d-and-_0040code_007bAM_005fCFLAGS_007d-861"></a><a name="index-_0040code_007bCPPFLAGS_007d-and-_0040code_007bAM_005fCPPFLAGS_007d-862"></a><a name="index-_0040code_007bCXXFLAGS_007d-and-_0040code_007bAM_005fCXXFLAGS_007d-863"></a><a name="index-_0040code_007bFCFLAGS_007d-and-_0040code_007bAM_005fFCFLAGS_007d-864"></a><a name="index-_0040code_007bFFLAGS_007d-and-_0040code_007bAM_005fFFLAGS_007d-865"></a><a name="index-_0040code_007bGCJFLAGS_007d-and-_0040code_007bAM_005fGCJFLAGS_007d-866"></a><a name="index-_0040code_007bLDFLAGS_007d-and-_0040code_007bAM_005fLDFLAGS_007d-867"></a><a name="index-_0040code_007bLFLAGS_007d-and-_0040code_007bAM_005fLFLAGS_007d-868"></a><a name="index-_0040code_007bOBJCFLAGS_007d-and-_0040code_007bAM_005fOBJCFLAGS_007d-869"></a><a name="index-_0040code_007bRFLAGS_007d-and-_0040code_007bAM_005fRFLAGS_007d-870"></a><a name="index-_0040code_007bYFLAGS_007d-and-_0040code_007bAM_005fYFLAGS_007d-871"></a>
This section attempts to answer all the above questions.  We will
mostly discuss <code>CPPFLAGS</code> in our examples, but actually the
answer holds for all the compile flags used in Automake:
<code>CCASFLAGS</code>, <code>CFLAGS</code>, <code>CPPFLAGS</code>, <code>CXXFLAGS</code>,
<code>FCFLAGS</code>, <code>FFLAGS</code>, <code>GCJFLAGS</code>, <code>LDFLAGS</code>,
<code>LFLAGS</code>, <code>OBJCFLAGS</code>, <code>RFLAGS</code>, and <code>YFLAGS</code>.

   </p><p><code>CPPFLAGS</code>, <code>AM_CPPFLAGS</code>, and <code>mumble_CPPFLAGS</code> are
three variables that can be used to pass flags to the C preprocessor
(actually these variables are also used for other languages like C++
or preprocessed Fortran).  <code>CPPFLAGS</code> is the user variable
(see <a href="#User-Variables">User Variables</a>), <code>AM_CPPFLAGS</code> is the Automake variable,
and <code>mumble_CPPFLAGS</code> is the variable specific to the
<code>mumble</code> target (we call this a per-target variable,
see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

   </p><p>Automake always uses two of these variables when compiling C sources
files.  When compiling an object file for the <code>mumble</code> target,
the first variable will be <code>mumble_CPPFLAGS</code> if it is defined, or
<code>AM_CPPFLAGS</code> otherwise.  The second variable is always
<code>CPPFLAGS</code>.

   </p><p>In the following example,

</p><pre class="example">     bin_PROGRAMS = foo bar
     foo_SOURCES = xyz.c
     bar_SOURCES = main.c
     foo_CPPFLAGS = -DFOO
     AM_CPPFLAGS = -DBAZ
</pre>
   <p class="noindent"><span class="file">xyz.o</span> will be compiled with <code>$(foo_CPPFLAGS) $(CPPFLAGS)</code>,
(because <span class="file">xyz.o</span> is part of the <code>foo</code> target), while
<span class="file">main.o</span> will be compiled with <code>$(AM_CPPFLAGS) $(CPPFLAGS)</code>
(because there is no per-target variable for target <code>bar</code>).

   </p><p>The difference between <code>mumble_CPPFLAGS</code> and <code>AM_CPPFLAGS</code>
being clear enough, let's focus on <code>CPPFLAGS</code>.  <code>CPPFLAGS</code>
is a user variable, i.e., a variable that users are entitled to modify
in order to compile the package.  This variable, like many others,
is documented at the end of the output of <code>configure --help</code>.

   </p><p>For instance, someone who needs to add <span class="file">/home/my/usr/include</span> to
the C compiler's search path would configure a package with

</p><pre class="example">     ./configure CPPFLAGS='-I /home/my/usr/include'
</pre>
   <p class="noindent">and this flag would be propagated to the compile rules of all
<span class="file">Makefile</span>s.

   </p><p>It is also not uncommon to override a user variable at
<span class="command">make</span>-time.  Many installers do this with <code>prefix</code>, but
this can be useful with compiler flags too.  For instance if, while
debugging a C++ project, you need to disable optimization in one
specific object file, you can run something like

</p><pre class="example">     rm file.o
     make CXXFLAGS=-O0 file.o
     make
</pre>
   <p>The reason <code>$(CPPFLAGS)</code> appears after <code>$(AM_CPPFLAGS)</code> or
<code>$(mumble_CPPFLAGS)</code> in the compile command is that users
should always have the last say.  It probably makes more sense if you
think about it while looking at the <code>CXXFLAGS=-O0</code> above, which
should supersede any other switch from <code>AM_CXXFLAGS</code> or
<code>mumble_CXXFLAGS</code> (and this of course replaces the previous value
of <code>CXXFLAGS</code>).

   </p><p>You should never redefine a user variable such as <code>CPPFLAGS</code> in
<span class="file">Makefile.am</span>.  Use <code>automake -Woverride</code> to diagnose such
mistakes.  Even something like

</p><pre class="example">     CPPFLAGS = -DDATADIR=\"$(datadir)\" @CPPFLAGS@
</pre>
   <p class="noindent">is erroneous.  Although this preserves <span class="file">configure</span>'s value of
<code>CPPFLAGS</code>, the definition of <code>DATADIR</code> will disappear if a
user attempts to override <code>CPPFLAGS</code> from the <span class="command">make</span>
command line.

</p><pre class="example">     AM_CPPFLAGS = -DDATADIR=\"$(datadir)\"
</pre>
   <p class="noindent">is all what is needed here if no per-target flags are used.

   </p><p>You should not add options to these variables from inside
<span class="file">configure</span> either, for the same reason.  Occasionally you need
to modify these variables to perform a test, but you should reset
their value afterwards.

   </p><p>What we recommend is that you define extra flags in separate
variables.  For instance you may write an Autoconf macro that computes
a set of warning options for the C compiler, and <code>AC_SUBST</code> them
in <code>WARNINGCFLAGS</code>; you may also have an Autoconf macro that
determines which compiler and which linker flags should be used to
link with library <span class="file">libfoo</span>, and <code>AC_SUBST</code> these in
<code>LIBFOOCFLAGS</code> and <code>LIBFOOLDFLAGS</code>.  Then, a
<span class="file">Makefile.am</span> could use these variables as follows:

</p><pre class="example">     AM_CFLAGS = $(WARNINGCFLAGS)
     bin_PROGRAMS = prog1 prog2
     prog1_SOURCES = ...
     prog2_SOURCES = ...
     prog2_CFLAGS = $(LIBFOOCFLAGS) $(AM_CFLAGS)
     prog2_LDFLAGS = $(LIBFOOLDFLAGS)
</pre>
   <p>In this example both programs will be compiled with the flags
substituted into <code>$(WARNINGCFLAGS)</code>, and <code>prog2</code> will
additionally be compiled with the flags required to link with
<span class="file">libfoo</span>.

   </p><p>Note that listing <code>AM_CFLAGS</code> in a per-target <code>CFLAGS</code>
variable is a common idiom to ensure that <code>AM_CFLAGS</code> applies to
every target in a <span class="file">Makefile.in</span>.

   </p><p>Using variables like this gives you full control over the ordering of
the flags.  For instance if there is a flag in $(WARNINGCFLAGS) that
you want to negate for a particular target, you can use something like
<code>prog1_CFLAGS = $(AM_CFLAGS) -no-flag</code>.  If all these flags had
been forcefully appended to <code>CFLAGS</code>, there would be no way to
disable one flag.  Yet another reason to leave user variables to
users.

   </p><p>Finally, we have avoided naming the variable of the example
<code>LIBFOO_LDFLAGS</code> (with an underscore) because that would cause
Automake to think that this is actually a per-target variable (like
<code>mumble_LDFLAGS</code>) for some non-declared <code>LIBFOO</code> target.

</p><h4 class="subsection">26.5.2 Other Variables</h4>

<p>There are other variables in Automake that follow similar principles
to allow user options.  For instance Texinfo rules (see <a href="#Texinfo">Texinfo</a>)
uses <code>MAKEINFOFLAGS</code> and <code>AM_MAKEINFOFLAGS</code>.  Similarly,
DejaGnu tests (see <a href="#Tests">Tests</a>) use <code>RUNTESTDEFAULTFLAGS</code> and
<code>AM_RUNTESTDEFAULTFLAGS</code>.  The tags and ctags rules
(see <a href="#Tags">Tags</a>) use <code>ETAGSFLAGS</code>, <code>AM_ETAGSFLAGS</code>,
<code>CTAGSFLAGS</code>, and <code>AM_CTAGSFLAGS</code>.  Java rules
(see <a href="#Java">Java</a>) use <code>JAVACFLAGS</code> and <code>AM_JAVACFLAGS</code>.  None
of these rules do support per-target flags (yet).

   </p><p>To some extent, even <code>AM_MAKEFLAGS</code> (see <a href="#Subdirectories">Subdirectories</a>)
obeys this naming scheme.  The slight difference is that
<code>MAKEFLAGS</code> is passed to sub-<span class="command">make</span>s implicitly by
<span class="command">make</span> itself.

   </p><p>However you should not think that all variables ending with
<code>FLAGS</code> follow this convention.  For instance
<code>DISTCHECK_CONFIGURE_FLAGS</code> (see <a href="#Dist">Dist</a>),
<code>ACLOCAL_AMFLAGS</code> (see <a href="#Rebuilding">Rebuilding</a> and <a href="#Local-Macros">Local Macros</a>),
are two variables that are only useful to the maintainer and have no
user counterpart.

   </p><p><code>ARFLAGS</code> (see <a href="#A-Library">A Library</a>) is usually defined by Automake and
has neither <code>AM_</code> nor per-target cousin.

   </p><p>Finally you should not think either that the existence of a per-target
variable implies that of an <code>AM_</code> variable or that of a user
variable.  For instance the <code>mumble_LDADD</code> per-target variable
overrides the global <code>LDADD</code> variable (which is not a user
variable), and <code>mumble_LIBADD</code> exists only as a per-target
variable.  See <a href="#Program-and-Library-Variables">Program and Library Variables</a>.

</p><div class="node">
<p></p><hr>
<a name="renamed-objects"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Per_002dObject-Flags">Per-Object Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.6 Why are object files sometimes renamed?</h3>

<p>This happens when per-target compilation flags are used.  Object
files need to be renamed just in case they would clash with object
files compiled from the same sources, but with different flags.
Consider the following example.

</p><pre class="example">     bin_PROGRAMS = true false
     true_SOURCES = generic.c
     true_CPPFLAGS = -DEXIT_CODE=0
     false_SOURCES = generic.c
     false_CPPFLAGS = -DEXIT_CODE=1
</pre>
   <p class="noindent">Obviously the two programs are built from the same source, but it
would be bad if they shared the same object, because <span class="file">generic.o</span>
cannot be built with both <code>-DEXIT_CODE=0</code> <em>and</em>
<code>-DEXIT_CODE=1</code>.  Therefore <span class="command">automake</span> outputs rules to
build two different objects: <span class="file">true-generic.o</span> and
<span class="file">false-generic.o</span>.

   </p><p><span class="command">automake</span> doesn't actually look whether source files are
shared to decide if it must rename objects.  It will just rename all
objects of a target as soon as it sees per-target compilation flags
are used.

   </p><p>It's OK to share object files when per-target compilation flags are not
used.  For instance <span class="file">true</span> and <span class="file">false</span> will both use
<span class="file">version.o</span> in the following example.

</p><pre class="example">     AM_CPPFLAGS = -DVERSION=1.0
     bin_PROGRAMS = true false
     true_SOURCES = true.c version.c
     false_SOURCES = false.c version.c
</pre>
   <p>Note that the renaming of objects is also affected by the
<code>_SHORTNAME</code> variable (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

</p><div class="node">
<p></p><hr>
<a name="Per_002dObject-Flags"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Outputs">Multiple Outputs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#renamed-objects">renamed objects</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.7 Per-Object Flags Emulation</h3>

<p><a name="index-Per_002dobject-flags_002c-emulated-872"></a>
</p><pre class="display">     One of my source files needs to be compiled with different flags.  How
     do I do?
</pre>
   <p>Automake supports per-program and per-library compilation flags (see
<a href="#Program-and-Library-Variables">Program and Library Variables</a> and <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>).  With this you can define compilation flags that apply to
all files compiled for a target.  For instance in

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c foo.h bar.c bar.h main.c
     foo_CFLAGS = -some -flags
</pre>
   <p class="noindent"><span class="file">foo-foo.o</span>, <span class="file">foo-bar.o</span>, and <span class="file">foo-main.o</span> will all be
compiled with <code>-some -flags</code>.  (If you wonder about the names of
these object files, see <a href="#renamed-objects">renamed objects</a>.)  Note that
<code>foo_CFLAGS</code> gives the flags to use when compiling all the C
sources of the <em>program</em> <code>foo</code>, it has nothing to do with
<span class="file">foo.c</span> or <span class="file">foo-foo.o</span> specifically.

   </p><p>What if <span class="file">foo.c</span> needs to be compiled into <span class="file">foo.o</span> using some
specific flags, that none of the other files require?  Obviously
per-program flags are not directly applicable here.  Something like
per-object flags are expected, i.e., flags that would be used only
when creating <span class="file">foo-foo.o</span>.  Automake does not support that,
however this is easy to simulate using a library that contains only
that object, and compiling this library with per-library flags.

</p><pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = bar.c bar.h main.c
     foo_CFLAGS = -some -flags
     foo_LDADD = libfoo.a
     noinst_LIBRARIES = libfoo.a
     libfoo_a_SOURCES = foo.c foo.h
     libfoo_a_CFLAGS = -some -other -flags
</pre>
   <p>Here <span class="file">foo-bar.o</span> and <span class="file">foo-main.o</span> will all be
compiled with <code>-some -flags</code>, while <span class="file">libfoo_a-foo.o</span> will
be compiled using <code>-some -other -flags</code>.  Eventually, all
three objects will be linked to form <span class="file">foo</span>.

   </p><p>This trick can also be achieved using Libtool convenience libraries,
i.e., <code>noinst_LTLIBRARIES = libfoo.la</code> (see <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>).

   </p><p>Another tempting idea to implement per-object flags is to override the
compile rules <span class="command">automake</span> would output for these files.
Automake will not define a rule for a target you have defined, so you
could think about defining the <code>foo-foo.o: foo.c</code> rule yourself.
We recommend against this, because this is error prone.  For instance
if you add such a rule to the first example, it will break the day you
decide to remove <code>foo_CFLAGS</code> (because <span class="file">foo.c</span> will then be
compiled as <span class="file">foo.o</span> instead of <span class="file">foo-foo.o</span>, see <a href="#renamed-objects">renamed objects</a>).  Also in order to support dependency tracking, the two
<span class="file">.o</span>/<span class="file">.obj</span> extensions, and all the other flags variables
involved in a compilation, you will end up modifying a copy of the
rule previously output by <span class="command">automake</span> for this file.  If a new
release of Automake generates a different rule, your copy will need to
be updated by hand.

</p><div class="node">
<p></p><hr>
<a name="Multiple-Outputs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Per_002dObject-Flags">Per-Object Flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>
<br>
</div>

<h3 class="section">26.8 Handling Tools that Produce Many Outputs</h3>

<p><a name="index-multiple-outputs_002c-rules-with-873"></a><a name="index-many-outputs_002c-rules-with-874"></a><a name="index-rules-with-multiple-outputs-875"></a>
This section describes a <span class="command">make</span> idiom that can be used when a
tool produces multiple output files.  It is not specific to Automake
and can be used in ordinary <span class="file">Makefile</span>s.

   </p><p>Suppose we have a program called <span class="command">foo</span> that will read one file
called <span class="file">data.foo</span> and produce two files named <span class="file">data.c</span> and
<span class="file">data.h</span>.  We want to write a <span class="file">Makefile</span> rule that captures
this one-to-two dependency.

   </p><p>The naive rule is incorrect:

</p><pre class="example">     # This is incorrect.
     data.c data.h: data.foo
             foo data.foo
</pre>
   <p class="noindent">What the above rule really says is that <span class="file">data.c</span> and
<span class="file">data.h</span> each depend on <span class="file">data.foo</span>, and can each be built by
running <code>foo data.foo</code>.  In other words it is equivalent to:

</p><pre class="example">     # We do not want this.
     data.c: data.foo
             foo data.foo
     data.h: data.foo
             foo data.foo
</pre>
   <p class="noindent">which means that <span class="command">foo</span> can be run twice.  Usually it will not
be run twice, because <span class="command">make</span> implementations are smart enough
to check for the existence of the second file after the first one has
been built; they will therefore detect that it already exists.
However there are a few situations where it can run twice anyway:

     </p><ul>
<li>The most worrying case is when running a parallel <span class="command">make</span>.  If
<span class="file">data.c</span> and <span class="file">data.h</span> are built in parallel, two <code>foo
data.foo</code> commands will run concurrently.  This is harmful.
</li><li>Another case is when the dependency (here <code>data.foo</code>) is
(or depends upon) a phony target.
</li></ul>

   <p>A solution that works with parallel <span class="command">make</span> but not with
phony dependencies is the following:

</p><pre class="example">     data.c data.h: data.foo
             foo data.foo
     data.h: data.c
</pre>
   <p class="noindent">The above rules are equivalent to

</p><pre class="example">     data.c: data.foo
             foo data.foo
     data.h: data.foo data.c
             foo data.foo
</pre>
   <p class="noindent">therefore a parallel <span class="command">make</span> will have to serialize the builds
of <span class="file">data.c</span> and <span class="file">data.h</span>, and will detect that the second is
no longer needed once the first is over.

   </p><p>Using this pattern is probably enough for most cases.  However it does
not scale easily to more output files (in this scheme all output files
must be totally ordered by the dependency relation), so we will
explore a more complicated solution.

   </p><p>Another idea is to write the following:

</p><pre class="example">     # There is still a problem with this one.
     data.c: data.foo
             foo data.foo
     data.h: data.c
</pre>
   <p class="noindent">The idea is that <code>foo data.foo</code> is run only when <span class="file">data.c</span>
needs to be updated, but we further state that <span class="file">data.h</span> depends
upon <span class="file">data.c</span>.  That way, if <span class="file">data.h</span> is required and
<span class="file">data.foo</span> is out of date, the dependency on <span class="file">data.c</span> will
trigger the build.

   </p><p>This is almost perfect, but suppose we have built <span class="file">data.h</span> and
<span class="file">data.c</span>, and then we erase <span class="file">data.h</span>.  Then, running
<code>make data.h</code> will not rebuild <span class="file">data.h</span>.  The above rules
just state that <span class="file">data.c</span> must be up-to-date with respect to
<span class="file">data.foo</span>, and this is already the case.

   </p><p>What we need is a rule that forces a rebuild when <span class="file">data.h</span> is
missing.  Here it is:

</p><pre class="example">     data.c: data.foo
             foo data.foo
     data.h: data.c
             @if test -f $@; then :; else \
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>The above scales easily to more outputs and more inputs.  One of the
output is picked up to serve as a witness of the run of the command,
it depends upon all inputs, and all other outputs depend upon it.  For
instance if <span class="command">foo</span> should additionally read <span class="file">data.bar</span> and
also produce <span class="file">data.w</span> and <span class="file">data.x</span>, we would write:

</p><pre class="example">     data.c: data.foo data.bar
             foo data.foo data.bar
     data.h data.w data.x: data.c
             @if test -f $@; then :; else \
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>There is still a minor problem with this setup.  <span class="command">foo</span> outputs
four files, but we do not know in which order these files are created.
Suppose that <span class="file">data.h</span> is created before <span class="file">data.c</span>.  Then we
have a weird situation.  The next time <span class="command">make</span> is run,
<span class="file">data.h</span> will appear older than <span class="file">data.c</span>, the second rule
will be triggered, a shell will be started to execute the
<code>if...fi</code> command, but actually it will just execute the
<code>then</code> branch, that is: nothing.  In other words, because the
witness we selected is not the first file created by <span class="command">foo</span>,
<span class="command">make</span> will start a shell to do nothing each time it is run.

   </p><p>A simple riposte is to fix the timestamps when this happens.

</p><pre class="example">     data.c: data.foo data.bar
             foo data.foo data.bar
     data.h data.w data.x: data.c
             @if test -f $@; then \
               touch $@; \
             else \
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>Another solution, not incompatible with the previous one, is to use a
different and dedicated file as witness, rather than using any of
<span class="command">foo</span>'s outputs.

</p><pre class="example">     data.stamp: data.foo data.bar
             @rm -f data.tmp
             @touch data.tmp
             foo data.foo data.bar
             @mv -f data.tmp $@
     data.c data.h data.w data.x: data.stamp
             @if test -f $@; then \
               touch $@; \
             else \
               rm -f data.stamp; \
               $(MAKE) $(AM_MAKEFLAGS) data.stamp; \
             fi
</pre>
   <p><span class="file">data.tmp</span> is created before <span class="command">foo</span> is run, so it has a
timestamp older than output files output by <span class="command">foo</span>.  It is then
renamed to <span class="file">data.stamp</span> after <span class="command">foo</span> has run, because we
do not want to update <span class="file">data.stamp</span> if <span class="command">foo</span> fails.

   </p><p>Using a dedicated witness like this is very handy when the list of
output files is not known beforehand.  As an illustration, consider
the following rules to compile many <span class="file">*.el</span> files into
<span class="file">*.elc</span> files in a single command.  It does not matter how
<code>ELFILES</code> is defined (as long as it is not empty: empty targets
are not accepted by POSIX).

</p><pre class="example">     ELFILES = one.el two.el three.el ...
     ELCFILES = $(ELFILES:=c)

     elc-stamp: $(ELFILES)
             @rm -f elc-temp
             @touch elc-temp
             $(elisp_comp) $(ELFILES)
             @mv -f elc-temp $@

     $(ELCFILES): elc-stamp
             @if test -f $@; then \
               touch $@; \
             else \
               rm -f elc-stamp; \
               $(MAKE) $(AM_MAKEFLAGS) elc-stamp; \
             fi
</pre>
   <p>For completeness it should be noted that GNU <span class="command">make</span> is able to
express rules with multiple output files using pattern rules
(see <a href="http://sources.redhat.com/automake/make.html#Pattern-Examples">Pattern Rule Examples (The GNU Make Manual)</a>).  We do not discuss pattern rules here because they are not
portable, but they can be convenient in packages that assume GNU
<span class="command">make</span>.

</p><div class="node">
<p></p><hr>
<a name="History"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Copying-This-Manual">Copying This Manual</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#FAQ">FAQ</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">27 History of Automake</h2>

<p>This chapter presents various aspects of the history of Automake.  The
exhausted reader can safely skip it; this will be more of interest to
nostalgic people, or to those curious to learn about the evolution of
Automake.

</p><ul class="menu">
<li><a accesskey="1" href="#Timeline">Timeline</a>:                     The Automake story.
</li><li><a accesskey="2" href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>:   Evolution of Automatic Dependency Tracking
</li><li><a accesskey="3" href="#Releases">Releases</a>:                     Statistics about Automake Releases
</li></ul>

<div class="node">
<p></p><hr>
<a name="Timeline"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History">History</a>
<br>
</div>

<h3 class="section">27.1 Timeline</h3>

     <dl>
<dt>1994-09-19 First CVS commit.</dt><dd>
If we can trust the CVS repository, David J. MacKenzie (djm) started
working on Automake (or AutoMake, as it was spelt then) this Monday.

     <p>The first version of the <span class="command">automake</span> script looks as follows.

     </p><pre class="example">          #!/bin/sh

          status=0

          for makefile
          do
            if test ! -f ${makefile}.am; then
              echo "automake: ${makefile}.am: No such honkin' file"
              status=1
              continue
            fi

            exec 4&gt; ${makefile}.in

          done
     </pre>
     <p>From this you can already see that Automake will be about reading
<span class="file">*.am</span> file and producing <span class="file">*.in</span> files.  You cannot see
anything else, but if you also know that David is the one who created
Autoconf two years before you can guess the rest.

     </p><p>Several commits follow, and by the end of the day Automake is
reported to work for GNU fileutils and GNU m4.

     </p><p>The modus operandi is the one that is still used today: variables
assignments in <span class="file">Makefile.am</span> files trigger injections of
precanned <span class="file">Makefile</span> fragments into the generated
<span class="file">Makefile.in</span>.  The use of <span class="file">Makefile</span> fragments was inspired
by the 4.4BSD <span class="command">make</span> and include files, however Automake aims
to be portable and to conform to the GNU standards for <span class="file">Makefile</span>
variables and targets.

     </p><p>At this point, the most recent release of Autoconf is version 1.11,
and David is preparing to release Autoconf 2.0 in late October.  As a
matter of fact, he will barely touch Automake after September.

     <br></p></dd><dt>1994-11-05 David MacKenzie's last commit.</dt><dd>
At this point Automake is a 200 line portable shell script, plus 332
lines of <span class="file">Makefile</span> fragments.  In the <span class="file">README</span>, David
states his ambivalence between &#8220;portable shell&#8221; and &#8220;more
appropriate language&#8221;:

     <blockquote>
I wrote it keeping in mind the possibility of it becoming an Autoconf
macro, so it would run at configure-time.  That would slow
configuration down a bit, but allow users to modify the Makefile.am
without needing to fetch the AutoMake package.  And, the Makefile.in
files wouldn't need to be distributed.  But all of AutoMake would.  So
I might reimplement AutoMake in Perl, m4, or some other more
appropriate language.
</blockquote>

     <p>Automake is described as &#8220;an experimental Makefile generator&#8221;.
There is no documentation.  Adventurous users are referred to the
examples and patches needed to use Automake with GNU m4 1.3, fileutils
3.9, time 1.6, and development versions of find and indent.

     </p><p>These examples seem to have been lost.  However at the time of writing
(10 years later in September, 2004) the FSF still distributes a
package that uses this version of Automake: check out GNU termutils
2.0.

     <br></p></dd><dt>1995-11-12 Tom Tromey's first commit.</dt><dd>
After one year of inactivity, Tom Tromey takes over the package.
Tom was working on GNU cpio back then, and doing this just for fun,
having trouble finding a project to contribute to.  So while hacking
he wanted to bring the <span class="file">Makefile.in</span> up to GNU standards.  This
was hard, and one day he saw Automake on <a href="ftp://alpha.gnu.org/">ftp://alpha.gnu.org/</a>,
grabbed it and tried it out.

     <p>Tom didn't talk to djm about it until later, just to make sure he
didn't mind if he made a release.  He did a bunch of early releases to
the Gnits folks.

     </p><p>Gnits was (and still is) totally informal, just a few GNU friends who
François Pinard knew, who were all interested in making a common
infrastructure for GNU projects, and shared a similar outlook on how
to do it.  So they were able to make some progress.  It came along
with Autoconf and extensions thereof, and then Automake from David and
Tom (who were both gnitsians).  One of their ideas was to write a
document paralleling the GNU standards, that was more strict in some
ways and more detailed.  They never finished the GNITS standards, but
the ideas mostly made their way into Automake.

     <br></p></dd><dt>1995-11-23 Automake 0.20</dt><dd>
Besides introducing automatic dependency tracking (see <a href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>), this version also supplies a 9-page manual.

     <p>At this time <span class="command">aclocal</span> and <code>AM_INIT_AUTOMAKE</code> did not
exist, so many things had to be done by hand.  For instance here is
what a configure.in (this is the former name of the
<span class="file">configure.ac</span> we use today) must contain in order to use
Automake 0.20:

     </p><pre class="example">          PACKAGE=cpio
          VERSION=2.3.911
          AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE")
          AC_DEFINE_UNQUOTED(VERSION, "$VERSION")
          AC_SUBST(PACKAGE)
          AC_SUBST(VERSION)
          AC_ARG_PROGRAM
          AC_PROG_INSTALL
     </pre>
     <p>(Today all of the above is achieved by <code>AC_INIT</code> and
<code>AM_INIT_AUTOMAKE</code>.)

     </p><p>Here is how programs are specified in <span class="file">Makefile.am</span>:

     </p><pre class="example">          PROGRAMS = hello
          hello_SOURCES = hello.c
     </pre>
     <p>This looks pretty much like what we do today, except the
<code>PROGRAMS</code> variable has no directory prefix specifying where
<span class="file">hello</span> should be installed: all programs are installed in
<code>$(bindir)</code>.  <code>LIBPROGRAMS</code> can be used to specify programs
that must be built but not installed (it is called
<code>noinst_PROGRAMS</code> nowadays).

     </p><p>Programs can be built conditionally using <code>AC_SUBST</code>itutions:

     </p><pre class="example">          PROGRAMS = @progs@
          AM_PROGRAMS = foo bar baz
     </pre>
     <p>(<code>AM_PROGRAMS</code> has since then been renamed to
<code>EXTRA_PROGRAMS</code>.)

     </p><p>Similarly scripts, static libraries, and data can built and installed
using the <code>LIBRARIES</code>, <code>SCRIPTS</code>, and <code>DATA</code> variables.
However <code>LIBRARIES</code> were treated a bit specially in that Automake
did automatically supply the <span class="file">lib</span> and <span class="file">.a</span> prefixes.
Therefore to build <span class="file">libcpio.a</span>, one had to write

     </p><pre class="example">          LIBRARIES = cpio
          cpio_SOURCES = ...
     </pre>
     <p>Extra files to distribute must be listed in <code>DIST_OTHER</code> (the
ancestor of <code>EXTRA_DIST</code>).  Also extra directories that are to be
distributed should appear in <code>DIST_SUBDIRS</code>, but the manual
describes this as a temporary ugly hack (today extra directories should
also be listed in <code>EXTRA_DIST</code>, and <code>DIST_SUBDIRS</code> is used
for another purpose, see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>).

     <br></p></dd><dt>1995-11-26 Automake 0.21</dt><dd>
In less time that it takes to cook a frozen pizza, Tom rewrites
Automake using Perl.  At this time Perl 5 is only one year old, and
Perl 4.036 is in use at many sites.  Supporting several Perl versions
has been a source of problems through the whole history of Automake.

     <p>If you never used Perl 4, imagine Perl 5 without objects, without
<code>my</code> variables (only dynamically scoped <code>local</code> variables),
without function prototypes, with function calls that needs to be
prefixed with <code>&amp;</code>, etc.  Traces of this old style can still be
found in today's <span class="command">automake</span>.

     <br></p></dd><dt>1995-11-28 Automake 0.22</dt><dt>1995-11-29 Automake 0.23</dt><dd>
Bug fixes.

     <br></dd><dt>1995-12-08 Automake 0.24</dt><dt>1995-12-10 Automake 0.25</dt><dd>
Releases are raining.  0.24 introduces the uniform naming scheme we
use today, i.e., <code>bin_PROGRAMS</code> instead of <code>PROGRAMS</code>,
<code>noinst_LIBRARIES</code> instead of <code>LIBLIBRARIES</code>, etc.  (However
<code>EXTRA_PROGRAMS</code> does not exist yet, <code>AM_PROGRAMS</code> is still
in use; and <code>TEXINFOS</code> and <code>MANS</code> still have no directory
prefixes.)  Adding support for prefixes like that was one of the major
ideas in automake; it has lasted pretty well.

     <p>AutoMake is renamed to Automake (Tom seems to recall it was François
Pinard's doing).

     </p><p>0.25 fixes a Perl 4 portability bug.

     <br></p></dd><dt>1995-12-18 Jim Meyering starts using Automake in GNU Textutils.<br></dt><dt>1995-12-31 François Pinard starts using Automake in GNU tar.
<br></dt><dt>1996-01-03 Automake 0.26</dt><dt>1996-01-03 Automake 0.27</dt><dd>
Of the many change and suggestions sent by François Pinard and
included in 0.26, the most important is perhaps the advise that to
ease customization a user rule or variable definition should always
override an Automake rule or definition.

     <p>Gordon Matzigkeit and Jim Meyering are two other early contributors
that have been sending fixes.

     </p><p>0.27 fixes yet another Perl 4 portability bug.

     <br></p></dd><dt>1996-01-13 Automake 0.28</dt><dd>
Automake starts scanning <span class="file">configure.in</span> for <code>LIBOBJS</code>
support.  This is an important step because until this version
Automake did only know about the <span class="file">Makefile.am</span>s it processed.
<span class="file">configure.in</span> was Autoconf's world and the link between Autoconf
and Automake had to be done by the <span class="file">Makefile.am</span> author.  For
instance if <span class="file">config.h</span> was generated by <span class="file">configure</span>, it was the
package maintainer's responsibility to define the <code>CONFIG_HEADER</code>
variable in each <span class="file">Makefile.am</span>.

     <p>Succeeding releases will rely more and more on scanning
<span class="file">configure.in</span> to better automate the Autoconf integration.

     </p><p>0.28 also introduces the <code>AUTOMAKE_OPTIONS</code> variable and the
<code>--gnu</code> and <code>--gnits</code> options, the latter being stricter.

     <br></p></dd><dt>1996-02-07 Automake 0.29</dt><dd>
Thanks to <span class="file">configure.in</span> scanning, <code>CONFIG_HEADER</code> is gone,
and rebuild rules for <span class="file">configure</span>-generated file are
automatically output.

     <p><code>TEXINFOS</code> and <code>MANS</code> converted to the uniform naming
scheme.

     <br></p></dd><dt>1996-02-24 Automake 0.30</dt><dd>
The test suite is born.  It contains 9 tests.  From now on test cases
will be added pretty regularly (see <a href="#Releases">Releases</a>), and this proved to
be really helpful later on.

     <p><code>EXTRA_PROGRAMS</code> finally replaces <code>AM_PROGRAMS</code>.

     </p><p>All the third-party Autoconf macros, written mostly by François
Pinard (and later Jim Meyering), are distributed in Automake's
hand-written <span class="file">aclocal.m4</span> file.  Package maintainers are expected
to extract the necessary macros from this file.  (In previous version
you had to copy and paste them from the manual...)

     <br></p></dd><dt>1996-03-11 Automake 0.31</dt><dd>
The test suite in 0.30 was run via a long <code>check-local</code> rule.  Upon
Ulrich Drepper's suggestion, 0.31 makes it an Automake rule output
whenever the <code>TESTS</code> variable is defined.

     <p><code>DIST_OTHER</code> is renamed to <code>EXTRA_DIST</code>, and the <code>check_</code>
prefix is introduced.  The syntax is now the same as today.

     <br></p></dd><dt>1996-03-15 Gordon Matzigkeit starts writing libtool.
<br></dt><dt>1996-04-27 Automake 0.32</dt><dd>
<code>-hook</code> targets are introduced; an idea from Dieter Baron.

     <p><span class="file">*.info</span> files, which were output in the build directory are
now built in the source directory, because they are distributed.  It
seems these files like to move back and forth as that will happen
again in future versions.

     <br></p></dd><dt>1996-05-18 Automake 0.33</dt><dd>
Gord Matzigkeit's main two contributions:

          <ul>
<li>very preliminary libtool support
</li><li>the distcheck rule
</li></ul>

     <p>Although they were very basic at this point, these are probably
among the top features for Automake today.

     </p><p>Jim Meyering also provides the infamous <code>jm_MAINTAINER_MODE</code>,
since then renamed to <code>AM_MAINTAINER_MODE</code> and abandoned by its
author (see <a href="#maintainer_002dmode">maintainer-mode</a>).

     <br></p></dd><dt>1996-05-28 Automake 1.0</dt><dd>
After only six months of heavy development, the automake script is
3134 lines long, plus 973 lines of <span class="file">Makefile</span> fragments.  The
package has 30 pages of documentation, and 38 test cases.
<span class="file">aclocal.m4</span> contains 4 macros.

     <p>From now on and until version 1.4, new releases will occur at a rate
of about one a year.  1.1 did not exist, actually 1.1b to 1.1p have
been the name of beta releases for 1.2.  This is the first time
Automake uses suffix letters to designate beta releases, an habit that
lasts.

     <br></p></dd><dt>1996-10-10 Kevin Dalley packages Automake 1.0 for Debian GNU/Linux.
<br></dt><dt>1996-11-26 David J. MacKenzie releases Autoconf 2.12.</dt><dd>
Between June and October, the Autoconf development is almost staled.
Roland McGrath has been working at the beginning of the year.  David
comes back in November to release 2.12, but he won't touch Autoconf
anymore after this year, and Autoconf then really stagnates.  The
desolate Autoconf <span class="file">ChangeLog</span> for 1997 lists only 7 commits.

     <br></dd><dt>1997-02-28 <a href="mailto:automake@gnu.ai.mit.edu">automake@gnu.ai.mit.edu</a> list alive</dt><dd>
The mailing list is announced as follows:
     <pre class="example">          I've created the "automake" mailing list.  It is
          "automake@gnu.ai.mit.edu".  Administrivia, as always, to
          automake-request@gnu.ai.mit.edu.

          The charter of this list is discussion of automake, autoconf, and
          other configuration/portability tools (eg libtool).  It is expected
          that discussion will range from pleas for help all the way up to
          patches.

          This list is archived on the FSF machines.  Offhand I don't know if
          you can get the archive without an account there.

          This list is open to anybody who wants to join.  Tell all your
          friends!
          -- Tom Tromey
     </pre>
     <p>Before that people were discussing Automake privately, on the Gnits
mailing list (which is not public either), and less frequently on
<code>gnu.misc.discuss</code>.

     </p><p><code>gnu.ai.mit.edu</code> is now <code>gnu.org</code>, in case you never
noticed.  The archives of the early years of the
<code>automake@gnu.org</code> list have been lost, so today it is almost
impossible to find traces of discussions that occurred before 1999.
This has been annoying more than once, as such discussions can be
useful to understand the rationale behind a piece of uncommented code
that was introduced back then.

     <br></p></dd><dt>1997-06-22 Automake 1.2</dt><dd>
Automake developments continues, and more and more new Autoconf macros
are required.  Distributing them in <span class="file">aclocal.m4</span> and requiring
people to browse this file to extract the relevant macros becomes
uncomfortable.  Ideally, some of them should be contributed to
Autoconf so that they can be used directly, however Autoconf is
currently inactive.  Automake 1.2 consequently introduces
<span class="command">aclocal</span> (<span class="command">aclocal</span> was actually started on
1996-07-28), a tool that automatically constructs an <span class="file">aclocal.m4</span>
file from a repository of third-party macros.  Because Autoconf has
stalled, Automake also becomes a kind of repository for such
third-party macros, even macros completely unrelated to Automake (for
instance macros that fixes broken Autoconf macros).

     <p>The 1.2 release contains 20 macros, among which the
<code>AM_INIT_AUTOMAKE</code> macro that simplifies the creation of
<span class="file">configure.in</span>.

     </p><p>Libtool is fully supported using <code>*_LTLIBRARIES</code>.

     </p><p>The missing script is introduced by François Pinard; it is meant to be
a better solution than <code>AM_MAINTAINER_MODE</code>
(see <a href="#maintainer_002dmode">maintainer-mode</a>).

     </p><p>Conditionals support was implemented by Ian Lance Taylor.  At the
time, Tom and Ian were working on an internal project at Cygnus.  They
were using ILU, which is pretty similar to CORBA.  They wanted to
integrate ILU into their build, which was all <span class="file">configure</span>-based,
and Ian thought that adding conditionals to <span class="command">automake</span> was
simpler than doing all the work in <span class="file">configure</span> (which was the
standard at the time).  So this was actually funded by Cygnus.

     </p><p>This very useful but tricky feature will take a lot of time to
stabilize.  (At the time this text is written, there are still
primaries that have not been updated to support conditional
definitions in Automake 1.9.)

     </p><p>The <span class="command">automake</span> script has almost doubled: 6089 lines of Perl,
plus 1294 lines of <span class="file">Makefile</span> fragments.

     <br></p></dd><dt>1997-07-08 Gordon Matzigkeit releases Libtool 1.0.
<br></dt><dt>1998-04-05 Automake 1.3</dt><dd>
This is a small advance compared to 1.2.
It add support for assembly, and preliminary support for Java.

     <p>Perl 5.004_04 is out, but fixes to support Perl 4 are still
regularly submitted whenever Automake breaks it.

     <br></p></dd><dt>1998-09-06 <code>sourceware.cygnus.com</code> is on-line.</dt><dd>
Sourceware was setup by Jason Molenda to host open source projects.

     <br></dd><dt>1998-09-19  Automake CVS repository moved to <code>sourceware.cygnus.com</code></dt><dt>1998-10-26  <code>sourceware.cygnus.com</code> announces it hosts Automake</dt><dd>Automake is now hosted on <code>sourceware.cygnus.com</code>.  It has a
publicly accessible CVS repository.  This CVS repository is a copy of
the one Tom was using on his machine, which in turn is based on
a copy of the CVS repository of David MacKenzie.  This is why we still
have to full source history.  (Automake is still on Sourceware today,
but the host has been renamed to <code>sources.redhat.com</code>.)

     <p>The oldest file in the administrative directory of the CVS repository
that was created on Sourceware is dated 1998-09-19, while the
announcement that <code>automake</code> and <code>autoconf</code> had joined
<code>sourceware</code> was made on 1998-10-26.  They were among the first
projects to be hosted there.

     </p><p>The heedful reader will have noticed Automake was exactly 4-year-old
on 1998-09-19.

     <br></p></dd><dt>1999-01-05 Ben Elliston releases Autoconf 2.13.
<br></dt><dt>1999-01-14 Automake 1.4</dt><dd>
This release adds support for Fortran 77 and for the <code>include</code>
statement.  Also, <code>+=</code> assignments are introduced, but it is
still quite easy to fool Automake when mixing this with conditionals.

     <p>These two releases, Automake 1.4 and Autoconf 2.13 makes a duo that
will be used together for years.

     </p><p><span class="command">automake</span> is 7228 lines, plus 1591 lines of Makefile
fragment, 20 macros (some 1.3 macros were finally contributed back to
Autoconf), 197 test cases, and 51 pages of documentation.

     <br></p></dd><dt>1999-03-27 The <code>user-dep-branch</code> is created on the CVS repository.</dt><dd>
This implements a new dependency tracking schemed that should be
able to handle automatic dependency tracking using any compiler (not
just gcc) and any make (not just GNU <span class="command">make</span>).  In addition,
the new scheme should be more reliable than the old one, as
dependencies are generated on the end user's machine. Alexandre Oliva
creates depcomp for this purpose.

     <p>See <a href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>, for more details about the
evolution of automatic dependency tracking in Automake.

     <br></p></dd><dt>1999-11-21 The <code>user-dep-branch</code> is merged into the main trunk.</dt><dd>
This was a huge problem since we also had patches going in on the
trunk.  The merge took a long time and was very painful.

     <br></dd><dt>2000-05-10</dt><dd>
Since September 1999 and until 2003, Akim Demaille will be zealously
revamping Autoconf.

     <blockquote>
I think the next release should be called "3.0".<br>
Let's face it: you've basically rewritten autoconf.<br>
Every weekend there are 30 new patches.<br>
I don't see how we could call this "2.15" with a straight face.<br>
&#8211; Tom Tromey on <a href="mailto:autoconf@gnu.org">autoconf@gnu.org</a>
</blockquote>

     <p>Actually Akim works like a submarine: he will pile up patches while he
works off-line during the weekend, and flush them in batch when he
resurfaces on Monday.

     <br></p></dd><dt>2001-01-24</dt><dd>
On this Wednesday, Autoconf 2.49c, the last beta before Autoconf 2.50
is out, and Akim has to find something to do during his week-end :)

     <br></dd><dt>2001-01-28</dt><dd>
Akim sends a batch of 14 patches to <a href="mailto:automake@gnu.org">automake@gnu.org</a>.

     <blockquote>
Aiieeee!  I was dreading the day that the Demaillator turned his
sights on automake... and now it has arrived! &#8211; Tom Tromey
</blockquote>

     <p>It's only the beginning: in two months he will send 192 patches.  Then
he would slow down so Tom can catch up and review all this.  Initially
Tom actually read all these patches, then he probably trustingly
answered OK to most of them, and finally gave up and let Akim apply
whatever he wanted.  There was no way to keep up with that patch rate.

     </p><blockquote>
Anyway the patch below won't apply since it predates Akim's
sourcequake; I have yet to figure where the relevant passage has
been moved :) &#8211; Alexandre Duret-Lutz
</blockquote>

     <p>All these patches were sent to and discussed on
<a href="mailto:automake@gnu.org">automake@gnu.org</a>, so subscribed users were literally drown in
technical mails.  Eventually, the <a href="mailto:automake-patches@gnu.org">automake-patches@gnu.org</a>
mailing list was created in May.

     </p><p>Year after year, Automake had drifted away from its initial design:
construct <span class="file">Makefile.in</span> by assembling various <span class="file">Makefile</span>
fragments.  In 1.4, lots of <span class="file">Makefile</span> rules are being emitted at
various places in the <span class="command">automake</span> script itself; this does not
help ensuring a consistent treatment of these rules (for instance
making sure that user-defined rules override Automake's own rules).
One of Akim's goal was moving all these hard-coded rules to separate
<span class="file">Makefile</span> fragments, so the logic could be centralized in a
<span class="file">Makefile</span> fragment processor.

     </p><p>Another significant contribution of Akim is the interface with the
&#8220;trace&#8221; feature of Autoconf.  The way to scan <span class="file">configure.in</span> at
this time was to read the file and grep the various macro of interest
to Automake.  Doing so could break in many unexpected ways; automake
could miss some definition (for instance <code>AC_SUBST([$1], [$2])</code>
where the arguments are known only when M4 is run), or conversely it
could detect some macro that was not expanded (because it is called
conditionally).  In the CVS version of Autoconf, Akim had implemented
the <code>--trace</code> option, which provides accurate information about
where macros are actually called and with what arguments.  Akim will
equip Automake with a second <span class="file">configure.in</span> scanner that uses
this <code>--trace</code> interface.  Since it was not sensible to drop the
Autoconf 2.13 compatibility yet, this experimental scanner was only
used when an environment variable was set, the traditional
grep-scanner being still the default.

     <br></p></dd><dt>2001-04-25 Gary V. Vaughan releases Libtool 1.4</dt><dd>
It has been more than two years since Automake 1.4, CVS Automake has
suffered lot's of heavy changes and still is not ready for release.
Libtool 1.4 had to be distributed with a patch against Automake 1.4.

     <br></dd><dt>2001-05-08 Automake 1.4-p1</dt><dt>2001-05-24 Automake 1.4-p2</dt><dd>
Gary V. Vaughan, the principal Libtool maintainer, makes a &#8220;patch
release&#8221; of Automake:

     <blockquote>
The main purpose of this release is to have a stable automake
which is compatible with the latest stable libtool.
</blockquote>

     <p>The release also contains obvious fixes for bugs in Automake 1.4,
some of which were reported almost monthly.

     <br></p></dd><dt>2001-05-21 Akim Demaille releases Autoconf 2.50
<br></dt><dt>2001-06-07 Automake 1.4-p3</dt><dt>2001-06-10 Automake 1.4-p4</dt><dt>2001-07-15 Automake 1.4-p5</dt><dd>
Gary continues his patch-release series.  These also add support for
some new Autoconf 2.50 idioms.  Essentially, Autoconf now advocates
<span class="file">configure.ac</span> over <span class="file">configure.in</span>, and it introduces a new
syntax for <code>AC_OUTPUT</code>ing files.

     <br></dd><dt>2001-08-23 Automake 1.5</dt><dd>
A major and long-awaited release, that comes more than two years after
1.4.  It brings many changes, among which:
          <ul>
<li>The new dependency tracking scheme that uses <span class="command">depcomp</span>.
Aside from the improvement on the dependency tracking itself
(see <a href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>), this also streamlines the use
of automake generated <span class="file">Makefile.in</span>s as the <span class="file">Makefile.in</span>s
used during development are now the same as those used in
distributions.  Before that the <span class="file">Makefile.in</span>s generated for
maintainers required GNU <span class="command">make</span> and GCC, they were different
from the portable <span class="file">Makefile</span> generated for distribution; this was
causing some confusion.

          </li><li>Support for per-target compilation flags.

          </li><li>Support for reference to files in subdirectories in most
<span class="file">Makefile.am</span> variables.

          </li><li>Introduction of the <code>dist_</code>, <code>nodist_</code>, and <code>nobase_</code>
prefixes.
</li><li>Perl 4 support is finally dropped.
</li></ul>

     <p>1.5 did broke several packages that worked with 1.4.  Enough so that
Linux distributions could not easily install the new Automake version
without breaking many of the packages for which they had to run
<span class="command">automake</span>.

     </p><p>Some of these breakages were effectively bugs that would eventually be
fixed in the next release.  However, a lot of damage was caused by
some changes made deliberately to render Automake stricter on some
setup we did consider bogus.  For instance <code>make distcheck</code> was
improved to check that <code>make uninstall</code> did remove all the files
<code>make install</code> installed, that <code>make distclean</code> did not omit
some file, and that a VPATH build would work even if the source
directory was read-only.  Similarly, Automake now rejects multiple
definitions of the same variable (because that would mix very badly
with conditionals), and <code>+=</code> assignments with no previous
definition.  Because these changes all occurred suddenly after 1.4 had
been established for more that two years, it hurt users.

     </p><p>To make matter worse, meanwhile Autoconf (now at version 2.52) was
facing similar troubles, for similar reasons.

     <br></p></dd><dt>2002-03-05 Automake 1.6</dt><dd>
This release introduced versioned installation (see <a href="#API-versioning">API versioning</a>).  This was mainly pushed by Havoc Pennington, taking the
GNOME source tree as motive: due to incompatibilities between the
autotools it's impossible for the GNOME packages to switch to Autoconf
2.53 and Automake 1.5 all at once, so they are currently stuck with
Autoconf 2.13 and Automake 1.4.

     <p>The idea was to call this version <span class="file">automake-1.6</span>, call all its
bug-fix versions identically, and switch to <span class="file">automake-1.7</span> for
the next release that adds new features or changes some rules.  This
scheme implies maintaining a bug-fix branch in addition to the
development trunk, which means more work from the maintainer, but
providing regular bug-fix releases proved to be really worthwhile.

     </p><p>Like 1.5, 1.6 also introduced a bunch of incompatibilities, meant or
not.  Perhaps the more annoying was the dependence on the newly
released Autoconf 2.53.  Autoconf seemed to have stabilized enough
since its explosive 2.50 release, and included changes required to fix
some bugs in Automake.  In order to upgrade to Automake 1.6, people
now had to upgrade Autoconf too; for some packages it was no picnic.

     </p><p>While versioned installation helped people to upgrade, it also
unfortunately allowed people not to upgrade.  At the time of writing,
some Linux distributions are shipping packages for Automake 1.4, 1.5,
1.6, 1.7, 1.8, and 1.9.  Most of these still install 1.4 by default.
Some distribution also call 1.4 the &#8220;stable&#8221; version, and present
&#8220;1.9&#8221; as the development version; this does not really makes sense
since 1.9 is way more solid than 1.4.  All this does not help the
newcomer.

     <br></p></dd><dt>2002-04-11 Automake 1.6.1</dt><dd>
1.6, and the upcoming 1.4-p6 release were the last release by Tom.
This one and those following will be handled by Alexandre
Duret-Lutz.  Tom is still around, and will be there until about 1.7,
but his interest into Automake is drifting away towards projects like
<span class="command">gcj</span>.

     <p>Alexandre has been using Automake since 2000, and started to
contribute mostly on Akim's incitement (Akim and Alexandre have been
working in the same room from 1999 to 2002).  In 2001 and 2002 he had
a lot of free time to enjoy hacking Automake.

     <br></p></dd><dt>2002-06-14 Automake 1.6.2
<br></dt><dt>2002-07-28 Automake 1.6.3</dt><dt>2002-07-28 Automake 1.4-p6</dt><dd>
Two releases on the same day.  1.6.3 is a bug-fix release.

     <p>Tom Tromey backported the versioned installation mechanism on the 1.4
branch, so that Automake 1.6.x and Automake 1.4-p6 could be installed
side by side.  Another request from the GNOME folks.

     <br></p></dd><dt>2002-09-25 Automake 1.7</dt><dd>
This release switches to the new <span class="file">configure.ac</span> scanner Akim
was experimenting in 1.5.

     <br></dd><dt>2002-10-16 Automake 1.7.1</dt><dt>2002-12-06 Automake 1.7.2</dt><dt>2003-02-20 Automake 1.7.3</dt><dt>2003-04-23 Automake 1.7.4</dt><dt>2003-05-18 Automake 1.7.5</dt><dt>2003-07-10 Automake 1.7.6</dt><dt>2003-09-07 Automake 1.7.7</dt><dt>2003-10-07 Automake 1.7.8</dt><dd>
Many bug-fix releases.  1.7 lasted because the development version
(upcoming 1.8) was suffering some major internal revamping.

     <br></dd><dt>2003-10-26 Automake on screen</dt><dd>
Episode 49, `Repercussions', in the third season of the `Alias' TV
show is first aired.

     <p>Marshall, one of the character, is working on a computer virus that he
has to modify before it gets into the wrong hands or something like
that.  The screenshots you see do not show any program code, they show
a <span class="file">Makefile.in</span> <code>generated by automake</code>...

     <br></p></dd><dt>2003-11-09 Automake 1.7.9
<br></dt><dt>2003-12-10 Automake 1.8</dt><dd>
The most striking update is probably that of <span class="command">aclocal</span>.

     <p><span class="command">aclocal</span> now uses <code>m4_include</code> in the produced
<code>aclocal.m4</code> when the included macros are already distributed
with the package (an idiom used in many packages), which reduces code
duplication.  Many people liked that, but in fact this change was
really introduced to fix a bug in rebuild rules: <span class="file">Makefile.in</span>
must be rebuilt whenever a dependency of <span class="file">configure</span> changes, but
all the <span class="file">m4</span> files included in <span class="file">aclocal.m4</span> where unknown
from <span class="command">automake</span>.  Now <span class="command">automake</span> can just trace the
<code>m4_include</code>s to discover the dependencies.

     </p><p><span class="command">aclocal</span> also starts using the <code>--trace</code> Autoconf option
in order to discover used macros more accurately.  This will turn out
to be very tricky (later releases will improve this) as people had
devised many ways to cope with the limitation of previous
<span class="command">aclocal</span> versions, notably using handwritten
<code>m4_include</code>s: <span class="command">aclocal</span> must make sure not to redefine a
rule which is already included by such statement.

     </p><p>Automake also has seen its guts rewritten.  Although this rewriting
took a lot of efforts, it is only apparent to the users in that some
constructions previously disallowed by the implementation now work
nicely.  Conditionals, Locations, Variable and Rule definitions,
Options: these items on which Automake works have been rewritten as
separate Perl modules, and documented.

     </p></dd><dt>2004-01-11 Automake 1.8.1</dt><dt>2004-01-12 Automake 1.8.2</dt><dt>2004-03-07 Automake 1.8.3</dt><dt>2004-04-25 Automake 1.8.4</dt><dt>2004-05-16 Automake 1.8.5
<br></dt><dt>2004-07-28 Automake 1.9</dt><dd>
This release tries to simplify the compilation rules it outputs to
reduce the size of the Makefile.  The complaint initially come from
the libgcj developers.  Their <span class="file">Makefile.in</span> generated with
Automake 1.4 and custom build rules (1.4 did not support compiled
Java) is 250KB.  The one generated by 1.8 was over 9MB!  1.9 gets it
down to 1.2MB.

     <p>Aside from this it contains mainly minor changes and bug-fixes.

     </p></dd><dt>2004-08-11 Automake 1.9.1</dt><dt>2004-09-19 Automake 1.9.2</dt><dd>
Automake has ten years.  This chapter of the manual was initially
written for this occasion.

</dd></dl>

<div class="node">
<p></p><hr>
<a name="Dependency-Tracking-Evolution"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Releases">Releases</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Timeline">Timeline</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History">History</a>
<br>
</div>

<h3 class="section">27.2 Dependency Tracking in Automake</h3>

<p>Over the years Automake has deployed three different dependency
tracking methods.  Each method, including the current one, has had
flaws of various sorts.  Here we lay out the different dependency
tracking methods, their flaws, and their fixes.  We conclude with
recommendations for tool writers, and by indicating future directions
for dependency tracking work in Automake.

</p><h4 class="subsection">27.2.1 First Take</h4>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>Our first attempt at automatic dependency tracking was based on the
method recommended by GNU <span class="command">make</span>.  (see <a href="http://sources.redhat.com/automake/make.html#Automatic-Prerequisites">Generating Prerequisites Automatically (The GNU make Manual)</a>)

   </p><p>This version worked by precomputing dependencies ahead of time.  For
each source file, it had a special <span class="file">.P</span> file which held the
dependencies.  There was a rule to generate a <span class="file">.P</span> file by
invoking the compiler appropriately.  All such <span class="file">.P</span> files were
included by the <span class="file">Makefile</span>, thus implicitly becoming dependencies
of <span class="file">Makefile</span>.

</p><h5 class="unnumberedsubsubsec">Bugs</h5>

<p>This approach had several critical bugs.

     </p><ul>
<li>The code to generate the <span class="file">.P</span> file relied on <code>gcc</code>.
(A limitation, not technically a bug.)
</li><li>The dependency tracking mechanism itself relied on GNU <span class="command">make</span>.
(A limitation, not technically a bug.)
</li><li>Because each <span class="file">.P</span> file was a dependency of <span class="file">Makefile</span>, this
meant that dependency tracking was done eagerly by <span class="command">make</span>.
For instance, <code>make clean</code> would cause all the dependency files
to be updated, and then immediately removed.  This eagerness also
caused problems with some configurations; if a certain source file
could not be compiled on a given architecture for some reason,
dependency tracking would fail, aborting the entire build.
</li><li>As dependency tracking was done as a pre-pass, compile times were
doubled&#8211;the compiler had to be run twice per source file.
</li><li><code>make dist</code> re-ran <span class="command">automake</span> to generate a
<span class="file">Makefile</span> which did not have automatic dependency tracking (and
which was thus portable to any version of <span class="command">make</span>).  In order to
do this portably, Automake had to scan the dependency files and remove
any reference which was to a source file not in the distribution.
This process was error-prone.  Also, if <code>make dist</code> was run in an
environment where some object file had a dependency on a source file
which was only conditionally created, Automake would generate a
<span class="file">Makefile</span> which referred to a file which might not appear in the
end user's build.  A special, hacky mechanism was required to work
around this.
</li></ul>

<h5 class="unnumberedsubsubsec">Historical Note</h5>

<p>The code generated by Automake is often inspired by the
<span class="file">Makefile</span> style of a particular author. In the case of the first
implementation of dependency tracking, I believe the impetus and
inspiration was Jim Meyering.  (I could be mistaken.  If you know
otherwise feel free to correct me.)

</p><h4 class="subsection">27.2.2 Dependencies As Side Effects</h4>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>The next refinement of Automake's automatic dependency tracking scheme
was to implement dependencies as side effects of the compilation.
This was aimed at solving the most commonly reported problems with the
first approach.  In particular we were most concerned with eliminating
the weird rebuilding effect associated with make clean.

   </p><p>In this approach, the <span class="file">.P</span> files were included using the
<code>-include</code> command, which let us create these files lazily.  This
avoided the <code>make clean</code> problem.

   </p><p>We only computed dependencies when a file was actually compiled.  This
avoided the performance penalty associated with scanning each file
twice.  It also let us avoid the other problems associated with the
first, eager, implementation.  For instance, dependencies would never
be generated for a source file which was not compilable on a given
architecture (because it in fact would never be compiled).

</p><h5 class="unnumberedsubsubsec">Bugs</h5>

     <ul>
<li>This approach also relied on the existence of <span class="command">gcc</span> and GNU
<span class="command">make</span>. (A limitation, not technically a bug.)
</li><li>Dependency tracking was still done by the developer, so the problems
from the first implementation relating to massaging of dependencies by
<code>make dist</code> were still in effect.
</li><li>This implementation suffered from the &#8220;deleted header file&#8221; problem.
Suppose a lazily-created <span class="file">.P</span> file includes a dependency on a
given header file, like this:

     <pre class="example">          maude.o: maude.c something.h
     </pre>
     <p>Now suppose that the developer removes <span class="file">something.h</span> and updates
<span class="file">maude.c</span> so that this include is no longer needed.  If he runs
<span class="command">make</span>, he will get an error because there is no way to create
<span class="file">something.h</span>.

     </p><p>We fixed this problem in a later release by further massaging the
output of <span class="command">gcc</span> to include a dummy dependency for each header
file.
</p></li></ul>

<h4 class="subsection">27.2.3 Dependencies for the User</h4>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>The bugs associated with <code>make dist</code>, over time, became a real
problem.  Packages using Automake were being built on a large number
of platforms, and were becoming increasingly complex.  Broken
dependencies were distributed in &#8220;portable&#8221; <span class="file">Makefile.in</span>s,
leading to user complaints.  Also, the requirement for <span class="command">gcc</span>
and GNU <span class="command">make</span> was a constant source of bug reports.  The next
implementation of dependency tracking aimed to remove these problems.

   </p><p>We realized that the only truly reliable way to automatically track
dependencies was to do it when the package itself was built.  This
meant discovering a method portable to any version of make and any
compiler.  Also, we wanted to preserve what we saw as the best point
of the second implementation: dependency computation as a side effect
of compilation.

   </p><p>In the end we found that most modern make implementations support some
form of include directive.  Also, we wrote a wrapper script which let
us abstract away differences between dependency tracking methods for
compilers.  For instance, some compilers cannot generate dependencies
as a side effect of compilation.  In this case we simply have the
script run the compiler twice.  Currently our wrapper script
(<span class="command">depcomp</span>) knows about twelve different compilers (including
a "compiler" which simply invokes <span class="command">makedepend</span> and then the
real compiler, which is assumed to be a standard Unix-like C compiler
with no way to do dependency tracking).

</p><h5 class="unnumberedsubsubsec">Bugs</h5>

     <ul>
<li>Running a wrapper script for each compilation slows down the build.
</li><li>Many users don't really care about precise dependencies.
</li><li>This implementation, like every other automatic dependency tracking
scheme in common use today (indeed, every one we've ever heard of),
suffers from the &#8220;duplicated new header&#8221; bug.

     <p>This bug occurs because dependency tracking tools, such as the
compiler, only generate dependencies on the successful opening of a
file, and not on every probe.

     </p><p>Suppose for instance that the compiler searches three directories for
a given header, and that the header is found in the third directory.
If the programmer erroneously adds a header file with the same name to
the first directory, then a clean rebuild from scratch could fail
(suppose the new header file is buggy), whereas an incremental rebuild
will succeed.

     </p><p>What has happened here is that people have a misunderstanding of what
a dependency is.  Tool writers think a dependency encodes information
about which files were read by the compiler.  However, a dependency
must actually encode information about what the compiler tried to do.

     </p><p>This problem is not serious in practice.  Programmers typically do not
use the same name for a header file twice in a given project.  (At
least, not in C or C++.  This problem may be more troublesome in
Java.)  This problem is easy to fix, by modifying dependency
generators to record every probe, instead of every successful open.

     </p></li><li>Since automake generates dependencies as a side effect of compilation,
there is a bootstrapping problem when header files are generated by
running a program.  The problem is that, the first time the build is
done, there is no way by default to know that the headers are
required, so make might try to run a compilation for which the headers
have not yet been built.

     <p>This was also a problem in the previous dependency tracking implementation.

     </p><p>The current fix is to use <code>BUILT_SOURCES</code> to list built headers
(see <a href="#Sources">Sources</a>).  This causes them to be built before any other
other build rules are run.  This is unsatisfactory as a general
solution, however in practice it seems sufficient for most actual
programs.
</p></li></ul>

   <p>This code is used since Automake 1.5.

   </p><p>In GCC 3.0, we managed to convince the maintainers to add special
command-line options to help Automake more efficiently do its job.  We
hoped this would let us avoid the use of a wrapper script when
Automake's automatic dependency tracking was used with <span class="command">gcc</span>.

   </p><p>Unfortunately, this code doesn't quite do what we want.  In
particular, it removes the dependency file if the compilation fails;
we'd prefer that it instead only touch the file in any way if the
compilation succeeds.

   </p><p>Nevertheless, since Automake 1.7, when a recent <span class="command">gcc</span> is
detected at <span class="command">configure</span> time, we inline the
dependency-generation code and do not use the <span class="command">depcomp</span>
wrapper script.  This makes compilations faster for those using this
compiler (probably our primary user base).  The counterpart is that
because we have to encode two compilation rules in <span class="file">Makefile</span>
(with or without <span class="command">depcomp</span>), the produced <span class="file">Makefile</span>s are
larger.

</p><h4 class="subsection">27.2.4 Techniques for Computing Dependencies</h4>

<p>There are actually several ways for a build tool like Automake to
cause tools to generate dependencies.

     </p><dl>
<dt><span class="command">makedepend</span></dt><dd>This was a commonly-used method in the past.  The idea is to run a
special program over the source and have it generate dependency
information.  Traditional implementations of <span class="command">makedepend</span> ere
not completely precise; ordinarily they were conservative and
discovered too many dependencies.
<br></dd><dt>The tool</dt><dd>An obvious way to generate dependencies is to simply write the tool so
that it can generate the information needed by the build tool.  This is
also the most portable method.  Many compilers have an option to
generate dependencies.  Unfortunately, not all tools provide such an
option.
<br></dd><dt>The file system</dt><dd>It is possible to write a special file system that tracks opens,
reads, writes, etc, and then feed this information back to the build
tool.  <span class="command">clearmake</span> does this.  This is a very powerful
technique, as it doesn't require cooperation from the
tool.  Unfortunately it is also very difficult to implement and also
not practical in the general case.
<br></dd><dt><code>LD_PRELOAD</code></dt><dd>Rather than use the file system, one could write a special library to
intercept <code>open</code> and other syscalls.  This technique is also quite
powerful, but unfortunately it is not portable enough for use in
<span class="command">automake</span>.
</dd></dl>

<h4 class="subsection">27.2.5 Recommendations for Tool Writers</h4>

<p>We think that every compilation tool ought to be able to generate
dependencies as a side effect of compilation.  Furthermore, at least
while <span class="command">make</span>-based tools are nearly universally in use (at
least in the free software community), the tool itself should generate
dummy dependencies for header files, to avoid the deleted header file
bug.  Finally, the tool should generate a dependency for each probe,
instead of each successful file open, in order to avoid the duplicated
new header bug.

</p><h4 class="subsection">27.2.6 Future Directions for Automake's Dependency Tracking</h4>

<p>Currently, only languages and compilers understood by Automake can
have dependency tracking enabled.  We would like to see if it is
practical (and worthwhile) to let this support be extended by the user
to languages unknown to Automake.

</p><div class="node">
<p></p><hr>
<a name="Releases"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History">History</a>
<br>
</div>

<h3 class="section">27.3 Release Statistics</h3>

<p>The following table (inspired by <code>perlhist(1)</code>) quantifies the
evolution of Automake using these metrics:

     </p><dl>
<dt>Date, Rel</dt><dd>The date and version of the release.
<br></dd><dt>am</dt><dd>The number of lines of the <span class="command">automake</span> script.
<br></dd><dt>acl</dt><dd>The number of lines of the <span class="command">aclocal</span> script.
<br></dd><dt>pm</dt><dd>The number of lines of the <span class="command">Perl</span> supporting modules.
<br></dd><dt><span class="file">*.am</span></dt><dd>The number of lines of the <span class="file">Makefile</span> fragments.  The number in parenthesis
is the number of files.
<br></dd><dt>m4</dt><dd>The number of lines (and files) of Autoconf macros.
<br></dd><dt>doc</dt><dd>The number of pages of the documentation (the Postscript version).
<br></dd><dt>t</dt><dd>The number of test cases in the test suite.
</dd></dl>

   <p><table summary=""><tbody><tr align="left"><th valign="top">Date   </th><th valign="top">Rel </th><th valign="top">am </th><th valign="top">acl </th><th valign="top">pm </th><th valign="top"><span class="file">*.am</span> </th><th valign="top">m4 </th><th valign="top">doc </th><th valign="top">t
<br></th></tr><tr align="left"><td valign="top">1994-09-19 </td><td valign="top">CVS    </td><td valign="top">141 </td><td valign="top"></td><td valign="top"></td><td valign="top">299 (24) </td><td valign="top"></td><td valign="top"></td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1994-11-05 </td><td valign="top">CVS    </td><td valign="top">208 </td><td valign="top"></td><td valign="top"></td><td valign="top">332 (28) </td><td valign="top"></td><td valign="top"></td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-11-23 </td><td valign="top">0.20   </td><td valign="top">533 </td><td valign="top"></td><td valign="top"></td><td valign="top">458 (35) </td><td valign="top"></td><td valign="top">9 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-11-26 </td><td valign="top">0.21   </td><td valign="top">613 </td><td valign="top"></td><td valign="top"></td><td valign="top">480 (36) </td><td valign="top"></td><td valign="top">11 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-11-28 </td><td valign="top">0.22   </td><td valign="top">1116 </td><td valign="top"></td><td valign="top"></td><td valign="top">539 (38) </td><td valign="top"></td><td valign="top">12 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-11-29 </td><td valign="top">0.23   </td><td valign="top">1240 </td><td valign="top"></td><td valign="top"></td><td valign="top">541 (38) </td><td valign="top"></td><td valign="top">12 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-12-08 </td><td valign="top">0.24   </td><td valign="top">1462 </td><td valign="top"></td><td valign="top"></td><td valign="top">504 (33) </td><td valign="top"></td><td valign="top">14 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1995-12-10 </td><td valign="top">0.25   </td><td valign="top">1513 </td><td valign="top"></td><td valign="top"></td><td valign="top">511 (37) </td><td valign="top"></td><td valign="top">15 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1996-01-03 </td><td valign="top">0.26   </td><td valign="top">1706 </td><td valign="top"></td><td valign="top"></td><td valign="top">438 (36) </td><td valign="top"></td><td valign="top">16 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1996-01-03 </td><td valign="top">0.27   </td><td valign="top">1706 </td><td valign="top"></td><td valign="top"></td><td valign="top">438 (36) </td><td valign="top"></td><td valign="top">16 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1996-01-13 </td><td valign="top">0.28   </td><td valign="top">1964 </td><td valign="top"></td><td valign="top"></td><td valign="top">934 (33) </td><td valign="top"></td><td valign="top">16 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1996-02-07 </td><td valign="top">0.29   </td><td valign="top">2299 </td><td valign="top"></td><td valign="top"></td><td valign="top">936 (33) </td><td valign="top"></td><td valign="top">17 </td><td valign="top">
<br></td></tr><tr align="left"><td valign="top">1996-02-24 </td><td valign="top">0.30   </td><td valign="top">2544 </td><td valign="top"></td><td valign="top"></td><td valign="top">919 (32) </td><td valign="top">85 (1)  </td><td valign="top">20 </td><td valign="top">9
<br></td></tr><tr align="left"><td valign="top">1996-03-11 </td><td valign="top">0.31   </td><td valign="top">2877 </td><td valign="top"></td><td valign="top"></td><td valign="top">919 (32) </td><td valign="top">85 (1)  </td><td valign="top">29 </td><td valign="top">17
<br></td></tr><tr align="left"><td valign="top">1996-04-27 </td><td valign="top">0.32   </td><td valign="top">3058 </td><td valign="top"></td><td valign="top"></td><td valign="top">921 (31) </td><td valign="top">85 (1)  </td><td valign="top">30 </td><td valign="top">26
<br></td></tr><tr align="left"><td valign="top">1996-05-18 </td><td valign="top">0.33   </td><td valign="top">3110 </td><td valign="top"></td><td valign="top"></td><td valign="top">926 (31) </td><td valign="top">105 (1)  </td><td valign="top">30 </td><td valign="top">35
<br></td></tr><tr align="left"><td valign="top">1996-05-28 </td><td valign="top">1.0    </td><td valign="top">3134 </td><td valign="top"></td><td valign="top"></td><td valign="top">973 (32) </td><td valign="top">105 (1)  </td><td valign="top">30 </td><td valign="top">38
<br></td></tr><tr align="left"><td valign="top">1997-06-22 </td><td valign="top">1.2    </td><td valign="top">6089 </td><td valign="top">385 </td><td valign="top"></td><td valign="top">1294 (36) </td><td valign="top">592 (23) </td><td valign="top">37 </td><td valign="top">126
<br></td></tr><tr align="left"><td valign="top">1998-04-05 </td><td valign="top">1.3    </td><td valign="top">6415 </td><td valign="top">422 </td><td valign="top"></td><td valign="top">1470 (39) </td><td valign="top">741 (26) </td><td valign="top">39 </td><td valign="top">156
<br></td></tr><tr align="left"><td valign="top">1999-01-14 </td><td valign="top">1.4    </td><td valign="top">7240 </td><td valign="top">426 </td><td valign="top"></td><td valign="top">1591 (40) </td><td valign="top">734 (23) </td><td valign="top">51 </td><td valign="top">197
<br></td></tr><tr align="left"><td valign="top">2001-05-08 </td><td valign="top">1.4-p1 </td><td valign="top">7251 </td><td valign="top">426 </td><td valign="top"></td><td valign="top">1591 (40) </td><td valign="top">734 (23) </td><td valign="top">51 </td><td valign="top">197
<br></td></tr><tr align="left"><td valign="top">2001-05-24 </td><td valign="top">1.4-p2 </td><td valign="top">7268 </td><td valign="top">439 </td><td valign="top"></td><td valign="top">1591 (40) </td><td valign="top">734 (23) </td><td valign="top">49 </td><td valign="top">197
<br></td></tr><tr align="left"><td valign="top">2001-06-07 </td><td valign="top">1.4-p3 </td><td valign="top">7312 </td><td valign="top">439 </td><td valign="top"></td><td valign="top">1591 (40) </td><td valign="top">734 (23) </td><td valign="top">49 </td><td valign="top">197
<br></td></tr><tr align="left"><td valign="top">2001-06-10 </td><td valign="top">1.4-p4 </td><td valign="top">7321 </td><td valign="top">439 </td><td valign="top"></td><td valign="top">1591 (40) </td><td valign="top">734 (23) </td><td valign="top">49 </td><td valign="top">198
<br></td></tr><tr align="left"><td valign="top">2001-07-15 </td><td valign="top">1.4-p5 </td><td valign="top">7228 </td><td valign="top">426 </td><td valign="top"></td><td valign="top">1596 (40) </td><td valign="top">734 (23) </td><td valign="top">51 </td><td valign="top">198
<br></td></tr><tr align="left"><td valign="top">2001-08-23 </td><td valign="top">1.5    </td><td valign="top">8016 </td><td valign="top">475 </td><td valign="top">600 </td><td valign="top">2654 (39) </td><td valign="top">1166 (32) </td><td valign="top">63 </td><td valign="top">327
<br></td></tr><tr align="left"><td valign="top">2002-03-05 </td><td valign="top">1.6    </td><td valign="top">8465 </td><td valign="top">475 </td><td valign="top">1136 </td><td valign="top">2732 (39) </td><td valign="top">1603 (31) </td><td valign="top">66 </td><td valign="top">365
<br></td></tr><tr align="left"><td valign="top">2002-04-11 </td><td valign="top">1.6.1  </td><td valign="top">8544 </td><td valign="top">475 </td><td valign="top">1136 </td><td valign="top">2741 (39) </td><td valign="top">1603 (31) </td><td valign="top">66 </td><td valign="top">372
<br></td></tr><tr align="left"><td valign="top">2002-06-14 </td><td valign="top">1.6.2  </td><td valign="top">8575 </td><td valign="top">475 </td><td valign="top">1136 </td><td valign="top">2800 (39) </td><td valign="top">1609 (31) </td><td valign="top">67 </td><td valign="top">386
<br></td></tr><tr align="left"><td valign="top">2002-07-28 </td><td valign="top">1.6.3  </td><td valign="top">8600 </td><td valign="top">475 </td><td valign="top">1153 </td><td valign="top">2809 (39) </td><td valign="top">1609 (31) </td><td valign="top">67 </td><td valign="top">391
<br></td></tr><tr align="left"><td valign="top">2002-07-28 </td><td valign="top">1.4-p6 </td><td valign="top">7332 </td><td valign="top">455 </td><td valign="top"></td><td valign="top">1596 (40) </td><td valign="top">735 (24) </td><td valign="top">49 </td><td valign="top">197
<br></td></tr><tr align="left"><td valign="top">2002-09-25 </td><td valign="top">1.7    </td><td valign="top">9189 </td><td valign="top">471 </td><td valign="top">1790 </td><td valign="top">2965 (39) </td><td valign="top">1606 (33) </td><td valign="top">73 </td><td valign="top">430
<br></td></tr><tr align="left"><td valign="top">2002-10-16 </td><td valign="top">1.7.1  </td><td valign="top">9229 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">2977 (39) </td><td valign="top">1606 (33) </td><td valign="top">73 </td><td valign="top">437
<br></td></tr><tr align="left"><td valign="top">2002-12-06 </td><td valign="top">1.7.2  </td><td valign="top">9334 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">2988 (39) </td><td valign="top">1606 (33) </td><td valign="top">77 </td><td valign="top">445
<br></td></tr><tr align="left"><td valign="top">2003-02-20 </td><td valign="top">1.7.3  </td><td valign="top">9389 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3023 (39) </td><td valign="top">1651 (34) </td><td valign="top">84 </td><td valign="top">448
<br></td></tr><tr align="left"><td valign="top">2003-04-23 </td><td valign="top">1.7.4  </td><td valign="top">9429 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3031 (39) </td><td valign="top">1644 (34) </td><td valign="top">85 </td><td valign="top">458
<br></td></tr><tr align="left"><td valign="top">2003-05-18 </td><td valign="top">1.7.5  </td><td valign="top">9429 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3033 (39) </td><td valign="top">1645 (34) </td><td valign="top">85 </td><td valign="top">459
<br></td></tr><tr align="left"><td valign="top">2003-07-10 </td><td valign="top">1.7.6  </td><td valign="top">9442 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3033 (39) </td><td valign="top">1660 (34) </td><td valign="top">85 </td><td valign="top">461
<br></td></tr><tr align="left"><td valign="top">2003-09-07 </td><td valign="top">1.7.7  </td><td valign="top">9443 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3041 (39) </td><td valign="top">1660 (34) </td><td valign="top">90 </td><td valign="top">467
<br></td></tr><tr align="left"><td valign="top">2003-10-07 </td><td valign="top">1.7.8  </td><td valign="top">9444 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3041 (39) </td><td valign="top">1660 (34) </td><td valign="top">90 </td><td valign="top">468
<br></td></tr><tr align="left"><td valign="top">2003-11-09 </td><td valign="top">1.7.9  </td><td valign="top">9444 </td><td valign="top">475 </td><td valign="top">1790 </td><td valign="top">3048 (39) </td><td valign="top">1660 (34) </td><td valign="top">90 </td><td valign="top">468
<br></td></tr><tr align="left"><td valign="top">2003-12-10 </td><td valign="top">1.8    </td><td valign="top">7171 </td><td valign="top">585 </td><td valign="top">7730 </td><td valign="top">3236 (39) </td><td valign="top">1666 (36) </td><td valign="top">104 </td><td valign="top">521
<br></td></tr><tr align="left"><td valign="top">2004-01-11 </td><td valign="top">1.8.1  </td><td valign="top">7217 </td><td valign="top">663 </td><td valign="top">7726 </td><td valign="top">3287 (39) </td><td valign="top">1686 (36) </td><td valign="top">104 </td><td valign="top">525
<br></td></tr><tr align="left"><td valign="top">2004-01-12 </td><td valign="top">1.8.2  </td><td valign="top">7217 </td><td valign="top">663 </td><td valign="top">7726 </td><td valign="top">3288 (39) </td><td valign="top">1686 (36) </td><td valign="top">104 </td><td valign="top">526
<br></td></tr><tr align="left"><td valign="top">2004-03-07 </td><td valign="top">1.8.3  </td><td valign="top">7214 </td><td valign="top">686 </td><td valign="top">7735 </td><td valign="top">3303 (39) </td><td valign="top">1695 (36) </td><td valign="top">111 </td><td valign="top">530
<br></td></tr><tr align="left"><td valign="top">2004-04-25 </td><td valign="top">1.8.4  </td><td valign="top">7214 </td><td valign="top">686 </td><td valign="top">7736 </td><td valign="top">3310 (39) </td><td valign="top">1701 (36) </td><td valign="top">112 </td><td valign="top">531
<br></td></tr><tr align="left"><td valign="top">2004-05-16 </td><td valign="top">1.8.5  </td><td valign="top">7240 </td><td valign="top">686 </td><td valign="top">7736 </td><td valign="top">3299 (39) </td><td valign="top">1701 (36) </td><td valign="top">112 </td><td valign="top">533
<br></td></tr><tr align="left"><td valign="top">2004-07-28 </td><td valign="top">1.9    </td><td valign="top">7508 </td><td valign="top">715 </td><td valign="top">7794 </td><td valign="top">3352 (40) </td><td valign="top">1812 (37) </td><td valign="top">115 </td><td valign="top">551
<br></td></tr><tr align="left"><td valign="top">2004-08-11 </td><td valign="top">1.9.1  </td><td valign="top">7512 </td><td valign="top">715 </td><td valign="top">7794 </td><td valign="top">3354 (40) </td><td valign="top">1812 (37) </td><td valign="top">115 </td><td valign="top">552
<br></td></tr><tr align="left"><td valign="top">2004-09-19 </td><td valign="top">1.9.2  </td><td valign="top">7512 </td><td valign="top">715 </td><td valign="top">7794 </td><td valign="top">3354 (40) </td><td valign="top">1812 (37) </td><td valign="top">132 </td><td valign="top">554
   <br></td></tr></tbody></table>

<!-- ========================================================== Appendices -->
</p><div class="node">
<p></p><hr>
<a name="Copying-This-Manual"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Indices">Indices</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#History">History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="appendix">Appendix A Copying This Manual</h2>

<ul class="menu">
<li><a accesskey="1" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual
</li></ul>

<div class="node">
<p></p><hr>
<a name="GNU-Free-Documentation-License"></a>Up:&nbsp;<a rel="up" accesskey="u" href="#Copying-This-Manual">Copying This Manual</a>
<br>
</div>

<h3 class="appendixsec">A.1 GNU Free Documentation License</h3>

<p><a name="index-FDL_002c-GNU-Free-Documentation-License-876"></a></p><div align="center">Version 1.2, November 2002</div>

<pre class="display">     Copyright © 2000,2001,2002 Free Software Foundation, Inc.
     59 Temple Place, Suite 330, Boston, MA  02111-1307, USA

     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol start="0" type="1">
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     </p><p>This License is a kind of &#8220;copyleft&#8221;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     </p><p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     </p></li><li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &#8220;Document&#8221;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &#8220;you&#8221;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     </p><p>A &#8220;Modified Version&#8221; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     </p><p>A &#8220;Secondary Section&#8221; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     </p><p>The &#8220;Invariant Sections&#8221; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     </p><p>The &#8220;Cover Texts&#8221; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     </p><p>A &#8220;Transparent&#8221; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &#8220;Transparent&#8221; is called &#8220;Opaque&#8221;.

     </p><p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     </p><p>The &#8220;Title Page&#8221; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &#8220;Title Page&#8221; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     </p><p>A section &#8220;Entitled XYZ&#8221; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &#8220;Acknowledgements&#8221;,
&#8220;Dedications&#8221;, &#8220;Endorsements&#8221;, or &#8220;History&#8221;.)  To &#8220;Preserve the Title&#8221;
of such a section when you modify the Document means that it remains a
section &#8220;Entitled XYZ&#8221; according to this definition.

     </p><p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     </p></li><li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     </p><p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     </p></li><li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     </p><p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     </p><p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     </p><p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     </p></li><li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          </p><ol start="1" type="A">
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          </li><li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          </li><li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          </li><li>Preserve all the copyright notices of the Document.

          </li><li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          </li><li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          </li><li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          </li><li>Include an unaltered copy of this License.

          </li><li>Preserve the section Entitled &#8220;History&#8221;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &#8220;History&#8221; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          </li><li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &#8220;History&#8221; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          </li><li>For any section Entitled &#8220;Acknowledgements&#8221; or &#8220;Dedications&#8221;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          </li><li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          </li><li>Delete any section Entitled &#8220;Endorsements&#8221;.  Such a section
may not be included in the Modified Version.

          </li><li>Do not retitle any existing section to be Entitled &#8220;Endorsements&#8221; or
to conflict in title with any Invariant Section.

          </li><li>Preserve any Warranty Disclaimers.
          </li></ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.

     </p><p>You may add a section Entitled &#8220;Endorsements&#8221;, provided it contains
nothing but endorsements of your Modified Version by various
parties&#8212;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     </p><p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     </p><p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     </p></li><li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     </p><p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     </p><p>In the combination, you must combine any sections Entitled &#8220;History&#8221;
in the various original documents, forming one section Entitled
&#8220;History&#8221;; likewise combine any sections Entitled &#8220;Acknowledgements&#8221;,
and any sections Entitled &#8220;Dedications&#8221;.  You must delete all
sections Entitled &#8220;Endorsements.&#8221;

     </p></li><li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     </p><p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     </p></li><li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &#8220;aggregate&#8221; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     </p><p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     </p></li><li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warrany Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     </p><p>If a section in the Document is Entitled &#8220;Acknowledgements&#8221;,
&#8220;Dedications&#8221;, or &#8220;History&#8221;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     </p></li><li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.

     </p></li><li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     </p><p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &#8220;or any later version&#8221; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
        </p></li></ol>

<h4 class="appendixsubsec">A.1.1 ADDENDUM: How to use this License for your documents</h4>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

</p><pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.2
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
       A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &#8220;with...Texts.&#8221; line with this:

</p><pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   </p><p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
</p><div class="node">
<p></p><hr>
<a name="Indices"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying-This-Manual">Copying This Manual</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="appendix">Appendix B Indices</h2>

<ul class="menu">
<li><a accesskey="1" href="#Macro-Index">Macro Index</a>:                  Index of Autoconf macros
</li><li><a accesskey="2" href="#Variable-Index">Variable Index</a>:               Index of Makefile variables
</li><li><a accesskey="3" href="#General-Index">General Index</a>:                General index
</li></ul>

<div class="node">
<p></p><hr>
<a name="Macro-Index"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>
<br>
</div>

<h3 class="appendixsec">B.1 Macro Index</h3>

<ul class="index-fn" compact="compact">
<li><a href="#index-_005fAM_005fDEPENDENCIES-223"><code>_AM_DEPENDENCIES</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AC_005fCANONICAL_005fBUILD-143"><code>AC_CANONICAL_BUILD</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCANONICAL_005fHOST-144"><code>AC_CANONICAL_HOST</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCANONICAL_005fTARGET-145"><code>AC_CANONICAL_TARGET</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fAUX_005fDIR-265"><code>AC_CONFIG_AUX_DIR</code></a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-AC_005fCONFIG_005fAUX_005fDIR-142"><code>AC_CONFIG_AUX_DIR</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fFILES-136"><code>AC_CONFIG_FILES</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AC_005fCONFIG_005fHEADERS-140"><code>AC_CONFIG_HEADERS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fLIBOBJ_005fDIR-385"><code>AC_CONFIG_LIBOBJ_DIR</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fCONFIG_005fLINKS-141"><code>AC_CONFIG_LINKS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fSUBDIRS-264"><code>AC_CONFIG_SUBDIRS</code></a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-AC_005fDEFUN-233"><code>AC_DEFUN</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-AC_005fF77_005fLIBRARY_005fLDFLAGS-156"><code>AC_F77_LIBRARY_LDFLAGS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fINIT-192"><code>AC_INIT</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AC_005fLIBOBJ-383"><code>AC_LIBOBJ</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fLIBOBJ-336"><code>AC_LIBOBJ</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-AC_005fLIBOBJ-151"><code>AC_LIBOBJ</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fLIBSOURCE-384"><code>AC_LIBSOURCE</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fLIBSOURCE-149"><code>AC_LIBSOURCE</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fLIBSOURCES-150"><code>AC_LIBSOURCES</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fOUTPUT-137"><code>AC_OUTPUT</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AC_005fPREREQ-234"><code>AC_PREREQ</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-AC_005fPROG_005fCC_005fC_005fO-203"><code>AC_PROG_CC_C_O</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AC_005fPROG_005fCXX-154"><code>AC_PROG_CXX</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fF77-155"><code>AC_PROG_F77</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fFC-157"><code>AC_PROG_FC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fLEX-205"><code>AC_PROG_LEX</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AC_005fPROG_005fLEX-161"><code>AC_PROG_LEX</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fLIBTOOL-158"><code>AC_PROG_LIBTOOL</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fRANLIB-153"><code>AC_PROG_RANLIB</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fYACC-159"><code>AC_PROG_YACC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fSUBST-162"><code>AC_SUBST</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fC_005fPROTOTYPES-454"><code>AM_C_PROTOTYPES</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-AM_005fC_005fPROTOTYPES-186"><code>AM_C_PROTOTYPES</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fC_005fPROTOTYPES-163"><code>AM_C_PROTOTYPES</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fCONDITIONAL-756"><code>AM_CONDITIONAL</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-AM_005fCONFIG_005fHEADER-184"><code>AM_CONFIG_HEADER</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fDEP_005fTRACK-225"><code>AM_DEP_TRACK</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fENABLE_005fMULTILIB-185"><code>AM_ENABLE_MULTILIB</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fGNU_005fGETTEXT-164"><code>AM_GNU_GETTEXT</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fHEADER_005fTIOCGWINSZ_005fNEEDS_005fSYS_005fIOCTL-189"><code>AM_HEADER_TIOCGWINSZ_NEEDS_SYS_IOCTL</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fINIT_005fAUTOMAKE-190"><code>AM_INIT_AUTOMAKE</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fINIT_005fAUTOMAKE-135"><code>AM_INIT_AUTOMAKE</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE-836"><code>AM_MAINTAINER_MODE</code></a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE-660"><code>AM_MAINTAINER_MODE</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE-165"><code>AM_MAINTAINER_MODE</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fMAKE_005fINCLUDE-227"><code>AM_MAKE_INCLUDE</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS-226"><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fPATH_005fLISPDIR-196"><code>AM_PATH_LISPDIR</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fPROG_005fAS-199"><code>AM_PROG_AS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fPROG_005fCC_005fC_005fO-202"><code>AM_PROG_CC_C_O</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fPROG_005fGCJ-208"><code>AM_PROG_GCJ</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fPROG_005fINSTALL_005fSTRIP-228"><code>AM_PROG_INSTALL_STRIP</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fPROG_005fLEX-204"><code>AM_PROG_LEX</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fSANITY_005fCHECK-229"><code>AM_SANITY_CHECK</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fSET_005fDEPDIR-224"><code>AM_SET_DEPDIR</code></a>: <a href="#Private-macros">Private macros</a></li>
<li><a href="#index-AM_005fSYS_005fPOSIX_005fTERMIOS-211"><code>AM_SYS_POSIX_TERMIOS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fWITH_005fDMALLOC-214"><code>AM_WITH_DMALLOC</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AM_005fWITH_005fREGEX-218"><code>AM_WITH_REGEX</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-m4_005finclude-616"><code>m4_include</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-m4_005finclude-167"><code>m4_include</code></a>: <a href="#Optional">Optional</a></li>
   </ul><div class="node">
<p></p><hr>
<a name="Variable-Index"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#General-Index">General Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macro-Index">Macro Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>
<br>
</div>

<h3 class="appendixsec">B.2 Variable Index</h3>



<ul class="index-vr" compact="compact">
<li><a href="#index-_005fDATA-496"><code>_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-_005fHEADERS-485"><code>_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-_005fLIBRARIES-298"><code>_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-_005fLISP-508"><code>_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-_005fLTLIBRARIES-316"><code>_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-_005fMANS-579"><code>_MANS</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-_005fPROGRAMS-267"><code>_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-_005fPROGRAMS-42"><code>_PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_005fPYTHON-529"><code>_PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-_005fSCRIPTS-472"><code>_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-_005fSOURCES-365"><code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-_005fSOURCES-277"><code>_SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-_005fTEXINFOS-546"><code>_TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-ACLOCAL_005fAMFLAGS-661"><code>ACLOCAL_AMFLAGS</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-ACLOCAL_005fAMFLAGS-235"><code>ACLOCAL_AMFLAGS</code></a>: <a href="#Local-Macros">Local Macros</a></li>
<li><a href="#index-ALLOCA-382"><code>ALLOCA</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-ALLOCA-335"><code>ALLOCA</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-AM_005fCCASFLAGS-416"><code>AM_CCASFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-AM_005fCFLAGS-394"><code>AM_CFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-AM_005fCPPFLAGS-392"><code>AM_CPPFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-AM_005fCXXFLAGS-411"><code>AM_CXXFLAGS</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-AM_005fETAGSFLAGS-745"><code>AM_ETAGSFLAGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-AM_005fFCFLAGS-444"><code>AM_FCFLAGS</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-AM_005fFFLAGS-421"><code>AM_FFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-AM_005fGCJFLAGS-450"><code>AM_GCJFLAGS</code></a>: <a href="#Java-Support">Java Support</a></li>
<li><a href="#index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT-724"><code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-AM_005fJAVACFLAGS-523"><code>AM_JAVACFLAGS</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-AM_005fLDFLAGS-396"><code>AM_LDFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-AM_005fLDFLAGS-283"><code>AM_LDFLAGS</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-AM_005fLFLAGS-401"><code>AM_LFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-AM_005fMAKEFLAGS-240"><code>AM_MAKEFLAGS</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-AM_005fMAKEINFOFLAGS-570"><code>AM_MAKEINFOFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-AM_005fMAKEINFOHTMLFLAGS-571"><code>AM_MAKEINFOHTMLFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-AM_005fRFLAGS-423"><code>AM_RFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-AM_005fRUNTESTFLAGS-657"><code>AM_RUNTESTFLAGS</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-AM_005fYFLAGS-399"><code>AM_YFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-ANSI2KNR-187"><code>ANSI2KNR</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-AUTOCONF-101"><code>AUTOCONF</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-AUTOM4TE-170"><code>AUTOM4TE</code></a>: <a href="#Invoking-aclocal">Invoking aclocal</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-666"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-462"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-452"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-191"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-bin_005fPROGRAMS-268"><code>bin_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-bin_005fSCRIPTS-476"><code>bin_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-build_005ftriplet-146"><code>build_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-BUILT_005fSOURCES-503"><code>BUILT_SOURCES</code></a>: <a href="#Sources">Sources</a></li>
<li><a href="#index-CC-386"><code>CC</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-CCAS-414"><code>CCAS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-CCAS-201"><code>CCAS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-CCASFLAGS-415"><code>CCASFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-CCASFLAGS-200"><code>CCASFLAGS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-CFLAGS-387"><code>CFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-check_005f-61"><code>check_</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-check_005fLTLIBRARIES-322"><code>check_LTLIBRARIES</code></a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-check_005fPROGRAMS-370"><code>check_PROGRAMS</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-check_005fPROGRAMS-273"><code>check_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-check_005fSCRIPTS-481"><code>check_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-CLASSPATH_005fENV-525"><code>CLASSPATH_ENV</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-CLEANFILES-602"><code>CLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-COMPILE-395"><code>COMPILE</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-CONFIG_005fSTATUS_005fDEPENDENCIES-662"><code>CONFIG_STATUS_DEPENDENCIES</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-CONFIGURE_005fDEPENDENCIES-663"><code>CONFIGURE_DEPENDENCIES</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-CPPFLAGS-388"><code>CPPFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-CXX-409"><code>CXX</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXCOMPILE-412"><code>CXXCOMPILE</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXFLAGS-410"><code>CXXFLAGS</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXLINK-413"><code>CXXLINK</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-DATA-497"><code>DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-DATA-68"><code>DATA</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-data_005fDATA-498"><code>data_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-DEFS-389"><code>DEFS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-DEJATOOL-653"><code>DEJATOOL</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-DESTDIR-596"><code>DESTDIR</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-dist_005f-621"><code>dist_</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_005f-260"><code>dist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-dist_005flisp_005fLISP-511"><code>dist_lisp_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-dist_005fnoinst_005fLISP-512"><code>dist_noinst_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-DIST_005fSUBDIRS-620"><code>DIST_SUBDIRS</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-DIST_005fSUBDIRS-248"><code>DIST_SUBDIRS</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-DISTCHECK_005fCONFIGURE_005fFLAGS-632"><code>DISTCHECK_CONFIGURE_FLAGS</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-distcleancheck_005flistfiles-843"><code>distcleancheck_listfiles</code></a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-distcleancheck_005flistfiles-628"><code>distcleancheck_listfiles</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-DISTCLEANFILES-635"><code>DISTCLEANFILES</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-DISTCLEANFILES-603"><code>DISTCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-distdir-822"><code>distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-distdir-624"><code>distdir</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-distuninstallcheck_005flistfiles-630"><code>distuninstallcheck_listfiles</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-DVIPS-574"><code>DVIPS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-EMACS-197"><code>EMACS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-ETAGS_005fARGS-743"><code>ETAGS_ARGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-ETAGSFLAGS-744"><code>ETAGSFLAGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-EXPECT-654"><code>EXPECT</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-EXTRA_005fDIST-618"><code>EXTRA_DIST</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-EXTRA_005fmaude_005fSOURCES-346"><code>EXTRA_maude_SOURCES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-EXTRA_005fPROGRAMS-293"><code>EXTRA_PROGRAMS</code></a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-F77-419"><code>F77</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-F77COMPILE-424"><code>F77COMPILE</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-FC-442"><code>FC</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCCOMPILE-445"><code>FCCOMPILE</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCFLAGS-443"><code>FCFLAGS</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCLINK-446"><code>FCLINK</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FFLAGS-420"><code>FFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-FLIBS-435"><code>FLIBS</code></a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-FLINK-425"><code>FLINK</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-GCJ-209"><code>GCJ</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-GCJFLAGS-449"><code>GCJFLAGS</code></a>: <a href="#Java-Support">Java Support</a></li>
<li><a href="#index-GCJFLAGS-210"><code>GCJFLAGS</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-GTAGS_005fARGS-748"><code>GTAGS_ARGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-GZIP_005fENV-613"><code>GZIP_ENV</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-HEADERS-69"><code>HEADERS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-host_005ftriplet-147"><code>host_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-include_005fHEADERS-489"><code>include_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-INCLUDES-393"><code>INCLUDES</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-INCLUDES-94"><code>INCLUDES</code></a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-info_005fTEXINFOS-547"><code>info_TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-JAVA-66"><code>JAVA</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-JAVAC-521"><code>JAVAC</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-JAVACFLAGS-522"><code>JAVACFLAGS</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-JAVAROOT-524"><code>JAVAROOT</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-LDADD-282"><code>LDADD</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-LDFLAGS-390"><code>LDFLAGS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-LFLAGS-400"><code>LFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-lib_005fLIBRARIES-299"><code>lib_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-lib_005fLTLIBRARIES-314"><code>lib_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-libexec_005fPROGRAMS-270"><code>libexec_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-libexec_005fSCRIPTS-478"><code>libexec_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-LIBOBJS-380"><code>LIBOBJS</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LIBOBJS-333"><code>LIBOBJS</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-LIBOBJS-152"><code>LIBOBJS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-LIBRARIES-63"><code>LIBRARIES</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-LIBS-391"><code>LIBS</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-LINK-397"><code>LINK</code></a>: <a href="#Program-variables">Program variables</a></li>
<li><a href="#index-LISP-64"><code>LISP</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-lisp_005fLISP-509"><code>lisp_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-lispdir-198"><code>lispdir</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-localstate_005fDATA-501"><code>localstate_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-LTALLOCA-381"><code>LTALLOCA</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LTALLOCA-334"><code>LTALLOCA</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-LTLIBOBJS-379"><code>LTLIBOBJS</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LTLIBOBJS-332"><code>LTLIBOBJS</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-MAINTAINERCLEANFILES-604"><code>MAINTAINERCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-MAKE-239"><code>MAKE</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-MAKEINFO-567"><code>MAKEINFO</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-MAKEINFOFLAGS-569"><code>MAKEINFOFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-MAKEINFOHTML-568"><code>MAKEINFOHTML</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-man_005fMANS-580"><code>man_MANS</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-MANS-70"><code>MANS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-maude_005fAR-347"><code>maude_AR</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCCASFLAGS-353"><code>maude_CCASFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCFLAGS-354"><code>maude_CFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCPPFLAGS-355"><code>maude_CPPFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCXXFLAGS-356"><code>maude_CXXFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fDEPENDENCIES-351"><code>maude_DEPENDENCIES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fDEPENDENCIES-289"><code>maude_DEPENDENCIES</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fFFLAGS-357"><code>maude_FFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fGCJFLAGS-358"><code>maude_GCJFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDADD-349"><code>maude_LDADD</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDADD-285"><code>maude_LDADD</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fLDFLAGS-350"><code>maude_LDFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDFLAGS-287"><code>maude_LDFLAGS</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fLFLAGS-359"><code>maude_LFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLIBADD-348"><code>maude_LIBADD</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLIBADD-302"><code>maude_LIBADD</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-maude_005fLINK-352"><code>maude_LINK</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fOBJCFLAGS-360"><code>maude_OBJCFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fRFLAGS-361"><code>maude_RFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fSHORTNAME-364"><code>maude_SHORTNAME</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fSOURCES-343"><code>maude_SOURCES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fYFLAGS-362"><code>maude_YFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-MOSTLYCLEANFILES-601"><code>MOSTLYCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-nobase_005f-253"><code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-nodist_005f-622"><code>nodist_</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-nodist_005f-261"><code>nodist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-noinst_005f-59"><code>noinst_</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-noinst_005fHEADERS-486"><code>noinst_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-noinst_005fLIBRARIES-301"><code>noinst_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-noinst_005fLISP-510"><code>noinst_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-noinst_005fLTLIBRARIES-321"><code>noinst_LTLIBRARIES</code></a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-noinst_005fPROGRAMS-272"><code>noinst_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-noinst_005fSCRIPTS-480"><code>noinst_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-oldinclude_005fHEADERS-490"><code>oldinclude_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-PACKAGE-610"><code>PACKAGE</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-pkgdata_005fDATA-502"><code>pkgdata_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-pkgdata_005fSCRIPTS-479"><code>pkgdata_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-pkgdatadir-49"><code>pkgdatadir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkginclude_005fHEADERS-491"><code>pkginclude_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-pkgincludedir-48"><code>pkgincludedir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkglib_005fLIBRARIES-300"><code>pkglib_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-pkglib_005fLTLIBRARIES-315"><code>pkglib_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-pkglib_005fPROGRAMS-271"><code>pkglib_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-pkglibdir-47"><code>pkglibdir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkgpyexecdir-538"><code>pkgpyexecdir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-pkgpythondir-536"><code>pkgpythondir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PROGRAMS-43"><code>PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pyexecdir-537"><code>pyexecdir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON-530"><code>PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON-65"><code>PYTHON</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-PYTHON_005fEXEC_005fPREFIX-533"><code>PYTHON_EXEC_PREFIX</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fPLATFORM-534"><code>PYTHON_PLATFORM</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fPREFIX-532"><code>PYTHON_PREFIX</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fVERSION-531"><code>PYTHON_VERSION</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-pythondir-535"><code>pythondir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-RFLAGS-422"><code>RFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-RUNTEST-655"><code>RUNTEST</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-RUNTESTDEFAULTFLAGS-651"><code>RUNTESTDEFAULTFLAGS</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-RUNTESTFLAGS-656"><code>RUNTESTFLAGS</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-sbin_005fPROGRAMS-269"><code>sbin_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-sbin_005fSCRIPTS-477"><code>sbin_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-SCRIPTS-473"><code>SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-SCRIPTS-67"><code>SCRIPTS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-sharedstate_005fDATA-500"><code>sharedstate_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-SOURCES-366"><code>SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-SOURCES-279"><code>SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-SUBDIRS-619"><code>SUBDIRS</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-SUBDIRS-238"><code>SUBDIRS</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-SUFFIXES-751"><code>SUFFIXES</code></a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-sysconf_005fDATA-499"><code>sysconf_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-TAGS_005fDEPENDENCIES-746"><code>TAGS_DEPENDENCIES</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-target_005ftriplet-148"><code>target_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-TESTS-646"><code>TESTS</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-TESTS_005fENVIRONMENT-647"><code>TESTS_ENVIRONMENT</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-TEXI2DVI-572"><code>TEXI2DVI</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXI2PDF-573"><code>TEXI2PDF</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFO_005fTEX-575"><code>TEXINFO_TEX</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFOS-557"><code>TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFOS-71"><code>TEXINFOS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-top_005fdistdir-823"><code>top_distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-top_005fdistdir-625"><code>top_distdir</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-U-188"><code>U</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-VERSION-611"><code>VERSION</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-WARNINGS-130"><code>WARNINGS</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-WITH_005fDMALLOC-216"><code>WITH_DMALLOC</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-WITH_005fREGEX-219"><code>WITH_REGEX</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-XFAIL_005fTESTS-650"><code>XFAIL_TESTS</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-YACC-160"><code>YACC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-YFLAGS-398"><code>YFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
   </ul><div class="node">
<p></p><hr>
<a name="General-Index"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>
<br>
</div>

<h3 class="appendixsec">B.3 General Index</h3>



<ul class="index-cp" compact="compact">
<li><a href="#index-_0040code_007b_0023_0023_007d-_0028special-Automake-comment_0029-24"><code>##</code> (special Automake comment)</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_002b_003d-14"><code>+=</code></a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_002d_002dacdir-173"><code>--acdir</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dadd_002dmissing-109"><code>--add-missing</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dcopy-112"><code>--copy</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dcygnus-113"><code>--cygnus</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002d_002denable_002ddebug_007d_002c-example-758"><code>--enable-debug</code>, example</a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-_002d_002denable_002dmaintainer_002dmode-166"><code>--enable-maintainer-mode</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-_002d_002dforce-176"><code>--force</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dforce_002dmissing-115"><code>--force-missing</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dforeign-116"><code>--foreign</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dgnits-117"><code>--gnits</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002d_002dgnits_007d_002c-complete-description-766"><code>--gnits</code>, complete description</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-_002d_002dgnu-118"><code>--gnu</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002d_002dgnu_007d_002c-complete-description-765"><code>--gnu</code>, complete description</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-_0040code_007b_002d_002dgnu_007d_002c-required-files-764"><code>--gnu</code>, required files</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-_002d_002dhelp-174"><code>--help</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dhelp-119"><code>--help</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002d_002dhelp_007d-check-721"><code>--help</code> check</a>: <a href="#Options">Options</a></li>
<li><a href="#index-_002d_002dinclude_002ddeps-121"><code>--include-deps</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dlibdir-110"><code>--libdir</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dno_002dforce-122"><code>--no-force</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002doutput-177"><code>--output</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002doutput_002ddir-124"><code>--output-dir</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dprint_002dac_002ddir-178"><code>--print-ac-dir</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dverbose-179"><code>--verbose</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dverbose-126"><code>--verbose</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dversion-180"><code>--version</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002d_002dversion-127"><code>--version</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002d_002dversion_007d-check-722"><code>--version</code> check</a>: <a href="#Options">Options</a></li>
<li><a href="#index-_002d_002dwarnings-129"><code>--warnings</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002d_002dwith_002ddmalloc-217"><code>--with-dmalloc</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-_002d_002dwith_002dregex-220"><code>--with-regex</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-_002da-108"><code>-a</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002dc-111"><code>-c</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002df-114"><code>-f</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002dhook_007d-targets-809"><code>-hook</code> targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_002dI-175"><code>-I</code></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_002di-120"><code>-i</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007b_002dlocal_007d-targets-777"><code>-local</code> targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007b_002dmodule_007d_002c-libtool-325"><code>-module</code>, libtool</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-_002do-123"><code>-o</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002dv-125"><code>-v</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_002dW-128"><code>-W</code></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040file_007b_002ela_007d-suffix_002c-defined-307"><span class="file">.la</span> suffix, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-_0040code_007b_005fDATA_007d-primary_002c-defined-493"><code>_DATA</code> primary, defined</a>: <a href="#Data">Data</a></li>
<li><a href="#index-_0040code_007b_005fDEPENDENCIES_007d_002c-defined-288"><code>_DEPENDENCIES</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-_0040code_007b_005fHEADERS_007d-primary_002c-defined-482"><code>_HEADERS</code> primary, defined</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-_0040code_007b_005fJAVA_007d-primary_002c-defined-516"><code>_JAVA</code> primary, defined</a>: <a href="#Java">Java</a></li>
<li><a href="#index-_0040code_007b_005fLDFLAGS_007d_002c-defined-286"><code>_LDFLAGS</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-_0040code_007b_005fLDFLAGS_007d_002c-libtool-327"><code>_LDFLAGS</code>, libtool</a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-_0040code_007b_005fLIBADD_007d_002c-libtool-326"><code>_LIBADD</code>, libtool</a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-_0040code_007b_005fLIBRARIES_007d-primary_002c-defined-295"><code>_LIBRARIES</code> primary, defined</a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-_0040code_007b_005fLISP_007d-primary_002c-defined-505"><code>_LISP</code> primary, defined</a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-_0040code_007b_005fLTLIBRARIES_007d-primary_002c-defined-310"><code>_LTLIBRARIES</code> primary, defined</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-_0040code_007b_005fMANS_007d-primary_002c-defined-576"><code>_MANS</code> primary, defined</a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-_0040code_007b_005fPROGRAMS_007d-primary-variable-38"><code>_PROGRAMS</code> primary variable</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007b_005fPYTHON_007d-primary_002c-defined-526"><code>_PYTHON</code> primary, defined</a>: <a href="#Python">Python</a></li>
<li><a href="#index-_0040code_007b_005fSCRIPTS_007d-primary_002c-defined-469"><code>_SCRIPTS</code> primary, defined</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-_0040code_007b_005fSOURCES_007d-and-header-files-281"><code>_SOURCES</code> and header files</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-_0040code_007b_005fSOURCES_007d-primary_002c-defined-274"><code>_SOURCES</code> primary, defined</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-_0040code_007b_005fSOURCES_007d_002c-default-367"><code>_SOURCES</code>, default</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-_0040code_007b_005fSOURCES_007d_002c-empty-374"><code>_SOURCES</code>, empty</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-_0040code_007b_005fTEXINFOS_007d-primary_002c-defined-539"><code>_TEXINFOS</code> primary, defined</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bAC_005fSUBST_007d-and-_0040code_007bSUBDIRS_007d-250"><code>AC_SUBST</code> and <code>SUBDIRS</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-_0040file_007bacinclude_002em4_007d_002c-defined-81"><span class="file">acinclude.m4</span>, defined</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-_0040command_007baclocal_007d-program_002c-introduction-79"><span class="command">aclocal</span> program, introduction</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-_0040command_007baclocal_007d-search-path-182"><span class="command">aclocal</span> search path</a>: <a href="#Macro-search-path">Macro search path</a></li>
<li><a href="#index-_0040command_007baclocal_007d_0027s-scheduled-death-236"><span class="command">aclocal</span>'s scheduled death</a>: <a href="#Future-of-aclocal">Future of aclocal</a></li>
<li><a href="#index-_0040command_007baclocal_007d_002c-extending-230"><span class="command">aclocal</span>, extending</a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-_0040command_007baclocal_007d_002c-Invoking-169"><span class="command">aclocal</span>, Invoking</a>: <a href="#Invoking-aclocal">Invoking aclocal</a></li>
<li><a href="#index-_0040command_007baclocal_007d_002c-Options-171"><span class="command">aclocal</span>, Options</a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-_0040file_007baclocal_002em4_007d_002c-preexisting-80"><span class="file">aclocal.m4</span>, preexisting</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-Adding-new-_0040code_007bSUFFIXES_007d-749">Adding new <code>SUFFIXES</code></a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-all-779"><code>all</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-all_002dlocal-780"><code>all-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bALLOCA_007d_002c-and-Libtool-331"><code>ALLOCA</code>, and Libtool</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-_0040code_007bALLOCA_007d_002c-example-376"><code>ALLOCA</code>, example</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-_0040code_007bALLOCA_007d_002c-special-handling-378"><code>ALLOCA</code>, special handling</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-_0040code_007bAM_005fCCASFLAGS_007d-and-_0040code_007bCCASFLAGS_007d-848"><code>AM_CCASFLAGS</code> and <code>CCASFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fCFLAGS_007d-and-_0040code_007bCFLAGS_007d-849"><code>AM_CFLAGS</code> and <code>CFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fCONDITIONAL_007d-and-_0040code_007bSUBDIRS_007d-247"><code>AM_CONDITIONAL</code> and <code>SUBDIRS</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-_0040code_007bAM_005fCPPFLAGS_007d-and-_0040code_007bCPPFLAGS_007d-850"><code>AM_CPPFLAGS</code> and <code>CPPFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fCXXFLAGS_007d-and-_0040code_007bCXXFLAGS_007d-851"><code>AM_CXXFLAGS</code> and <code>CXXFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fFCFLAGS_007d-and-_0040code_007bFCFLAGS_007d-852"><code>AM_FCFLAGS</code> and <code>FCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fFFLAGS_007d-and-_0040code_007bFFLAGS_007d-853"><code>AM_FFLAGS</code> and <code>FFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fGCJFLAGS_007d-and-_0040code_007bGCJFLAGS_007d-854"><code>AM_GCJFLAGS</code> and <code>GCJFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fINIT_005fAUTOMAKE_007d_002c-example-use-78"><code>AM_INIT_AUTOMAKE</code>, example use</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-_0040code_007bAM_005fLDFLAGS_007d-and-_0040code_007bLDFLAGS_007d-855"><code>AM_LDFLAGS</code> and <code>LDFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fLFLAGS_007d-and-_0040code_007bLFLAGS_007d-856"><code>AM_LFLAGS</code> and <code>LFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fMAINTAINER_005fMODE_007d_002c-purpose-835"><code>AM_MAINTAINER_MODE</code>, purpose</a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-_0040code_007bAM_005fOBJCFLAGS_007d-and-_0040code_007bOBJCFLAGS_007d-857"><code>AM_OBJCFLAGS</code> and <code>OBJCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fRFLAGS_007d-and-_0040code_007bRFLAGS_007d-858"><code>AM_RFLAGS</code> and <code>RFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bAM_005fYFLAGS_007d-and-_0040code_007bYFLAGS_007d-859"><code>AM_YFLAGS</code> and <code>YFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-ansi2knr-676"><code>ansi2knr</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-ansi2knr-453"><code>ansi2knr</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-_0040code_007bansi2knr_007d-and-_0040code_007bLIBOBJS_007d-458"><code>ansi2knr</code> and <code>LIBOBJS</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-_0040code_007bansi2knr_007d-and-_0040code_007bLTLIBOBJS_007d-457"><code>ansi2knr</code> and <code>LTLIBOBJS</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-Append-operator-13">Append operator</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_0040file_007bautogen_002esh_007d-and-_0040command_007bautoreconf_007d-342"><span class="file">autogen.sh</span> and <span class="command">autoreconf</span></a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-Automake-constraints-3">Automake constraints</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-_0040command_007bautomake_007d-options-102"><span class="command">automake</span> options</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-Automake-requirements-133">Automake requirements</a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-Automake-requirements-4">Automake requirements</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-_0040command_007bautomake_007d_002c-invoking-100"><span class="command">automake</span>, invoking</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-Automake_002c-recursive-operation-22">Automake, recursive operation</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Automatic-dependency-tracking-460">Automatic dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-Automatic-linker-selection-438">Automatic linker selection</a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-_0040command_007bautoreconf_007d-and-_0040command_007blibtoolize_007d-340"><span class="command">autoreconf</span> and <span class="command">libtoolize</span></a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-Auxiliary-programs-76">Auxiliary programs</a>: <a href="#Auxiliary-Programs">Auxiliary Programs</a></li>
<li><a href="#index-Avoiding-path-stripping-256">Avoiding path stripping</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-_0040file_007bbootstrap_002esh_007d-and-_0040command_007bautoreconf_007d-341"><span class="file">bootstrap.sh</span> and <span class="command">autoreconf</span></a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-Bugs_002c-reporting-6">Bugs, reporting</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-_0040code_007bBUILT_005fSOURCES_007d_002c-defined-504"><code>BUILT_SOURCES</code>, defined</a>: <a href="#Sources">Sources</a></li>
<li><a href="#index-C_002b_002b-support-407">C++ support</a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-canonicalizing-Automake-variables-72">canonicalizing Automake variables</a>: <a href="#Canonicalization">Canonicalization</a></li>
<li><a href="#index-_0040code_007bCCASFLAGS_007d-and-_0040code_007bAM_005fCCASFLAGS_007d-860"><code>CCASFLAGS</code> and <code>AM_CCASFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bCFLAGS_007d-and-_0040code_007bAM_005fCFLAGS_007d-861"><code>CFLAGS</code> and <code>AM_CFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-cfortran-432">cfortran</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-check-791"><code>check</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-check-644"><code>check</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-check_002dlocal-792"><code>check-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-check_002dnews-678"><code>check-news</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-_0040code_007bcheck_005f_007d-primary-prefix_002c-definition-60"><code>check_</code> primary prefix, definition</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bcheck_005fPROGRAMS_007d-example-369"><code>check_PROGRAMS</code> example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-clean-801"><code>clean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-clean_002dlocal-802"><code>clean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-clean_002dlocal-606"><code>clean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-Comment_002c-special-to-Automake-26">Comment, special to Automake</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Compile-Flag-Variables-847">Compile Flag Variables</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Complete-example-77">Complete example</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-Conditional-example_002c-_0040code_007b_002d_002denable_002ddebug_007d-760">Conditional example, <code>--enable-debug</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-conditional-libtool-libraries-318">conditional libtool libraries</a>: <a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a></li>
<li><a href="#index-Conditional-programs-291">Conditional programs</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-Conditional-subdirectories-242">Conditional subdirectories</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Conditional-_0040code_007bSUBDIRS_007d-244">Conditional <code>SUBDIRS</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Conditionals-755">Conditionals</a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-_0040file_007bconfig_002eguess_007d-107"><span class="file">config.guess</span></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040file_007bconfigure_002eac_007d_002c-from-GNU-Hello-86"><span class="file">configure.ac</span>, from GNU Hello</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-_0040file_007bconfigure_002eac_007d_002c-scanning-131"><span class="file">configure.ac</span>, scanning</a>: <a href="#configure">configure</a></li>
<li><a href="#index-conflicting-definitions-770">conflicting definitions</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Constraints-of-Automake-2">Constraints of Automake</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-convenience-libraries_002c-libtool-319">convenience libraries, libtool</a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-copying-semantics-769">copying semantics</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040command_007bcpio_007d-example-54"><span class="command">cpio</span> example</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bCPPFLAGS_007d-and-_0040code_007bAM_005fCPPFLAGS_007d-862"><code>CPPFLAGS</code> and <code>AM_CPPFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-CVS-and-generated-files-830">CVS and generated files</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-CVS-and-third_002dparty-files-832">CVS and third-party files</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-CVS-and-timestamps-829">CVS and timestamps</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-cvs_002ddist-11"><code>cvs-dist</code></a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_0040code_007bcvs_002ddist_007d_002c-non_002dstandard-example-10"><code>cvs-dist</code>, non-standard example</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_0040code_007bCXXFLAGS_007d-and-_0040code_007bAM_005fCXXFLAGS_007d-863"><code>CXXFLAGS</code> and <code>AM_CXXFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-cygnus-674"><code>cygnus</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-_0040code_007bcygnus_007d-strictness-768"><code>cygnus</code> strictness</a>: <a href="#Cygnus">Cygnus</a></li>
<li><a href="#index-_0040code_007bDATA_007d-primary_002c-defined-494"><code>DATA</code> primary, defined</a>: <a href="#Data">Data</a></li>
<li><a href="#index-de_002dANSI_002dfication_002c-defined-451">de-ANSI-fication, defined</a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-default-_0040code_007b_005fSOURCES_007d-368">default <code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-default-source_002c-Libtool-modules-example-372">default source, Libtool modules example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-definitions_002c-conflicts-773">definitions, conflicts</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-dejagnu-680"><code>dejagnu</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-dejagnu-652"><code>dejagnu</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-_0040command_007bdepcomp_007d-461"><span class="command">depcomp</span></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-dependencies-and-distributed-files-840">dependencies and distributed files</a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-Dependency-tracking-459">Dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-Dependency-tracking_002c-disabling-465">Dependency tracking, disabling</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-_0040file_007bdirlist_007d-183"><span class="file">dirlist</span></a>: <a href="#Macro-search-path">Macro search path</a></li>
<li><a href="#index-Disabling-dependency-tracking-464">Disabling dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-dist-612"><code>dist</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dbzip2-682"><code>dist-bzip2</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-dist_002dbzip2-637"><code>dist-bzip2</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dgzip-638"><code>dist-gzip</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dhook-814"><code>dist-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-dist_002dhook-623"><code>dist-hook</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dshar-685"><code>dist-shar</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-dist_002dshar-639"><code>dist-shar</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dtarZ-691"><code>dist-tarZ</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-dist_002dtarZ-641"><code>dist-tarZ</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-dist_002dzip-688"><code>dist-zip</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-dist_002dzip-640"><code>dist-zip</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bdist_005f_007d-and-_0040code_007bnobase_005f_007d-258"><code>dist_</code> and <code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-_0040code_007bDIST_005fSUBDIRS_007d_002c-explained-245"><code>DIST_SUBDIRS</code>, explained</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-distcheck-631"><code>distcheck</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-distcheck_002dhook-633"><code>distcheck-hook</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-distclean-841"><code>distclean</code></a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-distclean-803"><code>distclean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bdistclean_007d_002c-diagnostic-838"><code>distclean</code>, diagnostic</a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-distclean_002dlocal-804"><code>distclean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-distclean_002dlocal-607"><code>distclean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-distcleancheck-842"><code>distcleancheck</code></a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-distcleancheck-634"><code>distcleancheck</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-distdir-821"><code>distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-_0040command_007bdmalloc_007d_002c-support-for-215"><span class="command">dmalloc</span>, support for</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-dvi-783"><code>dvi</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-DVI-output-using-Texinfo-545">DVI output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-dvi_002dlocal-784"><code>dvi-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-E_002dmail_002c-bug-reports-8">E-mail, bug reports</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-_0040code_007bEDITION_007d-Texinfo-flag-554"><code>EDITION</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-else-763"><code>else</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-empty-_0040code_007b_005fSOURCES_007d-373">empty <code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-endif-762"><code>endif</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-Example-conditional-_0040code_007b_002d_002denable_002ddebug_007d-759">Example conditional <code>--enable-debug</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-Example-of-recursive-operation-23">Example of recursive operation</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Example-of-shared-libraries-313">Example of shared libraries</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-Example_002c-_0040code_007bEXTRA_005fPROGRAMS_007d-53">Example, <code>EXTRA_PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Example_002c-_0040command_007bfalse_007d-and-_0040command_007btrue_007d-95">Example, <span class="command">false</span> and <span class="command">true</span></a>: <a href="#true">true</a></li>
<li><a href="#index-Example_002c-GNU-Hello-83">Example, GNU Hello</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Example_002c-handling-Texinfo-files-90">Example, handling Texinfo files</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Example_002c-mixed-language-437">Example, mixed language</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Example_002c-regression-test-92">Example, regression test</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Executable-extension-466">Executable extension</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-Exit-status-77_002c-special-interpretation-645">Exit status 77, special interpretation</a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-Expected-test-failure-649">Expected test failure</a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-Extending-_0040command_007baclocal_007d-231">Extending <span class="command">aclocal</span></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-Extending-list-of-installation-directories-55">Extending list of installation directories</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Extension_002c-executable-467">Extension, executable</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-Extra-files-distributed-with-Automake-105">Extra files distributed with Automake</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007bEXTRA_005f_007d_002c-prepending-51"><code>EXTRA_</code>, prepending</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bEXTRA_005fprog_005fSOURCES_007d_002c-defined-290"><code>EXTRA_prog_SOURCES</code>, defined</a>: <a href="#Conditional-Sources">Conditional Sources</a></li>
<li><a href="#index-_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-294"><code>EXTRA_PROGRAMS</code>, defined</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-52"><code>EXTRA_PROGRAMS</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040command_007bfalse_007d-Example-96"><span class="command">false</span> Example</a>: <a href="#true">true</a></li>
<li><a href="#index-_0040code_007bFCFLAGS_007d-and-_0040code_007bAM_005fFCFLAGS_007d-864"><code>FCFLAGS</code> and <code>AM_FCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-FDL_002c-GNU-Free-Documentation-License-876">FDL, GNU Free Documentation License</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-_0040code_007bFFLAGS_007d-and-_0040code_007bAM_005fFFLAGS_007d-865"><code>FFLAGS</code> and <code>AM_FFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-filename_002dlength_002dmax_003d99-694"><code>filename-length-max=99</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Files-distributed-with-Automake-106">Files distributed with Automake</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-First-line-of-Makefile_002eam-28">First line of Makefile.am</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Flag-Variables_002c-Ordering-846">Flag Variables, Ordering</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Flag-variables_002c-ordering-845">Flag variables, ordering</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040code_007bFLIBS_007d_002c-defined-434"><code>FLIBS</code>, defined</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-foreign-673"><code>foreign</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-_0040code_007bforeign_007d-strictness-32"><code>foreign</code> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Fortran-77-support-417">Fortran 77 support</a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-Fortran-77_002c-mixing-with-C-and-C_002b_002b-429">Fortran 77, mixing with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Fortran-77_002c-Preprocessing-427">Fortran 77, Preprocessing</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-Fortran-9x-support-440">Fortran 9x support</a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-_0040code_007bGCJFLAGS_007d-and-_0040code_007bAM_005fGCJFLAGS_007d-866"><code>GCJFLAGS</code> and <code>AM_GCJFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-generated-files-and-CVS-831">generated files and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-generated-files_002c-distributed-826">generated files, distributed</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-Gettext-support-514">Gettext support</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-gnits-671"><code>gnits</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-_0040code_007bgnits_007d-strictness-36"><code>gnits</code> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-gnu-672"><code>gnu</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-GNU-Gettext-support-513">GNU Gettext support</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-GNU-Hello_002c-_0040file_007bconfigure_002eac_007d-87">GNU Hello, <span class="file">configure.ac</span></a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-GNU-Hello_002c-example-85">GNU Hello, example</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-GNU-make-extensions-12">GNU make extensions</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-GNU-Makefile-standards-1">GNU Makefile standards</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-_0040code_007bgnu_007d-strictness-34"><code>gnu</code> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-_0040file_007bGNUmakefile_007d-including-_0040file_007bMakefile_007d-824"><span class="file">GNUmakefile</span> including <span class="file">Makefile</span></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-Header-files-in-_0040code_007b_005fSOURCES_007d-280">Header files in <code>_SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-_0040code_007bHEADERS_007d-primary_002c-defined-483"><code>HEADERS</code> primary, defined</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-_0040code_007bHEADERS_007d_002c-installation-directories-487"><code>HEADERS</code>, installation directories</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Hello-example-84">Hello example</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Hello_002c-_0040file_007bconfigure_002eac_007d-88">Hello, <span class="file">configure.ac</span></a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-hook-targets-810">hook targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-HP_002dUX-10_002c-_0040command_007blex_007d-problems-206">HP-UX 10, <span class="command">lex</span> problems</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-html-789"><code>html</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-HTML-installation_002c-example-57">HTML installation, example</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-HTML-output-using-Texinfo-542">HTML output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-html_002dlocal-790"><code>html-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-id-747"><code>id</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-if-761"><code>if</code></a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-include-752"><code>include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-include-617"><code>include</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007binclude_007d_002c-distribution-615"><code>include</code>, distribution</a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bINCLUDES_007d_002c-example-usage-93"><code>INCLUDES</code>, example usage</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Including-_0040file_007bMakefile_007d-fragment-753">Including <span class="file">Makefile</span> fragment</a>: <a href="#Include">Include</a></li>
<li><a href="#index-info-781"><code>info</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-info-708"><code>info</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-info_002dlocal-782"><code>info-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install-793"><code>install</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install-591"><code>install</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-Install-hook-595">Install hook</a>: <a href="#Install">Install</a></li>
<li><a href="#index-Install_002c-two-parts-of-592">Install, two parts of</a>: <a href="#Install">Install</a></li>
<li><a href="#index-install_002ddata-589"><code>install-data</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-install_002ddata_002dhook-811"><code>install-data-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddata_002dlocal-794"><code>install-data-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddata_002dlocal-594"><code>install-data-local</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-install_002dexec-795"><code>install-exec</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec-590"><code>install-exec</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-install_002dexec_002dhook-812"><code>install-exec-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec_002dlocal-796"><code>install-exec-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec_002dlocal-593"><code>install-exec-local</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-install_002dinfo-709"><code>install-info</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-install_002dinfo-566"><code>install-info</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007binstall_002dinfo_007d-target-563"><code>install-info</code> target</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002dman-712"><code>install-man</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-install_002dman-586"><code>install-man</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-_0040code_007binstall_002dman_007d-target-583"><code>install-man</code> target</a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-install_002dstrip-599"><code>install-strip</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-Installation-directories_002c-extending-list-56">Installation directories, extending list</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Installation-support-587">Installation support</a>: <a href="#Install">Install</a></li>
<li><a href="#index-installcheck-807"><code>installcheck</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installcheck_002dlocal-808"><code>installcheck-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installdirs-805"><code>installdirs</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installdirs-598"><code>installdirs</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-installdirs_002dlocal-806"><code>installdirs-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Installing-headers-488">Installing headers</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Installing-scripts-475">Installing scripts</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-installing-versioned-binaries-816">installing versioned binaries</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Interfacing-with-third_002dparty-packages-819">Interfacing with third-party packages</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-Invoking-_0040command_007baclocal_007d-168">Invoking <span class="command">aclocal</span></a>: <a href="#Invoking-aclocal">Invoking aclocal</a></li>
<li><a href="#index-Invoking-_0040command_007bautomake_007d-99">Invoking <span class="command">automake</span></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-_0040code_007bJAVA_007d-primary_002c-defined-517"><code>JAVA</code> primary, defined</a>: <a href="#Java">Java</a></li>
<li><a href="#index-_0040code_007bJAVA_007d-restrictions-519"><code>JAVA</code> restrictions</a>: <a href="#Java">Java</a></li>
<li><a href="#index-Java-support-447">Java support</a>: <a href="#Java-Support">Java Support</a></li>
<li><a href="#index-_0040code_007bLDFLAGS_007d-and-_0040code_007bAM_005fLDFLAGS_007d-867"><code>LDFLAGS</code> and <code>AM_LDFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040command_007blex_007d-problems-with-HP_002dUX-10-207"><span class="command">lex</span> problems with HP-UX 10</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-_0040command_007blex_007d_002c-multiple-lexers-406"><span class="command">lex</span>, multiple lexers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-_0040code_007bLFLAGS_007d-and-_0040code_007bAM_005fLFLAGS_007d-868"><code>LFLAGS</code> and <code>AM_LFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040file_007blibltdl_007d_002c-introduction-309"><span class="file">libltdl</span>, introduction</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-_0040code_007bLIBOBJS_007d-and-_0040code_007bansi2knr_007d-456"><code>LIBOBJS</code> and <code>ansi2knr</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-_0040code_007bLIBOBJS_007d_002c-and-Libtool-329"><code>LIBOBJS</code>, and Libtool</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-_0040code_007bLIBOBJS_007d_002c-example-375"><code>LIBOBJS</code>, example</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-_0040code_007bLIBOBJS_007d_002c-special-handling-377"><code>LIBOBJS</code>, special handling</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-_0040code_007bLIBRARIES_007d-primary_002c-defined-296"><code>LIBRARIES</code> primary, defined</a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-libtool-convenience-libraries-320">libtool convenience libraries</a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-libtool-libraries_002c-conditional-317">libtool libraries, conditional</a>: <a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a></li>
<li><a href="#index-libtool-library_002c-definition-305">libtool library, definition</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-libtool-modules-324">libtool modules</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-Libtool-modules_002c-default-source-example-371">Libtool modules, default source example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-_0040command_007blibtool_007d_002c-introduction-304"><span class="command">libtool</span>, introduction</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-_0040command_007blibtoolize_007d-and-_0040command_007bautoreconf_007d-339"><span class="command">libtoolize</span> and <span class="command">autoreconf</span></a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-_0040command_007blibtoolize_007d_002c-no-longer-run-by-_0040command_007bautomake_007d-338"><span class="command">libtoolize</span>, no longer run by <span class="command">automake</span></a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-Linking-Fortran-77-with-C-and-C_002b_002b-431">Linking Fortran 77 with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-_0040code_007bLISP_007d-primary_002c-defined-506"><code>LISP</code> primary, defined</a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-_0040code_007bLN_005fS_007d-example-817"><code>LN_S</code> example</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-local-targets-778">local targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bLTALLOCA_007d_002c-special-handling-330"><code>LTALLOCA</code>, special handling</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-_0040code_007bLTLIBOBJS_007d-and-_0040code_007bansi2knr_007d-455"><code>LTLIBOBJS</code> and <code>ansi2knr</code></a>: <a href="#ANSI">ANSI</a></li>
<li><a href="#index-_0040code_007bLTLIBOBJS_007d_002c-special-handling-328"><code>LTLIBOBJS</code>, special handling</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-_0040code_007bLTLIBRARIES_007d-primary_002c-defined-311"><code>LTLIBRARIES</code> primary, defined</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-_0040file_007bltmain_002esh_007d-not-found-337"><span class="file">ltmain.sh</span> not found</a>: <a href="#Libtool-Issues">Libtool Issues</a></li>
<li><a href="#index-_0040code_007bm4_005finclude_007d_002c-distribution-614"><code>m4_include</code>, distribution</a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-Macro-search-path-181">Macro search path</a>: <a href="#Macro-search-path">Macro search path</a></li>
<li><a href="#index-Macros-Automake-recognizes-138">Macros Automake recognizes</a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-maintainer_002dclean_002dlocal-608"><code>maintainer-clean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-_0040code_007bmake-check_007d-643"><code>make check</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-_0040code_007bmake-clean_007d-support-600"><code>make clean</code> support</a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-_0040code_007bmake-dist_007d-609"><code>make dist</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bmake-distcheck_007d-626"><code>make distcheck</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bmake-distclean_007d_002c-diagnostic-839"><code>make distclean</code>, diagnostic</a>: <a href="#distcleancheck">distcleancheck</a></li>
<li><a href="#index-_0040code_007bmake-distcleancheck_007d-627"><code>make distcleancheck</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bmake-distuninstallcheck_007d-629"><code>make distuninstallcheck</code></a>: <a href="#Dist">Dist</a></li>
<li><a href="#index-_0040code_007bmake-install_007d-support-588"><code>make install</code> support</a>: <a href="#Install">Install</a></li>
<li><a href="#index-_0040code_007bmake-installcheck_007d_002c-testing-_0040code_007b_002d_002dhelp_007d-and-_0040code_007b_002d_002dversion_007d-720"><code>make installcheck</code>, testing <code>--help</code> and <code>--version</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Make-rules_002c-overriding-16">Make rules, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Make-targets_002c-overriding-15">Make targets, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_0040file_007bMakefile_007d-fragment_002c-including-754"><span class="file">Makefile</span> fragment, including</a>: <a href="#Include">Include</a></li>
<li><a href="#index-Makefile_002eam_002c-first-line-27">Makefile.am, first line</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-_0040code_007bMANS_007d-primary_002c-defined-577"><code>MANS</code> primary, defined</a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-many-outputs_002c-rules-with-874">many outputs, rules with</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-_0040file_007bmdate_002dsh_007d-556"><span class="file">mdate-sh</span></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040command_007bmissing_007d_002c-purpose-834"><span class="command">missing</span>, purpose</a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-Mixed-language-example-436">Mixed language example</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Mixing-Fortran-77-with-C-and-C_002b_002b-430">Mixing Fortran 77 with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b-433">Mixing Fortran 77 with C and/or C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-modules_002c-libtool-323">modules, libtool</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-mostlyclean-799"><code>mostlyclean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-mostlyclean_002dlocal-800"><code>mostlyclean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-mostlyclean_002dlocal-605"><code>mostlyclean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-Multiple-_0040file_007bconfigure_002eac_007d-files-98">Multiple <span class="file">configure.ac</span> files</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-Multiple-_0040command_007blex_007d-lexers-405">Multiple <span class="command">lex</span> lexers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-multiple-outputs_002c-rules-with-873">multiple outputs, rules with</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-Multiple-_0040command_007byacc_007d-parsers-404">Multiple <span class="command">yacc</span> parsers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-Nesting-packages-262">Nesting packages</a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-no_002ddefine-696"><code>no-define</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002ddefine-195"><code>no-define</code></a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-no_002ddependencies-698"><code>no-dependencies</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002ddependencies-463"><code>no-dependencies</code></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-no_002ddist-700"><code>no-dist</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002ddist_002dgzip-702"><code>no-dist-gzip</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002dexeext-705"><code>no-exeext</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002dinstallinfo-707"><code>no-installinfo</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002dinstallinfo-565"><code>no-installinfo</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-no_002dinstallman-711"><code>no-installman</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002dinstallman-585"><code>no-installman</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-no_002dtexinfo_002etex-716"><code>no-texinfo.tex</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-no_002dtexinfo_002etex-560"><code>no-texinfo.tex</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bnobase_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-257"><code>nobase_</code> and <code>dist_</code> or <code>nodist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-_0040code_007bnobase_005f_007d-prefix-254"><code>nobase_</code> prefix</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-_0040code_007bnodist_005f_007d-and-_0040code_007bnobase_005f_007d-259"><code>nodist_</code> and <code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-_0040code_007bnoinst_005f_007d-primary-prefix_002c-definition-58"><code>noinst_</code> primary prefix, definition</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bnoinstall_002dinfo_007d-option-564"><code>noinstall-info</code> option</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bnoinstall_002dman_007d-option-584"><code>noinstall-man</code> option</a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-Non_002dGNU-packages-29">Non-GNU packages</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Non_002dstandard-targets-9">Non-standard targets</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-nostdinc-714"><code>nostdinc</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-_0040code_007bOBJCFLAGS_007d-and-_0040code_007bAM_005fOBJCFLAGS_007d-869"><code>OBJCFLAGS</code> and <code>AM_OBJCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Objects-in-subdirectory-345">Objects in subdirectory</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-Option_002c-_0040code_007b_002d_002dwarnings_003d_0040var_007bcategory_007d_007d-740">Option, <code>--warnings=</code><var>category</var></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007b_002dW_0040var_007bcategory_007d_007d-739">Option, <code>-W</code><var>category</var></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bansi2knr_007d-675">Option, <code>ansi2knr</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bcheck_002dnews_007d-677">Option, <code>check-news</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bcygnus_007d-670">Option, <code>cygnus</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bdejagnu_007d-679">Option, <code>dejagnu</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bdist_002dbzip2_007d-681">Option, <code>dist-bzip2</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bdist_002dshar_007d-684">Option, <code>dist-shar</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bdist_002dtarZ_007d-690">Option, <code>dist-tarZ</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bdist_002dzip_007d-687">Option, <code>dist-zip</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bfilename_002dlength_002dmax_003d99_007d-693">Option, <code>filename-length-max=99</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bforeign_007d-669">Option, <code>foreign</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bgnits_007d-667">Option, <code>gnits</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bgnu_007d-668">Option, <code>gnu</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002ddefine_007d-695">Option, <code>no-define</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002ddependencies_007d-697">Option, <code>no-dependencies</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002ddist_007d-699">Option, <code>no-dist</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002ddist_002dgzip_007d-701">Option, <code>no-dist-gzip</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002dexeext_007d-704">Option, <code>no-exeext</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002dinstallinfo_007d-706">Option, <code>no-installinfo</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002dinstallman_007d-710">Option, <code>no-installman</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002dtexinfo_002etex_007d-715">Option, <code>no-texinfo.tex</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007bnoinstall_002dinfo_007d-561">Option, <code>noinstall-info</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Option_002c-_0040code_007bnoinstall_002dman_007d-582">Option, <code>noinstall-man</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-Option_002c-_0040code_007bnostdinc_007d-713">Option, <code>nostdinc</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007breadme_002dalpha_007d-717">Option, <code>readme-alpha</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007btar_002dpax_007d-729">Option, <code>tar-pax</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007btar_002dustar_007d-728">Option, <code>tar-ustar</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040code_007btar_002dv7_007d-727">Option, <code>tar-v7</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-_0040var_007bversion_007d-737">Option, <var>version</var></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Option_002c-warnings-738">Option, warnings</a>: <a href="#Options">Options</a></li>
<li><a href="#index-Options_002c-_0040command_007baclocal_007d-172">Options, <span class="command">aclocal</span></a>: <a href="#aclocal-options">aclocal options</a></li>
<li><a href="#index-Options_002c-_0040command_007bautomake_007d-103">Options, <span class="command">automake</span></a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-Options_002c-_0040code_007bstd_002doptions_007d-719">Options, <code>std-options</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Options_002c-_0040code_007bsubdir_002dobjects_007d-725">Options, <code>subdir-objects</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Ordering-flag-variables-844">Ordering flag variables</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Overriding-make-rules-17">Overriding make rules</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Overriding-make-targets-18">Overriding make targets</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Overriding-make-variables-20">Overriding make variables</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-overriding-rules-774">overriding rules</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-overriding-semantics-775">overriding semantics</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bPACKAGE_007d_002c-directory-50"><code>PACKAGE</code>, directory</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bPACKAGE_007d_002c-prevent-definition-193"><code>PACKAGE</code>, prevent definition</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-Path-stripping_002c-avoiding-255">Path stripping, avoiding</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-pax-format-733">pax format</a>: <a href="#Options">Options</a></li>
<li><a href="#index-pdf-787"><code>pdf</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-PDF-output-using-Texinfo-543">PDF output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-pdf_002dlocal-788"><code>pdf-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Per_002dobject-flags_002c-emulated-872">Per-object flags, emulated</a>: <a href="#Per_002dObject-Flags">Per-Object Flags</a></li>
<li><a href="#index-per_002dtarget-compilation-flags_002c-defined-363">per-target compilation flags, defined</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-_0040code_007bpkgdatadir_007d_002c-defined-46"><code>pkgdatadir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bpkgincludedir_007d_002c-defined-45"><code>pkgincludedir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-_0040code_007bpkglibdir_007d_002c-defined-44"><code>pkglibdir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-POSIX-termios-headers-212">POSIX termios headers</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-Preprocessing-Fortran-77-426">Preprocessing Fortran 77</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bDATA_007d-495">Primary variable, <code>DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-Primary-variable_002c-defined-41">Primary variable, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bHEADERS_007d-484">Primary variable, <code>HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bJAVA_007d-518">Primary variable, <code>JAVA</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLIBRARIES_007d-297">Primary variable, <code>LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLISP_007d-507">Primary variable, <code>LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLTLIBRARIES_007d-312">Primary variable, <code>LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bMANS_007d-578">Primary variable, <code>MANS</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bPROGRAMS_007d-40">Primary variable, <code>PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bPYTHON_007d-528">Primary variable, <code>PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bSCRIPTS_007d-471">Primary variable, <code>SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bSOURCES_007d-276">Primary variable, <code>SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bTEXINFOS_007d-541">Primary variable, <code>TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bprog_005fLDADD_007d_002c-defined-284"><code>prog_LDADD</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-_0040code_007bPROGRAMS_007d-primary-variable-39"><code>PROGRAMS</code> primary variable</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Programs_002c-auxiliary-75">Programs, auxiliary</a>: <a href="#Auxiliary-Programs">Auxiliary Programs</a></li>
<li><a href="#index-_0040code_007bPROGRAMS_007d_002c-_0040code_007bbindir_007d-266"><code>PROGRAMS</code>, <code>bindir</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Programs_002c-conditional-292">Programs, conditional</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-Proxy-_0040file_007bMakefile_007d-for-third_002dparty-packages-825">Proxy <span class="file">Makefile</span> for third-party packages</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-ps-785"><code>ps</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-PS-output-using-Texinfo-544">PS output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-ps_002dlocal-786"><code>ps-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bPYTHON_007d-primary_002c-defined-527"><code>PYTHON</code> primary, defined</a>: <a href="#Python">Python</a></li>
<li><a href="#index-Ratfor-programs-428">Ratfor programs</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-_0040file_007bREADME_002dalpha_007d-767"><span class="file">README-alpha</span></a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-readme_002dalpha-718"><code>readme-alpha</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-rebuild-rules-827">rebuild rules</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-rebuild-rules-659">rebuild rules</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-Recognized-macros-by-Automake-139">Recognized macros by Automake</a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-Recursive-operation-of-Automake-21">Recursive operation of Automake</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-recursive-targets-and-third_002dparty-_0040file_007bMakefile_007ds-820">recursive targets and third-party <span class="file">Makefile</span>s</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-regex-package-221">regex package</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-Regression-test-example-91">Regression test example</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Reporting-bugs-7">Reporting bugs</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Requirements-of-Automake-134">Requirements of Automake</a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-Requirements_002c-Automake-5">Requirements, Automake</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Restrictions-for-_0040code_007bJAVA_007d-520">Restrictions for <code>JAVA</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-_0040code_007bRFLAGS_007d-and-_0040code_007bAM_005fRFLAGS_007d-870"><code>RFLAGS</code> and <code>AM_RFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-rules-with-multiple-outputs-875">rules with multiple outputs</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-rules_002c-conflicting-771">rules, conflicting</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-rules_002c-overriding-776">rules, overriding</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-rx-package-222">rx package</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-Scanning-_0040file_007bconfigure_002eac_007d-132">Scanning <span class="file">configure.ac</span></a>: <a href="#configure">configure</a></li>
<li><a href="#index-_0040code_007bSCRIPTS_007d-primary_002c-defined-470"><code>SCRIPTS</code> primary, defined</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-_0040code_007bSCRIPTS_007d_002c-installation-directories-474"><code>SCRIPTS</code>, installation directories</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-Selecting-the-linker-automatically-439">Selecting the linker automatically</a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-Shared-libraries_002c-support-for-303">Shared libraries, support for</a>: <a href="#A-Shared-Library">A Shared Library</a></li>
<li><a href="#index-_0040file_007bsite_002eexp_007d-658"><span class="file">site.exp</span></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-_0040code_007bSOURCES_007d-primary_002c-defined-275"><code>SOURCES</code> primary, defined</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Special-Automake-comment-25">Special Automake comment</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-std_002doptions-723"><code>std-options</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Strictness_002c-command-line-104">Strictness, command line</a>: <a href="#Invoking-Automake">Invoking Automake</a></li>
<li><a href="#index-Strictness_002c-defined-30">Strictness, defined</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040code_007bforeign_007d-31">Strictness, <code>foreign</code></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040code_007bgnits_007d-35">Strictness, <code>gnits</code></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040code_007bgnu_007d-33">Strictness, <code>gnu</code></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-subdir_002dobjects-726"><code>subdir-objects</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Subdirectories_002c-building-conditionally-241">Subdirectories, building conditionally</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Subdirectories_002c-configured-conditionally-251">Subdirectories, configured conditionally</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Subdirectories_002c-not-distributed-252">Subdirectories, not distributed</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Subdirectory_002c-objects-in-344">Subdirectory, objects in</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-_0040code_007bSUBDIRS_007d-and-_0040code_007bAC_005fSUBST_007d-249"><code>SUBDIRS</code> and <code>AC_SUBST</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-_0040code_007bSUBDIRS_007d-and-_0040code_007bAM_005fCONDITIONAL_007d-246"><code>SUBDIRS</code> and <code>AM_CONDITIONAL</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-_0040code_007bSUBDIRS_007d_002c-conditional-243"><code>SUBDIRS</code>, conditional</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-_0040code_007bSUBDIRS_007d_002c-explained-237"><code>SUBDIRS</code>, explained</a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-Subpackages-263">Subpackages</a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-suffix-_0040file_007b_002ela_007d_002c-defined-306">suffix <span class="file">.la</span>, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-suffix-_0040file_007b_002elo_007d_002c-defined-308">suffix <span class="file">.lo</span>, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-_0040code_007bSUFFIXES_007d_002c-adding-750"><code>SUFFIXES</code>, adding</a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-Support-for-C_002b_002b-408">Support for C++</a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-Support-for-Fortran-77-418">Support for Fortran 77</a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-Support-for-Fortran-9x-441">Support for Fortran 9x</a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-Support-for-GNU-Gettext-515">Support for GNU Gettext</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-Support-for-Java-448">Support for Java</a>: <a href="#Java-Support">Java Support</a></li>
<li><a href="#index-tags-742"><code>tags</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-_0040file_007bTAGS_007d-support-741"><span class="file">TAGS</span> support</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-_0040command_007btar_007d-formats-730"><span class="command">tar</span> formats</a>: <a href="#Options">Options</a></li>
<li><a href="#index-tar_002dpax-736"><code>tar-pax</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-tar_002dustar-735"><code>tar-ustar</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-tar_002dv7-734"><code>tar-v7</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-Target_002c-_0040code_007binstall_002dinfo_007d-562">Target, <code>install-info</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Target_002c-_0040code_007binstall_002dman_007d-581">Target, <code>install-man</code></a>: <a href="#Man-pages">Man pages</a></li>
<li><a href="#index-termios-POSIX-headers-213">termios POSIX headers</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-Test-suites-642">Test suites</a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-Tests_002c-expected-failure-648">Tests, expected failure</a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-Texinfo-file-handling-example-89">Texinfo file handling example</a>: <a href="#Hello">Hello</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bEDITION_007d-550">Texinfo flag, <code>EDITION</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bUPDATED_007d-549">Texinfo flag, <code>UPDATED</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bUPDATED_002dMONTH_007d-551">Texinfo flag, <code>UPDATED-MONTH</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bVERSION_007d-548">Texinfo flag, <code>VERSION</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040file_007btexinfo_002etex_007d-559"><span class="file">texinfo.tex</span></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bTEXINFOS_007d-primary_002c-defined-540"><code>TEXINFOS</code> primary, defined</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-third_002dparty-files-and-CVS-833">third-party files and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-Third_002dparty-packages_002c-interfacing-with-818">Third-party packages, interfacing with</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-timestamps-and-CVS-828">timestamps and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-_0040command_007btrue_007d-Example-97"><span class="command">true</span> Example</a>: <a href="#true">true</a></li>
<li><a href="#index-underquoted-_0040code_007bAC_005fDEFUN_007d-232">underquoted <code>AC_DEFUN</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-Uniform-naming-scheme-37">Uniform naming scheme</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-uninstall-797"><code>uninstall</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-uninstall-597"><code>uninstall</code></a>: <a href="#Install">Install</a></li>
<li><a href="#index-uninstall_002dhook-813"><code>uninstall-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-uninstall_002dlocal-798"><code>uninstall-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-_0040code_007bUPDATED_007d-Texinfo-flag-553"><code>UPDATED</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bUPDATED_002dMONTH_007d-Texinfo-flag-555"><code>UPDATED-MONTH</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-user-variables-74">user variables</a>: <a href="#User-Variables">User Variables</a></li>
<li><a href="#index-ustar-format-732">ustar format</a>: <a href="#Options">Options</a></li>
<li><a href="#index-v7-_0040command_007btar_007d-format-731">v7 <span class="command">tar</span> format</a>: <a href="#Options">Options</a></li>
<li><a href="#index-variables_002c-conflicting-772">variables, conflicting</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Variables_002c-overriding-19">Variables, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-variables_002c-reserved-for-the-user-73">variables, reserved for the user</a>: <a href="#User-Variables">User Variables</a></li>
<li><a href="#index-_0040code_007bVERSION_007d-Texinfo-flag-552"><code>VERSION</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-_0040code_007bVERSION_007d_002c-prevent-definition-194"><code>VERSION</code>, prevent definition</a>: <a href="#Public-macros">Public macros</a></li>
<li><a href="#index-_0040file_007bversion_002em4_007d_002c-example-665"><span class="file">version.m4</span>, example</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-_0040file_007bversion_002esh_007d_002c-example-664"><span class="file">version.sh</span>, example</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-versioned-binaries_002c-installing-815">versioned binaries, installing</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-wildcards-837">wildcards</a>: <a href="#wildcards">wildcards</a></li>
<li><a href="#index-Windows-468">Windows</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-_0040command_007byacc_007d_002c-multiple-parsers-403"><span class="command">yacc</span>, multiple parsers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-_0040code_007bYFLAGS_007d-and-_0040code_007bAM_005fYFLAGS_007d-871"><code>YFLAGS</code> and <code>AM_YFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-_0040command_007bylwrap_007d-402"><span class="command">ylwrap</span></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-_0040command_007bzardoz_007d-example-82"><span class="command">zardoz</span> example</a>: <a href="#Complete">Complete</a></li>
   </ul>
<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">GNU Automake</a>
</li><li><a name="toc_Introduction" href="#Introduction">1 Introduction</a>
</li><li><a name="toc_Generalities" href="#Generalities">2 General ideas</a>
<ul>
<li><a href="#General-Operation">2.1 General Operation</a>
</li><li><a href="#Strictness">2.2 Strictness</a>
</li><li><a href="#Uniform">2.3 The Uniform Naming Scheme</a>
</li><li><a href="#Canonicalization">2.4 How derived variables are named</a>
</li><li><a href="#User-Variables">2.5 Variables reserved for the user</a>
</li><li><a href="#Auxiliary-Programs">2.6 Programs automake might require</a>
</li></ul>
</li><li><a name="toc_Examples" href="#Examples">3 Some example packages</a>
<ul>
<li><a href="#Complete">3.1 A simple example, start to finish</a>
</li><li><a href="#Hello">3.2 A classic program</a>
</li><li><a href="#true">3.3 Building true and false</a>
</li></ul>
</li><li><a name="toc_Invoking-Automake" href="#Invoking-Automake">4 Creating a <span class="file">Makefile.in</span></a>
</li><li><a name="toc_configure" href="#configure">5 Scanning <span class="file">configure.ac</span></a>
<ul>
<li><a href="#Requirements">5.1 Configuration requirements</a>
</li><li><a href="#Optional">5.2 Other things Automake recognizes</a>
</li><li><a href="#Invoking-aclocal">5.3 Auto-generating aclocal.m4</a>
</li><li><a href="#aclocal-options">5.4 aclocal options</a>
</li><li><a href="#Macro-search-path">5.5 Macro search path</a>
<ul>
<li><a href="#Macro-search-path">5.5.1 Modifying the macro search path: <code>--acdir</code></a>
</li><li><a href="#Macro-search-path">5.5.2 Modifying the macro search path: <code>-I </code><var>dir</var></a>
</li><li><a href="#Macro-search-path">5.5.3 Modifying the macro search path: <span class="file">dirlist</span></a>
</li></ul>
</li><li><a href="#Macros">5.6 Autoconf macros supplied with Automake</a>
<ul>
<li><a href="#Public-macros">5.6.1 Public macros</a>
</li><li><a href="#Private-macros">5.6.2 Private macros</a>
</li></ul>
</li><li><a href="#Extending-aclocal">5.7 Writing your own aclocal macros</a>
</li><li><a href="#Local-Macros">5.8 Handling Local Macros</a>
</li><li><a href="#Future-of-aclocal">5.9 The Future of <span class="command">aclocal</span></a>
</li></ul>
</li><li><a name="toc_Directories" href="#Directories">6 Directories</a>
<ul>
<li><a href="#Subdirectories">6.1 Recursing subdirectories</a>
</li><li><a href="#Conditional-Subdirectories">6.2 Conditional Subdirectories</a>
<ul>
<li><a href="#Conditional-Subdirectories">6.2.1 <code>SUBDIRS</code> vs. <code>DIST_SUBDIRS</code></a>
</li><li><a href="#Conditional-Subdirectories">6.2.2 Conditional subdirectories with <code>AM_CONDITIONAL</code></a>
</li><li><a href="#Conditional-Subdirectories">6.2.3 Conditional Subdirectories with <code>AC_SUBST</code></a>
</li><li><a href="#Conditional-Subdirectories">6.2.4 Non-configured Subdirectories</a>
</li></ul>
</li><li><a href="#Alternative">6.3 An Alternative Approach to Subdirectories</a>
</li><li><a href="#Subpackages">6.4 Nesting Packages</a>
</li></ul>
</li><li><a name="toc_Programs" href="#Programs">7 Building Programs and Libraries</a>
<ul>
<li><a href="#A-Program">7.1 Building a program</a>
<ul>
<li><a href="#Program-Sources">7.1.1 Defining program sources</a>
</li><li><a href="#Linking">7.1.2 Linking the program</a>
</li><li><a href="#Conditional-Sources">7.1.3 Conditional compilation of sources</a>
<ul>
<li><a href="#Conditional-Sources">7.1.3.1 Conditional compilation using <code>_LDADD</code> substitutions</a>
</li><li><a href="#Conditional-Sources">7.1.3.2 Conditional compilation using Automake conditionals</a>
</li></ul>
</li><li><a href="#Conditional-Programs">7.1.4 Conditional compilation of programs</a>
<ul>
<li><a href="#Conditional-Programs">7.1.4.1 Conditional programs using <code>configure</code> substitutions</a>
</li><li><a href="#Conditional-Programs">7.1.4.2 Conditional programs using Automake conditionals</a>
</li></ul>
</li></ul>
</li><li><a href="#A-Library">7.2 Building a library</a>
</li><li><a href="#A-Shared-Library">7.3 Building a Shared Library</a>
<ul>
<li><a href="#Libtool-Concept">7.3.1 The Libtool Concept</a>
</li><li><a href="#Libtool-Libraries">7.3.2 Building Libtool Libraries</a>
</li><li><a href="#Conditional-Libtool-Libraries">7.3.3 Building Libtool Libraries Conditionally</a>
</li><li><a href="#Conditional-Libtool-Sources">7.3.4 Libtool Libraries with Conditional Sources</a>
</li><li><a href="#Libtool-Convenience-Libraries">7.3.5 Libtool Convenience Libraries</a>
</li><li><a href="#Libtool-Modules">7.3.6 Libtool Modules</a>
</li><li><a href="#Libtool-Flags">7.3.7 _LIBADD and _LDFLAGS</a>
</li><li><a href="#LTLIBOBJS">7.3.8 <code>LTLIBOBJS</code> and <code>LTALLOCA</code></a>
</li><li><a href="#Libtool-Issues">7.3.9 Common Issues Related to Libtool's Use</a>
<ul>
<li><a href="#Libtool-Issues">7.3.9.1 <code>required file `./ltmain.sh' not found</code></a>
</li><li><a href="#Libtool-Issues">7.3.9.2 Objects <code>created with both libtool and without</code></a>
</li></ul>
</li></ul>
</li><li><a href="#Program-and-Library-Variables">7.4 Program and Library Variables</a>
</li><li><a href="#Default-_005fSOURCES">7.5 Default <code>_SOURCES</code></a>
</li><li><a href="#LIBOBJS">7.6 Special handling for LIBOBJS and ALLOCA</a>
</li><li><a href="#Program-variables">7.7 Variables used when building a program</a>
</li><li><a href="#Yacc-and-Lex">7.8 Yacc and Lex support</a>
</li><li><a href="#C_002b_002b-Support">7.9 C++ Support</a>
</li><li><a href="#Assembly-Support">7.10 Assembly Support</a>
</li><li><a href="#Fortran-77-Support">7.11 Fortran 77 Support</a>
<ul>
<li><a href="#Preprocessing-Fortran-77">7.11.1 Preprocessing Fortran 77</a>
</li><li><a href="#Compiling-Fortran-77-Files">7.11.2 Compiling Fortran 77 Files</a>
</li><li><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">7.11.3 Mixing Fortran 77 With C and C++</a>
<ul>
<li><a href="#How-the-Linker-is-Chosen">7.11.3.1 How the Linker is Chosen</a>
</li></ul>
</li></ul>
</li><li><a href="#Fortran-9x-Support">7.12 Fortran 9x Support</a>
<ul>
<li><a href="#Compiling-Fortran-9x-Files">7.12.1 Compiling Fortran 9x Files</a>
</li></ul>
</li><li><a href="#Java-Support">7.13 Java Support</a>
</li><li><a href="#Support-for-Other-Languages">7.14 Support for Other Languages</a>
</li><li><a href="#ANSI">7.15 Automatic de-ANSI-fication</a>
</li><li><a href="#Dependencies">7.16 Automatic dependency tracking</a>
</li><li><a href="#EXEEXT">7.17 Support for executable extensions</a>
</li></ul>
</li><li><a name="toc_Other-objects" href="#Other-objects">8 Other Derived Objects</a>
<ul>
<li><a href="#Scripts">8.1 Executable Scripts</a>
</li><li><a href="#Headers">8.2 Header files</a>
</li><li><a href="#Data">8.3 Architecture-independent data files</a>
</li><li><a href="#Sources">8.4 Built sources</a>
<ul>
<li><a href="#Built-sources-example">8.4.1 Built sources example</a>
</li><li><a href="#Built-sources-example">First try</a>
</li><li><a href="#Built-sources-example">Using <code>BUILT_SOURCES</code></a>
</li><li><a href="#Built-sources-example">Recording dependencies manually</a>
</li><li><a href="#Built-sources-example">Build <span class="file">bindir.h</span> from <span class="file">configure</span></a>
</li><li><a href="#Built-sources-example">Build <span class="file">bindir.c</span>, not <span class="file">bindir.h</span>.</a>
</li><li><a href="#Built-sources-example">Which is best?</a>
</li></ul>
</li></ul>
</li><li><a name="toc_Other-GNU-Tools" href="#Other-GNU-Tools">9 Other GNU Tools</a>
<ul>
<li><a href="#Emacs-Lisp">9.1 Emacs Lisp</a>
</li><li><a href="#gettext">9.2 Gettext</a>
</li><li><a href="#Libtool">9.3 Libtool</a>
</li><li><a href="#Java">9.4 Java</a>
</li><li><a href="#Python">9.5 Python</a>
</li></ul>
</li><li><a name="toc_Documentation" href="#Documentation">10 Building documentation</a>
<ul>
<li><a href="#Texinfo">10.1 Texinfo</a>
</li><li><a href="#Man-pages">10.2 Man pages</a>
</li></ul>
</li><li><a name="toc_Install" href="#Install">11 What Gets Installed</a>
<ul>
<li><a href="#Install">11.1 Basics of installation</a>
</li><li><a href="#Install">11.2 The two parts of install</a>
</li><li><a href="#Install">11.3 Extending installation</a>
</li><li><a href="#Install">11.4 Staged installs</a>
</li><li><a href="#Install">11.5 Rules for the user</a>
</li></ul>
</li><li><a name="toc_Clean" href="#Clean">12 What Gets Cleaned</a>
</li><li><a name="toc_Dist" href="#Dist">13 What Goes in a Distribution</a>
<ul>
<li><a href="#Dist">13.1 Basics of distribution</a>
</li><li><a href="#Dist">13.2 Fine-grained distribution control</a>
</li><li><a href="#Dist">13.3 The dist hook</a>
</li><li><a href="#Dist">13.4 Checking the distribution</a>
</li><li><a href="#Dist">13.5 The types of distributions</a>
</li></ul>
</li><li><a name="toc_Tests" href="#Tests">14 Support for test suites</a>
<ul>
<li><a href="#Tests">14.1 Simple Tests</a>
</li><li><a href="#Tests">14.2 DejaGnu Tests</a>
</li><li><a href="#Tests">14.3 Install Tests</a>
</li></ul>
</li><li><a name="toc_Rebuilding" href="#Rebuilding">15 Rebuilding Makefiles</a>
</li><li><a name="toc_Options" href="#Options">16 Changing Automake's Behavior</a>
</li><li><a name="toc_Miscellaneous" href="#Miscellaneous">17 Miscellaneous Rules</a>
<ul>
<li><a href="#Tags">17.1 Interfacing to <code>etags</code></a>
</li><li><a href="#Suffixes">17.2 Handling new file extensions</a>
</li><li><a href="#Multilibs">17.3 Support for Multilibs</a>
</li></ul>
</li><li><a name="toc_Include" href="#Include">18 Include</a>
</li><li><a name="toc_Conditionals" href="#Conditionals">19 Conditionals</a>
</li><li><a name="toc_Gnits" href="#Gnits">20 The effect of <code>--gnu</code> and <code>--gnits</code></a>
</li><li><a name="toc_Cygnus" href="#Cygnus">21 The effect of <code>--cygnus</code></a>
</li><li><a name="toc_Not-Enough" href="#Not-Enough">22 When Automake Isn't Enough</a>
<ul>
<li><a href="#Extending">22.1 Extending Automake Rules</a>
</li><li><a href="#Third_002dParty-Makefiles">22.2 Third-Party <span class="file">Makefile</span>s</a>
</li></ul>
</li><li><a name="toc_Distributing" href="#Distributing">23 Distributing <span class="file">Makefile.in</span>s</a>
</li><li><a name="toc_API-versioning" href="#API-versioning">24 Automake API versioning</a>
</li><li><a name="toc_Upgrading" href="#Upgrading">25 Upgrading a Package to a Newer Automake Version</a>
</li><li><a name="toc_FAQ" href="#FAQ">26 Frequently Asked Questions about Automake</a>
<ul>
<li><a href="#CVS">26.1 CVS and generated files</a>
<ul>
<li><a href="#CVS">26.1.1 Background: distributed generated files</a>
</li><li><a href="#CVS">26.1.2 Background: CVS and timestamps</a>
</li><li><a href="#CVS">26.1.3 Living with CVS in Autoconfiscated projects</a>
</li><li><a href="#CVS">26.1.4 Third-party files</a>
</li></ul>
</li><li><a href="#maintainer_002dmode">26.2 <span class="command">missing</span> and <code>AM_MAINTAINER_MODE</code></a>
<ul>
<li><a href="#maintainer_002dmode">26.2.1 <span class="command">missing</span></a>
</li><li><a href="#maintainer_002dmode">26.2.2 <code>AM_MAINTAINER_MODE</code></a>
</li></ul>
</li><li><a href="#wildcards">26.3 Why doesn't Automake support wildcards?</a>
</li><li><a href="#distcleancheck">26.4 Files left in build directory after distclean</a>
</li><li><a href="#Flag-Variables-Ordering">26.5 Flag Variables Ordering</a>
<ul>
<li><a href="#Flag-Variables-Ordering">26.5.1 Compile Flag Variables</a>
</li><li><a href="#Flag-Variables-Ordering">26.5.2 Other Variables</a>
</li></ul>
</li><li><a href="#renamed-objects">26.6 Why are object files sometimes renamed?</a>
</li><li><a href="#Per_002dObject-Flags">26.7 Per-Object Flags Emulation</a>
</li><li><a href="#Multiple-Outputs">26.8 Handling Tools that Produce Many Outputs</a>
</li></ul>
</li><li><a name="toc_History" href="#History">27 History of Automake</a>
<ul>
<li><a href="#Timeline">27.1 Timeline</a>
</li><li><a href="#Dependency-Tracking-Evolution">27.2 Dependency Tracking in Automake</a>
<ul>
<li><a href="#Dependency-Tracking-Evolution">27.2.1 First Take</a>
<ul>
<li><a href="#Dependency-Tracking-Evolution">Description</a>
</li><li><a href="#Dependency-Tracking-Evolution">Bugs</a>
</li><li><a href="#Dependency-Tracking-Evolution">Historical Note</a>
</li></ul>
</li><li><a href="#Dependency-Tracking-Evolution">27.2.2 Dependencies As Side Effects</a>
<ul>
<li><a href="#Dependency-Tracking-Evolution">Description</a>
</li><li><a href="#Dependency-Tracking-Evolution">Bugs</a>
</li></ul>
</li><li><a href="#Dependency-Tracking-Evolution">27.2.3 Dependencies for the User</a>
<ul>
<li><a href="#Dependency-Tracking-Evolution">Description</a>
</li><li><a href="#Dependency-Tracking-Evolution">Bugs</a>
</li></ul>
</li><li><a href="#Dependency-Tracking-Evolution">27.2.4 Techniques for Computing Dependencies</a>
</li><li><a href="#Dependency-Tracking-Evolution">27.2.5 Recommendations for Tool Writers</a>
</li><li><a href="#Dependency-Tracking-Evolution">27.2.6 Future Directions for Automake's Dependency Tracking</a>
</li></ul>
</li><li><a href="#Releases">27.3 Release Statistics</a>
</li></ul>
</li><li><a name="toc_Copying-This-Manual" href="#Copying-This-Manual">Appendix A Copying This Manual</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">A.1 GNU Free Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">A.1.1 ADDENDUM: How to use this License for your documents</a>
</li></ul>
</li></ul>
</li><li><a name="toc_Indices" href="#Indices">Appendix B Indices</a>
<ul>
<li><a href="#Macro-Index">B.1 Macro Index</a>
</li><li><a href="#Variable-Index">B.2 Variable Index</a>
</li><li><a href="#General-Index">B.3 General Index</a>
</li></ul>
</li></ul>
</div>

<div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> These variables are
also called <dfn>make macros</dfn> in Make terminology, however in this
manual we reserve the term <dfn>macro</dfn> for Autoconf's macros.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> Older Autoconf versions used
<span class="file">configure.in</span>.  Autoconf 2.50 and greater promotes
<span class="file">configure.ac</span> over <span class="file">configure.in</span>.  The rest of this
documentation will refer to <span class="file">configure.ac</span>, but Automake also
supports <span class="file">configure.in</span> for backward compatibility.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> We
believe.  This work is new and there are probably warts.
See <a href="#Introduction">Introduction</a>, for information on reporting bugs.</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> There are other, more obscure reasons for
this limitation as well.</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> Much, if not most, of the
information in the following sections pertaining to preprocessing
Fortran 77 programs was taken almost verbatim from <a href="http://sources.redhat.com/automake/make.html#Catalogue-of-Rules">Catalogue of Rules (The GNU Make Manual)</a>.</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> For example,
<a href="http://www-zeus.desy.de/%7Eburow/cfortran/">the cfortran package</a>
addresses all of these inter-language issues, and runs under nearly all
Fortran 77, C and C++ compilers on nearly all platforms.  However,
<code>cfortran</code> is not yet Free Software, but it will be in the next
major release.</p>

   <p></p><hr></div>

</body></html>